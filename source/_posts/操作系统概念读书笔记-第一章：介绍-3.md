---
title: 操作系统概念读书笔记-第一章：介绍-3
date: 2022-01-01 10:34:59
img: https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211228175748055.png
summary: '本文是《操作系统概念（第九版）》的第一章的读书笔记第三部分，主要介绍了操作系统的任务。This blog is the second part of reading notes of Operating System Concepts (Ninth Edition) chapter 1: Introduction, which tells  the main task of Operating System.'
categories:
  - Operating System Concepts Reading Notes
tags:
  - 操作系统
  - Operating System
  - Reading Notes
---

> 本文是《操作系统概念（第九版）》的第一章的读书笔记第三部分，主要介绍了操作系统的任务。
>
> This blog is the second part of reading notes of  _Operating System Concepts (Ninth Edition)_ chapter 1: Introduction, which tells  the main task of Operating System.

![Chapter 1: Introduction](https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211228175748055.png)





## Operating System Concepts-Chapter 1: Introduction-3 Main Tasks of Operating System 

操作系统概念第一部分是Overview，包括第一章和第二章。

本章主要介绍了操作系统中一些基本概念和操作系统的发展历史/操作系统的种类，以及操作系统的任务。本章的第三部分主要讲解了操作系统的主要任务



## 1. 概览

从宏观的角度来说，操作系统的任务主要有以下几个：

- 进程管理（Process Management）
- 内存管理（Memory Management）
- 文件管理（File Management）
- 设备管理（Device Management）

因此，如果把操作系统当做人的话，操作系统就是一个多面手：

- 进程管理员
- 内存管理员
- 文件管理员
- 设备管理员

实际上，上面四个任务之间是需要相互配合、沟通的。例如进程的调度问题，就需要内存管理和进程管理；而文件管理由于文件会保存在磁盘上的，因此还需要设备管理的配合。

当然，以上的四个部分是作为操作系统的基石的，而操作系统是需要被用户所使用的，因此需要操作系统为用户提供一个**用户命令界面（User Command Interface）**以让用户使用操作系统。

<img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20220101105618888.png" alt="image-20220101105618888" style="zoom:150%;" />

下面就将详细的介绍这四个部分。



## 2. Process Management，进程管理

通常而言，我们的程序写下来的时候，源代码是文本形式的文本文件，保存在磁盘上。而同样，我们用编译器把源代码编译为二进制可执行程序后，程序的内容从文本变成了二进制的指令，但是依旧保存在磁盘上。

我们运行程序的时候，首先需要把磁盘上的包含二进制指令的可执行程序从磁盘读入内存（因为磁盘太慢了），而后CPU执行程序的时候直接从内存中读取程序（的指令），运行即可。

因此，通常称在内存中的程序为**进程（Process）**。进程实际上就是正在执行的程序，是程序的的动态的程序实体。而保存在磁盘上的程序则是静态的程序实体。

一个进程实际上是CPU指令序列，此外进程在被CPU执行的时候还可能会需要其他的资源，例如某个文件中的数据、输出结果到某个文件，因此的**一个进程如果想要完成其工作，就需要各种各样的资源**：

- CPU、内存资源、I/O资源、文件资源
- 初始化数据

计算机系统中的资源往往具有不可复制性，例如CPU只有一个，某个文件在磁盘中也只有一份。因此一个进程结束（Terminate）的时候需要释放（reclaim）所有的资源。

此外，CPU在某一个时间点只能运行一条指令，因此CPU中需要有一个寄存器，专门存储下一条指令在内存中的位置，这个寄存器叫做程序计数器（Program Counter，PC）或者指令指针（Instruction Pointer，IP）。

此外，由于现代的进程支持多线程，而每个线程在逻辑上都是独立的指令序列，因此多线程的程序中每个线程都会有自己的PC，而单线程的程序中只有一个PC。

通常来说，一个典型的操作系统系统会有非常多的进程，（例如我们通过htop命令看到的，目前系统中一共有204个进程，777个线程（但是注意，正在运行的进程很少，我截图的时候只有六个））、一些用户。

![htop命令的输出](https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20220101113559220.png)



因此，当我们说到操作系统的进程管理的时候，通常指代下面的一些操作系统需要完成的任务：

- 创建和删除用户、系统进程
- 挂起和恢复进程（包括进程的调度）
- 提供进程间同步的机制
- 提供进程间通信的机制
- 提供死锁的处理机制

因此，在后面的章节中，我们在进程管理部分就会介绍操作系统是如何完成上述任务的。





## 3. Memory Management，内存管理

我们在本章的前面部分介绍过，需要使用内存的原因是由于磁盘太慢了，让CPU直接从磁盘中读取指令会浪费大量的时间，因此在磁盘和CPU中添加了一个内存。

因此，CPU在执行进程的时候需要的所有的数据都是保存在内存中的，所有即将执行的指令也是都在内存中的。

然而，一个问题就是内存的大小是有限制的，那么就需要决定哪些进程在内存中，那些程序不在。此外，若某个需要运行的程序需要的内存大于剩余的内存怎么办？这些都是内存管理需要解决的问题。

因此，内存管理的任务如下：

- 对内存块进行追踪，明确这块内存块当前正在被那个进程使用
- 决定哪个进程要被移入内存，哪个要被移出
- 根据需要对内存进行分配和释放

查看proc下的meminfo文件，其中记录着系统当前的内存配置信息

```shell
cat /proc/meminfo
```

![系统当前的内存配置信息](https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20220101135344831.png)





## 4. Storage Management，存储管理

前面所说的内存是易失性的，因此为了能够将文件等数据永久的保存下来，我们需要将文件保存到存储器上。

如果没有操作系统的话，把文件保存到磁盘上将会是意见非常累的事情，因为我们需要自己动手写汇编语言，和磁盘的控制器进行交互。

然而，操作的任务就是向下沟通硬件，向上为用户提供服务。因此操作系统就需要对存储器进行管理，为用户提供存储器的统一的逻辑上的视图，即文件和目录。文件和目录这两个逻辑上的概念就是操作系统为我们提供的存储器在逻辑上的视图。通过这两个概念，我们很少会直接直接触到存储器。针对这个概念，操作系统还维护了保存、修改等操作；还有谁能阅读、谁能修改等权限。

此外，由于存储器的不同，因此还会一些问题：

- 不同类型的存储器的访问速度不同，例如固态、机器、磁带
- 不同类型的存储器容量也不同、传输速率不同、访问方式也不同（有的可以随机访问，有的只能顺序访问，比如磁带只能顺序访问而固态/机械可以随机访问）

这些差异都被操作系统给屏蔽了，我们在创建、保存文件并不会考虑到这些差异。

因此，操作系统的存储管理包括以下内容：

- **文件和目录的创建**：文件的组织与管理，即文件、目录在一起构成的文件系统
- **文件的权限管理**：对文件的访问控制，即谁能读取文件、谁能修改





未完待续
