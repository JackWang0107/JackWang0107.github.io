<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>æå®æ¯…ML2021-Spring-hw1ï¼šCovid19 Cases Prediction</title>
      <link href="/2021/12/11/li-hong-yi-ml2021-spring-hw1-covid19-cases-prediction-md/"/>
      <url>/2021/12/11/li-hong-yi-ml2021-spring-hw1-covid19-cases-prediction-md/</url>
      
        <content type="html"><![CDATA[<blockquote><p>æœ¬æ–‡ä¸»è¦è®²è§£æå®æ¯…ML2021 Springçš„Homework1ï¼š Covid19 Cases Prediction</p></blockquote><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211207150639649.png" alt="ä½œä¸šä¸€ï¼šCOVID-19 Cases Prediction"></p><h1 id="æå®æ¯…ML2021-Spring-hw1ï¼šCovid19-Cases-Prediction"><a href="#æå®æ¯…ML2021-Spring-hw1ï¼šCovid19-Cases-Prediction" class="headerlink" title="æå®æ¯…ML2021-Spring-hw1ï¼šCovid19 Cases Prediction"></a>æå®æ¯…ML2021-Spring-hw1ï¼šCovid19 Cases Prediction</h1><h2 id="1-Homework-Objectives"><a href="#1-Homework-Objectives" class="headerlink" title="1. Homework Objectives"></a>1. Homework Objectives</h2><p>ä½œä¸šä¸€çš„ç›®çš„åœ¨äºï¼š</p><ul><li>æ˜ç™½å¦‚ä½•ä½¿ç”¨DNNè§£å†³Regressioné—®é¢˜</li><li>æŒæ¡åŸºæœ¬çš„DNNè®­ç»ƒæŠ€æœ¯ï¼šè°ƒå‚ã€ç‰¹å¾é€‰æ‹©ã€æ­£åˆ™åŒ–</li><li>ç†Ÿæ‚‰Pytorchçš„ä½¿ç”¨</li></ul><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211207151013750.png" alt="Objectives of Homework1"></p><h2 id="2-Task-Description"><a href="#2-Task-Description" class="headerlink" title="2. Task Description"></a>2. Task Description</h2><p>æœ¬æ¬¡ä»»åŠ¡è¦æ±‚æˆ‘ä»¬å¯¹æ¯æ—¥çš„æ–°å† è‚ºç‚çš„ç¡®è¯Šäººæ•°è¿›è¡Œé¢„æµ‹ã€‚</p><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211207151406811.png" alt="Task Description"></p><h3 id="1-Survey-Methods"><a href="#1-Survey-Methods" class="headerlink" title="1. Survey Methods"></a>1. Survey Methods</h3><p>æ•°æ®é›†çš„æ¥æºæ˜¯CMUçš„ç ”ç©¶å‘˜åœ¨ç¤¾äº¤åª’ä½“ä¸Šå‘å¸ƒè°ƒæŸ¥é—®å·ï¼Œé—®å·çš„å†…å®¹åŒ…æ‹¬äº†å¿ƒç†å¥åº·çŠ¶æ€ã€æµæ„Ÿç±»ä¼¼ç—‡çŠ¶ç–¾ç—…æ‚£è€…äººæ•°ã€‚è€Œåæ ¹æ®å—è®¿è€…å±…ä½çš„åœ°åŒºæ¥ç›‘æµ‹ç¾å›½æ‰€æœ‰å·çš„æ‰€æœ‰åŸå¸‚çš„æƒ…å†µã€‚</p><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211211163552345.png" alt="Survey Method"></p><h3 id="2-Data-Inspection"><a href="#2-Data-Inspection" class="headerlink" title="2. Data Inspection"></a>2. Data Inspection</h3><p>æœ¬æ¬¡ä»»åŠ¡çš„æ•°æ®é›†æ˜¯csvæ–‡ä»¶</p><p>åœ¨è®­ç»ƒæ•°æ®ä¸­ï¼Œè®­ç»ƒæ•°æ®çš„csvæ–‡ä»¶ä¸­æ¯ä¸€è¡Œå°±æ˜¯ä¸€ä¸ªexampleã€‚exampleçš„å‰40ç»´æ˜¯å¯¹äºåŸå¸‚çš„one-hotç¼–ç ï¼Œç„¶åæ¯ä¸€ä¸ªæ ·æœ¬ä¼šç»™å‡ºæ¥ä¸‰å¤©çš„è°ƒæŸ¥æƒ…å†µã€‚</p><p>å…¶ä¸­ï¼Œ<strong>å‰ä¸¤å¤©çš„ç¡®è¯Šäººæ•°æ˜¯æˆ‘ä»¬çš„trainingçš„ä¸€ä¸ªfeatureï¼Œè€Œç¬¬ä¸‰å¤©çš„ç¡®è¯Šäººæ•°åˆ™æ˜¯æˆ‘ä»¬éœ€è¦é¢„æµ‹çš„label</strong></p><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211207151633099.png" alt="Training Data Inspection"></p><p>è€Œå¯¹äºæµ‹è¯•æ•°æ®ï¼Œåˆ™åªæœ‰å‰é¢çš„featureï¼Œæ²¡æœ‰æœ€åçš„labelï¼Œæœ€åæˆ‘ä»¬éœ€è¦å°†ç”Ÿæˆçš„labelä»¥csvæ–‡ä»¶çš„å½¢å¼æäº¤</p><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211211164704231.png" alt="Testing Data Inspection"></p><h3 id="3-Evaluation-Metrics"><a href="#3-Evaluation-Metrics" class="headerlink" title="3. Evaluation Metrics"></a>3. Evaluation Metrics</h3><p>é’ˆå¯¹æœ¬æ¬¡ä»»åŠ¡ï¼Œä½¿ç”¨çš„è¡¡é‡æ ‡å‡†æ˜¯Rooted Mean Square Errorï¼ˆRMSEï¼‰ï¼Œæ‰€ä»¥æœ€ååœ¨kaggleä¸Šå¾—åˆ°çš„åˆ†æ•°æ˜¯è¶Šä½è¶Šå¥½ã€‚</p><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211207152032106.png" alt="Evaluation Metric"></p><h3 id="4-Baselines"><a href="#4-Baselines" class="headerlink" title="4. Baselines"></a>4. Baselines</h3><p>è¿™æ¬¡ä»»åŠ¡æœ‰ä¸‰ä¸ªBaseLine</p><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211207151811659.png" alt="Task Baseline"></p><h2 id="3-My-Solution"><a href="#3-My-Solution" class="headerlink" title="3. My Solution"></a>3. My Solution</h2><p>ä¸‹é¢æ˜¯æˆ‘å…³äºæœ¬æ¬¡ä»»åŠ¡çš„ç†è§£å’Œæ›´æ–°</p><h3 id="1-Thoughs"><a href="#1-Thoughs" class="headerlink" title="1. Thoughs"></a>1. Thoughs</h3><p>è¿™ä¸ªæ˜¯ä¸€ä¸ªregressionçš„ä»»åŠ¡ï¼Œæœ€åçš„è¾“å‡ºæ˜¯ä¸€ä¸ªæ•°å­—ï¼Œæ‰€ä»¥ç½‘ç»œæœ€åä¸€å±‚out_featureæ˜¯1å³å¯</p><p>ç„¶åè¿™äº›ç‰¹å¾ä¹‹é—´æœ‰å¯èƒ½æœ‰ä¸€äº›ç‰¹å¾æ˜¯å’Œç¡®è¯Šäººæ•°çš„ç¡®ç›¸å…³çš„ï¼Œæœ‰ä¸€äº›æ˜¯å’Œç¡®è¯Šäººæ•°å®Œå…¨æ— å…³çš„ï¼Œç”šè‡³æ˜¯randomçš„ï¼Œæ‰€ä»¥è¿™ä¸€äº›ç‰¹å¾å¯èƒ½ä¼šå½±å“æœ€åçš„åˆ¤æ–­ï¼Œæ‰€ä»¥åé¢éœ€è¦è¿›è¡Œç‰¹å¾é€‰æ‹©æˆ–è€…è®©æ¨¡å‹è‡ªå·±é€‰å‡ºæ¥é‡è¦çš„ç‰¹å¾ï¼Œç„¶åç»™é‡è¦çš„ç‰¹å¾å¤§çš„æƒé‡ã€‚ç±»ä¼¼äºattention</p><p>ç„¶åå¯ä»¥è¯•è¯•generativeçš„æ–¹æ³•ï¼Œè®©æ¨¡å‹åœ¨è®­ç»ƒä¸€æ®µæ—¶é—´ä¹‹åè‡ªå·±ç”Ÿæˆï¼Œå³è®­ç»ƒåˆ¤æ–­æ¨¡å‹çš„åŸºç¡€ä¸Šå†ç”Ÿæˆä¸€ä¸ªç”Ÿæˆæ¨¡å‹ã€‚ç”Ÿæˆæ¨¡å‹ç”¨GANå»ç”Ÿæˆæ•°æ®ï¼Œç„¶åè®©åˆ¤æ–­æ¨¡å‹å»å­¦ä¹ ã€‚</p><p>æœ€åå¯ä»¥è¯•è¯•ä¸ç¡®å®šæ€§çš„æ–¹æ³•ã€‚</p><h3 id="2-Updates"><a href="#2-Updates" class="headerlink" title="2. Updates"></a>2. Updates</h3><h4 id="2021-12-11ï¼šå®Œæˆäº†åŸºæœ¬æ¡†æ¶"><a href="#2021-12-11ï¼šå®Œæˆäº†åŸºæœ¬æ¡†æ¶" class="headerlink" title="2021-12-11ï¼šå®Œæˆäº†åŸºæœ¬æ¡†æ¶"></a>2021-12-11ï¼šå®Œæˆäº†åŸºæœ¬æ¡†æ¶</h4><ul><li><strong>è¿›å±•</strong>ï¼šå®Œæˆäº†åŸºæœ¬çš„æ¡†æ¶çš„æ­å»ºï¼Œæ˜å¤©å¼€å§‹è®­ç»ƒã€‚å®Œæˆçš„æ¡†æ¶åŒ…æ‹¬è®­ç»ƒä»£ç ï¼Œç½‘ç»œçš„å®šä¹‰ï¼Œdatasetå’Œå¾—åˆ°æäº¤æ–‡ä»¶çš„ä»£ç </li></ul><pre class="line-numbers language-shell"><code class="language-shell">(torch) jack@jack-Alienware-m15-R3:/media/jack/JackCode/project/deeplearning/hw1_1-regression$ tree src/src/â”œâ”€â”€ dataset.pyâ”œâ”€â”€ gen_submission.pyâ”œâ”€â”€ networks.pyâ”œâ”€â”€ pathconfig.pyâ””â”€â”€ train.py<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="2021-12-12-update1ï¼šè®­ç»ƒæ—¶lossä¸ä¸‹é™-cry"><a href="#2021-12-12-update1ï¼šè®­ç»ƒæ—¶lossä¸ä¸‹é™-cry" class="headerlink" title="2021-12-12 update1ï¼šè®­ç»ƒæ—¶lossä¸ä¸‹é™:cry:"></a>2021-12-12 update1ï¼šè®­ç»ƒæ—¶lossä¸ä¸‹é™<span class="github-emoji"><span>ğŸ˜¢</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f622.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span></h4><ul><li><p><strong>é—®é¢˜</strong>ï¼šå¼€å§‹è®­ç»ƒï¼Œä½†æ˜¯è®­ç»ƒçš„æ—¶å€™é‡åˆ°äº†ä¸€äº›é—®é¢˜ï¼Œè®­ç»ƒçš„æ—¶å€™lossä¸€ç›´æ²¡æœ‰ä¸‹é™ï¼Œä¾‹å¦‚ä¸‹é¢è¿™å¼ å›¾<img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211212115234546.png" alt="lossæ²¡æœ‰ä¸‹é™"></p></li><li><p>è§£å†³åŠæ³•ï¼šæœ€åç»è¿‡æ£€æŸ¥ï¼Œæ˜¯batchsizeçš„é—®é¢˜ï¼Œdataloaderçš„å¿˜è®°è®¾ç½®batchsizeå’Œshuffleäº†ï¼Œæ‰€ä»¥å‡ºäº†é—®é¢˜ï¼Œè¿™ä¸ªæ•°æ®é›†é‡Œå•ä¸ªæ ·æœ¬éšæœºæ³¢åŠ¨å¤ªå¤§ï¼Œä¸åƒå›¾åƒæ˜¯æ¯”è¾ƒé€šç”¨çš„ï¼Œéšæœºæ³¢åŠ¨å°ï¼Œå•ä¸ªexampleä¹Ÿèƒ½å­¦åˆ°ä¸œè¥¿ã€‚</p><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211212115505406.png" alt="å‡ºé—®é¢˜çš„ä»£ç "><br>æœ€åä¿®æ”¹æ‰ä¹‹åå°±å¯ä»¥æ­£å¸¸è®­ç»ƒäº†ï¼Œä»¥åä¸€å®šè¦æ³¨æ„å°batchsizeå¸¦æ¥çš„å°æ ·æœ¬æ¢¯åº¦éšæœºæ³¢åŠ¨é—®é¢˜<br><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211212115710477.png" alt="ä¿®æ”¹ä¹‹åçš„ä»£ç "></p><p>æœ€åå¯ä»¥æ­£å¸¸è®­ç»ƒ<img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211212115901900.png" alt="æ­£å¸¸å¼€å§‹è®­ç»ƒ"></p><p>æœ€ååœ¨379ä¸ªepochæ—¶å€™åœä¸‹æ¥äº†ï¼Œæäº¤ä¸€å‘<img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211212120026808.png" alt="æœ€åçš„è®­ç»ƒç»“æœ"></p></li></ul><h4 id="2021-12-12-update2-æäº¤åˆ†æ•°èµ·é£-boom"><a href="#2021-12-12-update2-æäº¤åˆ†æ•°èµ·é£-boom" class="headerlink" title="2021-12-12 update2: æäº¤åˆ†æ•°èµ·é£:boom:"></a>2021-12-12 update2: æäº¤åˆ†æ•°èµ·é£<span class="github-emoji"><span>ğŸ’¥</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f4a5.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span></h4><ul><li><p><strong>é—®é¢˜</strong>ï¼šæ¥ä¸Šä¸€ä¸ªé—®é¢˜ï¼Œå®Œæˆäº†ä¹‹åæäº¤ç»“æœï¼Œåˆ†æ•°å¾ˆçƒ‚</p><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211212140536683.png" alt="åˆ†æ•°å¾ˆä½"></p></li><li><p><strong>è§£å†³åŠæ³•</strong>ï¼šæœ€åç»è¿‡æ£€æŸ¥ï¼Œæ˜¯ç½‘ç»œåœ¨è®­ç»ƒçš„æ—¶å€™ï¼Œå¯¹è®­ç»ƒæ•°æ®çš„featureå’Œlabeléƒ½è¿›è¡Œäº†æ­£åˆ™åŒ–ï¼Œä½¿å…¶æœä»å‡å€¼ä¸º0ï¼Œæ ‡å‡†å·®ä¸º1çš„åˆ†å¸ƒï¼Œè¿™æ ·åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­çš„æ¢¯åº¦çš„åˆ†å¸ƒä¹Ÿä¼šæ›´åŠ å‡åŒ€ã€‚ä½†æ˜¯è¿™æ ·åšçš„é—®é¢˜å°±æ˜¯ç½‘ç»œé¢„æµ‹çš„è¿›è¿‡æ ‡å‡†åŒ–ä¹‹åçš„labelï¼Œæ‰€ä»¥ä½¿ç”¨æµ‹è¯•æ•°æ®ç”Ÿæˆç»“æœçš„æ—¶å€™å¾—åˆ°çš„ä¹Ÿæ˜¯æ ‡å‡†åŒ–ä¹‹åçš„ç»“æœï¼Œéœ€è¦åŠ ä¸Šlabelçš„å‡å€¼å’Œæ ‡å‡†å·®ï¼Œä½†æ˜¯ç”±äºæ˜¯æµ‹è¯•æ•°æ®ï¼Œæ‰€ä»¥æ²¡æœ‰æ ‡å‡†å·®å’Œå‡å€¼ï¼Œè€Œ<strong>æµ‹è¯•æ•°æ®å’Œè®­ç»ƒæ•°æ®ä¸æ˜¯ç‹¬ç«‹åŒåˆ†å¸ƒçš„</strong>ã€‚æ‰€ä»¥ä¸èƒ½ç›´æ¥åŠ ä¸Šæµ‹è¯•æ•°æ®çš„æ ‡å‡†å·®å’Œæ–¹å·®</p><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211212143542126.png" alt="ä¿®æ”¹å‰çš„é”™è¯¯ä»£ç ï¼Œå¯¹labelä¹Ÿåšäº†æ ‡å‡†åŒ–"></p><p>ä¿®æ”¹ä¹‹åä¸ç»™labelåšæ ‡å‡†åŒ–ï¼Œå†è®­ç»ƒä¸€æ¬¡ç„¶åæäº¤</p><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211212151141477.png" alt="ä¿®æ”¹åä¸å¯¹labelåšæ ‡å‡†åŒ–"></p><p>å†è¿›è¡Œä¸€æ¬¡è®­ç»ƒ</p><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211212151509152.png" alt="ä¿®æ”¹åçš„è®­ç»ƒ"></p><p>æœ€åæäº¤çš„ç»“æœï¼Œç›¸æ¯”äºä¸€å¼€å§‹æœ‰äº†å¾ˆå¤§çš„è¿›æ­¥</p><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211212151837238.png" alt="æäº¤ç»“æœ"></p></li></ul><h4 id="2021-12-12-update3-Simple-baseline-triangular-flag-on-post"><a href="#2021-12-12-update3-Simple-baseline-triangular-flag-on-post" class="headerlink" title="2021-12-12 update3:  Simple baseline:triangular_flag_on_post:"></a>2021-12-12 update3:  Simple baseline<span class="github-emoji"><span>ğŸš©</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f6a9.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span></h4><p>å¤§èƒœåˆ©<span class="github-emoji"><span>ğŸ‰</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f389.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span></p><ul><li><p><strong>æ€è·¯</strong>ï¼šå°è¯•äº†ä¸€ä¸‹ä»…ä»…ä½¿ç”¨å‰ä¸¤å¤©çš„ç¡®è¯Šäººæ•°ä½œä¸ºfeatureæ¥è®­ç»ƒï¼Œæœ€åæå‡å·¨å¤§ï¼Œç”±äºæˆ‘åœ¨ä»£ç é‡Œé¢„ç•™äº†dim2useï¼Œæ‰€ä»¥ç›´æ¥åŠ ä¸Šå‰ä¸¤çš„ç¡®è¯Šäººæ•°çš„featureå’Œå·ï¼Œä¸€å…±42ä¸ªdimensionå†æ¥ä¸€æ¬¡</p><p><strong>æ‰€ä»¥å‰é¢çš„çŒœæƒ³ç¡®å®æˆç«‹ï¼Œå³å­˜åœ¨ä¸€äº›å’Œç¡®è¯Šäººæ•°å®Œå…¨æ— å…³çš„ç‰¹å¾ï¼Œè¿™äº›ç‰¹å¾ä¼šæå¤§åœ°å½±å“æ¨¡å‹çš„è¡¨ç°</strong></p><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211212155208705.png" alt="åŠ ä¸Šå‰ä¸¤å¤©çš„ç¡®è¯Šäººæ•°"></p></li><li><p><strong>æ•ˆæœ</strong>ï¼š</p><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211212155232450.png" alt="å·¨å¤§çš„è¿›æ­¥"></p></li></ul><h4 id="2021-12-12-update4-ç‰¹å¾é€‰æ‹©çš„æ€è€ƒ-Medium-Baseline-triangular-flag-on-post"><a href="#2021-12-12-update4-ç‰¹å¾é€‰æ‹©çš„æ€è€ƒ-Medium-Baseline-triangular-flag-on-post" class="headerlink" title="2021-12-12 update4: ç‰¹å¾é€‰æ‹©çš„æ€è€ƒ Medium Baseline :triangular_flag_on_post:"></a>2021-12-12 update4: ç‰¹å¾é€‰æ‹©çš„æ€è€ƒ Medium Baseline <span class="github-emoji"><span>ğŸš©</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f6a9.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span></h4><ul><li><p><strong>æƒ³æ³•</strong>ï¼šå› ä¸ºåœ¨å‰é¢ä½¿ç”¨äº†å·å’Œå‰ä¸¤å¤©ï¼Œå¾—åˆ°çš„åˆ†æ•°éå¸¸çš„é«˜ï¼Œæ‰€ä»¥åˆ©ç”¨äº†ç‰¹å¾é€‰æ‹©çš„æ‰‹æ®µï¼Œè¯•äº†ä¸€ä¸‹ä¸åŒçš„ç‰¹å¾ï¼Œå¾—åˆ°çš„ç»“æœå¦‚ä¸‹</p><ul><li><p><strong>ä½¿ç”¨äº†å·å’Œå‰ä¸¤å¤©</strong></p><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211212163655980.png" alt="ä½¿ç”¨å·å’Œå‰ä¸¤å¤©"></p></li><li><p><strong>ä½¿ç”¨äº†å¾—åˆ†å‰15çš„ç‰¹å¾</strong></p><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211212163737608.png" alt="å¾—åˆ†å‰15çš„ç‰¹å¾"></p></li><li><p><strong>ä½¿ç”¨äº†å¾—åˆ†å¤§äº500çš„ç‰¹å¾</strong></p><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211212163814031.png" alt="å¾—åˆ†å¤§äº500çš„ç‰¹å¾"></p></li><li><p><strong>åªä½¿ç”¨å‰ä¸¤å¤©å¾—ç—…çš„äººæ•°</strong></p><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211212163858827.png" alt="åªä½¿ç”¨å‰ä¸¤å¤©å¾—ç—…çš„äººæ•°"></p></li></ul><p>è€Œç‰¹å¾é€‰æ‹©æ—¶å€™å‰90ä¸ªç‰¹å¾çš„å¾—åˆ†å¦‚ä¸‹ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œå‰ä¸¤ä¸ªç‰¹å¾ï¼ˆå‰ä¸¤å¤©ç¡®è¯Šçš„äººæ•°ï¼‰çš„åˆ†æ•°æ˜¯è¿œè¿œå¤§äºå‰©ä¸‹çš„ç‰¹å¾ï¼Œä¹Ÿå°±éš¾æ€ªè®­ç»ƒå‡ºæ¥æœ€åä¸€ä¸ªçš„å¾—åˆ†æœ€é«˜</p><pre class="line-numbers language-shell"><code class="language-shell">                    Specs          Score76       tested_positive.1  148069.65827858         tested_positive   69603.87259143            hh_cmnty_cli    9235.49209461          hh_cmnty_cli.1    9209.01955879          hh_cmnty_cli.2    9097.37517244          nohh_cmnty_cli    8395.42130062        nohh_cmnty_cli.1    8343.25592780        nohh_cmnty_cli.2    8208.17643541                     cli    6388.90684959                   cli.1    6374.54800077                   cli.2    6250.00870242                     ili    5998.92288060                   ili.1    5937.58857678                   ili.2    5796.94767293      worried_finances.2     833.61319175      worried_finances.1     811.91646057        worried_finances     788.07693188        public_transit.2     686.73653970        public_transit.1     681.56290252          public_transit     678.83478984                  shop.2     561.76405166                  shop.1     553.87672748                    shop     546.5533950                       id     328.68231192    worried_become_ill.2     208.12264718                      MA     205.67260374    worried_become_ill.1     203.47307256      worried_become_ill     199.19546186            spent_time.2     193.92668968            spent_time.1     188.76375150              spent_time     183.14522921                      MS     164.45080730                      OK     160.7761357                       CT     146.60954017                      MD     123.5469725                       CA     122.36156229                      OH      92.60376324                      NV      86.48058110                      ID      85.60427553                 anxious      83.53223222                      MO      80.57186136                      UT      76.09237971               anxious.1      75.0735223                       AZ      72.80367685            restaurant.2      71.04775467            restaurant.1      70.08674323                      NE      69.08267649              restaurant      69.02759335                      TX      68.60934789               anxious.2      64.5877442                       AK      64.39624232                      PA      63.0960936                       CO      47.44609615                      KY      43.15197213                      IA      42.0966008                       FL      39.97677827                      NY      38.26168438                      WA      35.19877531                      OR      30.42481982  travel_outside_state.2      29.42480819                      MI      27.61129464  travel_outside_state.1      27.47727446    travel_outside_state      25.78825114                      KS      18.69999455           felt_isolated      18.34572833                      RI      18.22380073         felt_isolated.1      18.05009891         felt_isolated.2      17.89572034                      SC      15.17410045            wearing_mask      13.10686263          wearing_mask.1      11.66081520                      MN      11.13468587           large_event.2      10.9953231                       AL      10.91595281          wearing_mask.2      10.42354439                      WV       9.40700369           large_event.1       9.13166925                      NJ       8.63782437                      VA       8.32844951             large_event       7.4492279                       GA       7.30044783     work_outside_home.2       4.17440465     work_outside_home.1       3.88715654               depressed       3.83787911                      IL       3.83412347       work_outside_home       3.28351372             depressed.1       2.96797128                      NC       2.8773594                       AR       2.54622390             depressed.2       2.362492Int64Index([76, 58, 43, 61, 79, 44, 62, 80, 41, 59, 77, 42, 60, 78, 93, 75, 57,            88, 70, 52, 84, 66, 48,  0, 92, 18, 74, 56, 86, 68, 50, 21, 30,  7,            17,  5, 29, 24, 10, 53, 22, 36, 71,  3, 85, 67, 23, 49, 35, 89,  2,            32,  6, 15, 13,  8, 27, 38, 31, 82, 19, 64, 46, 14, 55, 33, 73, 91,            34, 45, 63, 20, 87,  1, 81, 39, 69, 25, 37, 51,  9, 83, 65, 54, 11,            47, 72, 28,  4, 90],           dtype='int64')<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul><h4 id="2021-12-12-update5-å¤§è¿›æ­¥-tada"><a href="#2021-12-12-update5-å¤§è¿›æ­¥-tada" class="headerlink" title="2021-12-12 update5: å¤§è¿›æ­¥:tada:"></a>2021-12-12 update5: å¤§è¿›æ­¥<span class="github-emoji"><span>ğŸ‰</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f389.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span></h4><ul><li><p><strong>æ€è·¯</strong>ï¼šå› ä¸ºå‰é¢å®éªŒäº†ä¸€ä¸‹ä½¿ç”¨ä¸åŒçš„ç‰¹å¾ï¼Œå‘ç°åªæœ‰å‰ä¸¤ä¸ªç‰¹å¾ï¼Œæ‰€ä»¥æˆ‘æ„Ÿè§‰ç‰¹å¾é€‰æ‹©å¯èƒ½èµ°åˆ°äº†å¤´ï¼Œéœ€è¦æ–°çš„æ€è·¯æ¥è¿›ä¸€æ­¥æå‡æ¨¡å‹çš„è¡¨ç°ã€‚å› æ­¤ä»æ¨¡å‹æœ¬èº«ä¸‹æ‰‹ï¼Œæ›´æ¢äº†ç½‘ç»œæ¨¡å‹ï¼Œä»åŠ©æ•™çš„baselineæ¢æˆäº†æ®‹å·®æ¨¡å‹ï¼ŒåŒæ ·è¿˜æ˜¯åªæœ‰ä¸¤ä¸ªç‰¹å¾</p><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211212170623668.png" alt="ç½‘ç»œæ¨¡å‹"></p></li><li><p><strong>æ•ˆæœ</strong>ï¼šæœ€åçš„æ•ˆæœçš„æå‡è¿˜æ˜¯å·¨å¤§çš„</p><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211212170744439.png" alt="image-20211212170744439"></p></li></ul><h4 id="2021-12-12-update6-å…³äºä¼˜åŒ–å™¨"><a href="#2021-12-12-update6-å…³äºä¼˜åŒ–å™¨" class="headerlink" title="2021-12-12 update6: å…³äºä¼˜åŒ–å™¨"></a>2021-12-12 update6: å…³äºä¼˜åŒ–å™¨</h4><ul><li><p><strong>æ€è·¯</strong>ï¼šå‰é¢æ”¹äº†ä¸€ä¸‹ç½‘ç»œç»“æ„ï¼Œä½¿å¾—ç²¾åº¦æœ‰äº†ä¸é”™çš„æå‡ã€‚æˆ‘åœ¨ç‰¹å¾é€‰æ‹©åé¢åˆæƒ³åˆ°äº†ä¸€ä¸ªæ€è·¯ï¼Œå°±æ˜¯æ¢ä¸€ä¸ªä¼˜åŒ–å™¨ï¼Œæ‰€ä»¥åœ¨å®éªŒå®Œç½‘ç»œç»“æ„ä¹‹åæˆ‘åˆå®éªŒäº†ä¸€ä¸‹ä¼˜åŒ–å™¨ï¼Œçœ‹çœ‹ä¼˜åŒ–å™¨ä¼šä¸ä¼šå¯¹è®­ç»ƒåˆå¸®åŠ©ï¼Œæ‰€ä»¥æŠŠSGDæ¢æˆäº†AdamWï¼ŒAdamWæ¯”Adamå°‘äº†å¯¹biasçš„æ±‚å¯¼ï¼Œæ‰€ä»¥æ–¹å‘é¿å…å‡ºé”™ã€‚</p><p>æ¢ä¼˜åŒ–å™¨å…¶å®æˆ‘ä¹Ÿæ˜¯å®éªŒäº†ä¸å°‘æ¬¡ï¼Œå› ä¸ºä½¿ç”¨SGDçš„æ—¶å€™ï¼Œä¸ç®¡è¶…å‚æ•°æ€ä¹ˆå˜ï¼Œæ€»ä¼šåœ¨51ä¸ªepochçš„æ—¶å€™å‡ºç°ä¸€æ¬¡æœ€ä¼˜å€¼ã€‚è™½ç„¶æœ‰çš„è¶…å‚æ•°ç»è¿‡æ¯”è¾ƒé•¿çš„epochä¹‹åä¼šæœ‰æ–°çš„æœ€ä¼˜å€¼ï¼Œä½†æ˜¯51è¿™ä¸ªepochå¸¸å¸¸ä¼šå‡ºç°ï¼Œä¸ç®¡æˆ‘æ€ä¹ˆå˜è¶…å‚æ•°ã€‚</p><p>æ‰€ä»¥æˆ‘æ€€ç–‘51ä¸ªepochçš„æ—¶å€™å¯¹äºSGDä¼˜åŒ–å™¨ï¼Œå·²ç»åˆ°äº†ä¸€ä¸ªæ¯”è¾ƒwideçš„è°·åº•ï¼Œè¿™ä¸ªæ—¶å€™å¾ˆéš¾è·³å‡ºå»ï¼Œæ‰€ä»¥æœ‰çš„æ—¶å€™ä¼šç›´æ¥åœ¨è¿™é‡Œåœä¸‹æ¥ã€‚</p><p>ä½œä¸ºå¼¥è¡¥æˆ‘æ¢äº†ä¸€ä¸ªä¼˜åŒ–å™¨ï¼Œæ¢æˆäº†AdamWï¼Œå› ä¸ºAdamWè·³å‡ºsaddle pointçš„èƒ½åŠ›è¦å¼ºä¸å°‘</p><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211212173038313.png" alt="ä¸€äº›è®­ç»ƒè½®æ¬¡"></p></li><li><p><strong>ç»“æœ</strong>ï¼šæ›´æ¢ä¼˜åŒ–å™¨ä¹‹åï¼Œè®­ç»ƒè½®æ¬¡è¦é•¿å¾ˆå¤šï¼Œè€Œä¸”æœ€åˆçš„åå¤šä¸ªepochä¼šæœ‰éœ‡è¡ï¼Œè¿˜åœ¨loss ç©ºé—´çš„é«˜å¤„</p><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/train_log.png" alt="AdamWçš„è®­ç»ƒè¿‡ç¨‹"></p><p>ä¸Šé¢çš„å›¾å…¶å®çœ‹ä¸å¤ªå‡ºæ¥ï¼Œå› ä¸ºæ¨ªè½´30000å¤šä¸ªstepï¼Œä½†æ˜¯SGDçš„è®­ç»ƒå›¾åœ¨å¼€å§‹éƒ¨åˆ†æ˜¯ç›´çº¿ä¸‹å†²çš„</p><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/train_log1.png" alt="train_log1"></p><p>æœ€åçš„ç»“æœæ˜¯æˆåŠŸå†²è¿›äº†1åˆ†ä»¥å†…çš„è¯¯å·®</p><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211212173834843.png" alt="1åˆ†ä»¥å†…"></p></li></ul><h4 id="2012-12-12-update7-å…³äºæ­£åˆ™åŒ–"><a href="#2012-12-12-update7-å…³äºæ­£åˆ™åŒ–" class="headerlink" title="2012-12-12 update7: å…³äºæ­£åˆ™åŒ–"></a>2012-12-12 update7: å…³äºæ­£åˆ™åŒ–</h4><ul><li><p><strong>æ€è·¯</strong>ï¼šå‰é¢åœ¨æƒ³çš„æ—¶å€™å…¶å®è¿˜æƒ³åˆ°äº†ç¬¬ä¸‰ä¸ªæ€è·¯ï¼Œå°±æ˜¯åœ¨ç½‘ç»œä¸­åŠ å…¥æ­£åˆ™åŒ–æ–¹æ³•ï¼Œä¸€ä¸ªæ˜¯åŠ å…¥dropoutï¼Œä¸€ä¸ªæ˜¯åŠ å…¥batch normalizationï¼Œå› ä¸ºç›®å‰è¿™ä¸¤ä¸ªæ˜¯å…¬è®¤çš„ä¸é”™çš„çš„æ­£åˆ™åŒ–æ–¹æ³•ã€‚è€Œä½¿ç”¨æ­£åˆ™åŒ–æ–¹æ³•èƒ½å¤Ÿå¸®åŠ©åŠ é€Ÿè®­ç»ƒã€æé«˜æ”¶æ•›ç²¾åº¦ã€‚ç„¶è€Œåœ¨è®­ç»ƒæ—¶å€™å´å‘ç°ä¸å¤ªå¯¹åŠ²ã€‚</p><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211212175933758.png" alt="ä¸å¤ªå¯¹åŠ²çš„æ­£åˆ™åŒ–"></p><p>å¯ä»¥çœ‹åˆ°ï¼Œä½¿ç”¨batch norm å’Œ dropoutï¼Œæ”¶æ•›é€Ÿåº¦ä¸é™åå‡ã€‚è¿™ä¸ªå’Œå¤§å®¶çš„å…¬è®¤æœ‰æ‰€å·®åˆ«ï¼Œæˆ‘ç™¾æ€ä¸å¾—å…¶è§£<span class="github-emoji"><span>ğŸ˜•</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f615.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span></p><p>æœ€åæ€€ç–‘æ˜¯AdamWä¼˜åŒ–å™¨çš„é—®é¢˜ã€‚å› ä¸ºAdamWä¼˜åŒ–å™¨ä¸­æœ‰é™åˆ¶æ¢¯åº¦çš„é¡¹ï¼Œè€Œdropoutä¼šmaskæ‰ä¸€äº›ç¥ç»å…ƒï¼Œå¯¼è‡´æ¢¯åº¦åœ¨è¿™é‡Œä¸º0ï¼Œè€Œbatch normåˆ™æ˜¯ç‚¸å¹³æ¢¯åº¦ç©ºé—´ã€‚æ‰€ä»¥æ€€ç–‘é—®é¢˜å‡ºåœ¨è¿™é‡Œï¼Œä¼˜åŒ–å™¨æ¢å›SGDï¼Œå¥½å®¶ä¼™ï¼Œè¿™ä¸ªé€Ÿåº¦ï¼Œæ¯”çº¯SGDå¿«å¤šäº†ï¼ˆä¸‹é¢çš„å›¾ç¬¬ä¸€ä¸ªæ—¥å¿—å†™é”™äº†ï¼Œåº”è¯¥æ˜¯batch normï¼‰</p><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211212180324925.png" alt="image-20211212180324925"></p></li></ul><h4 id="2021-12-13-update1-Strong-Networkï¼ŒMore-Complex-data"><a href="#2021-12-13-update1-Strong-Networkï¼ŒMore-Complex-data" class="headerlink" title="2021-12-13 update1: Strong Networkï¼ŒMore Complex data"></a>2021-12-13 update1: Strong Networkï¼ŒMore Complex data</h4><ul><li><p><strong>é—®é¢˜</strong>ï¼šæ˜¨å¤©åœ¨æœ€åä½¿ç”¨adamä¼˜åŒ–å™¨å’Œresidualæ¨¡å—çš„é…åˆï¼Œè®­ç»ƒé˜¶æ®µä½¿ç”¨ç‰¹å¾é€‰æ‹©é€‰å‡ºæ¥çš„å‰ä¸¤å¤©çš„ç¡®è¯Šäººæ•°ï¼Œä¸€å…±2ä¸ªdimensionçš„featureä½œä¸ºè¾“å…¥è¿›è¡Œè®­ç»ƒï¼Œæœ€åå¾—åˆ°çš„ç²¾åº¦0.98å·¦å³ã€‚æ˜¨å¤©çš„ç‚¼ä¸¹å°±åˆ°æ­¤ä¸ºæ­¢äº†ã€‚æ˜¨å¤©æ™šä¸Šåœ¨å¤ç›˜çš„æ—¶å€™æƒ³åˆ°ï¼Œè€å¸ˆä¸Šè¯¾è®²è¿‡çš„æ¨¡å‹è®­ç»ƒæ”»ç•¥é‡Œè¯´çš„å†…å®¹ã€‚</p><ol><li>è€Œåœ¨å¤ç›˜çš„æ—¶å€™æƒ³èµ·æ¥ï¼Œæ˜¨å¤©çš„ç‚¼ä¸¹è¿‡ç¨‹å…¶å®æå‡æœ€å¤§çš„æœ‰ä¸¤æ®µï¼Œç¬¬ä¸€æ®µå°±æ˜¯åœ¨ä¸€å¼€å§‹ä½¿ç”¨åŠ©æ•™çš„baselineçš„æ—¶å€™ï¼Œä½¿ç”¨ç‰¹å¾æŠ½å–é€‰å–äº†å‰ä¸¤å¤©çš„ç‰¹å¾ï¼Œlossåœ¨training dataä¸Šçš„æŸå¤±å°±æ”¶æ•›åˆ°1.xå·¦å³äº†ã€‚å¯æ˜¯ä½¿ç”¨baselineåœ¨è¿™ä¹‹åä¸ç®¡æ€ä¹ˆæ ·éƒ½å§‹ç»ˆæ— æ³•è¿›å…¥åˆ°0.xçš„å¤§å…³ã€‚è€Œå…³äºOptimizationä¸­ä¹Ÿå®éªŒè¿‡äº†æ­£åˆ™åŒ–ã€è°ƒå‚ã€æ¢ä¼˜åŒ–å™¨ç­‰ç­‰æ‰‹æ®µã€‚ä½†æ˜¯æ¨¡å‹çš„è¡¨ç°è¿˜æ˜¯æ²¡æœ‰ä¸‹é™ã€‚</li><li>ç¬¬äºŒä¸ªé˜¶æ®µå°±æ˜¯æ¢äº†residualçš„æ¨¡å‹ï¼Œæ€§èƒ½ç«‹é©¬åˆæœ‰äº†æå‡ã€‚ä½†æ˜¯åŒæ ·çš„ï¼Œresidualçš„æ¨¡å‹å„ç§optimizationçš„æ–¹æ³•éƒ½å·²ç»è¯•è¿‡äº†ï¼Œæœ€åè¿˜æ˜¯å¡åœ¨äº†0.98å·¦å³ã€‚</li></ol><p>æœ€åæƒ³æƒ³è€å¸ˆè®²çš„è¯¾ï¼Œçªç„¶æ˜ç™½ï¼Œåœ¨ä¸€å¼€å§‹çš„æ—¶å€™ï¼Œmodelçš„èƒ½åŠ›ä¸å¤Ÿå¼ºï¼Œæ‰€ä»¥æ²¡æœ‰åŠæ³•å­¦å¥½14ä¸ªé‡è¦ç‰¹å¾ã€‚å› æ­¤é€‰æ‹©å‰ä¸¤å¤©çš„ç¡®è¯Šäººæ•°ä½œä¸ºfeatureï¼Œæ€§èƒ½æœ‰äº†å¾ˆå¤§çš„æå‡ã€‚è¿™ä¸ªæ—¶å€™çš„é—®é¢˜å¯èƒ½æ˜¯baseline model çš„model biasäº†ï¼Œå³æ¨¡å‹çš„èƒ½åŠ›ä¸å¤Ÿå¼ºã€‚åæ¥æ­ªæ‰“æ­£ç€æ¢äº†ä¸€ä¸ªæ¨¡å‹ï¼ŒåŒæ ·çš„æ•°æ®å’Œå‚æ•°ä¸‹è®­ç»ƒï¼Œæ€§èƒ½ç«‹é©¬æœ‰äº†æå‡ï¼Œæ‰€ä»¥ç¡®ä¿¡æ˜¯baselineæ¨¡å‹çš„é—®é¢˜ã€‚</p><p>å¯æ˜¯åæ¥ä¸ç®¡æ€ä¹ˆè°ƒï¼Œresidualçš„æ¨¡å‹æ€§èƒ½ä¹Ÿä¸Šä¸å»äº†ã€‚åæ¥å…¶å®æˆ‘ä¹Ÿè¯•äº†ä¸€ä¸‹wideçš„æ¨¡å‹ï¼Œwide + residualçš„æ¨¡å‹ï¼Œæœ€åæ€§èƒ½éƒ½ä¸æ˜¯å¾ˆå¥½ã€‚è¿™ä¸ªæ—¶å€™æˆ‘çªç„¶æƒ³èµ·æ¥ï¼Œå› ä¸ºbaselineé‡Œé¢æ˜¯ä¸¤ä¸ªfeatureè¡¨ç°æœ€å¥½ï¼Œæ‰€ä»¥æˆ‘å°±ç›´æ¥ç”¨äº†ä¸¤ä¸ªdimensionçš„featureæ¥train residualçš„ä¸€ç³»åˆ—modelã€‚åæ¥æ¢modelå•çº¯çš„åªæ˜¯å¸Œæœ›èƒ½å¤Ÿå¾—åˆ°èƒ½åŠ›æ›´å¼ºçš„modelã€‚</p><p>ä½†æ˜¯é—®é¢˜å´åœ¨äºï¼Œèƒ½åŠ›æ›´å¼ºçš„modelç¡®å®èƒ½å¤Ÿå¾—åˆ°æ›´å¥½çš„performanceï¼Œä½†æ˜¯æˆ‘å¹¶ä¸çŸ¥é“residualæ˜¯å¦è¾¾åˆ°äº†ä»–çš„ä¸Šé™ï¼Œå³æœ‰å¯èƒ½æ˜¯æˆ‘åªç”¨äº†å‰ä¸¤å¤©çš„ç¡®è¯Šäººæ•°ï¼Œè¿™æ ·çš„training dataå¯¹residualå¤ªå¼±äº†ï¼Œä»–å®Œå…¨å­¦æœ‰ä½™åŠ›ã€‚</p><p>åˆšå¥½æˆ‘ä¹Ÿæ²¡æœ‰åƒbaselineä¸€æ ·è¿›è¡Œç‰¹å¾é€‰æ‹©çš„æµ‹è¯•ï¼Œæ‰€ä»¥æˆ‘å…¶å®å¹¶ä¸çŸ¥é“residualçš„modelæ˜¯å¦è¾¾åˆ°ä»–çš„ä¸Šé™äº†ã€‚æ‰€ä»¥ä»Šå¤©æˆ‘è¯•ç€ä½¿ç”¨äº†æ›´å¤šçš„training dataï¼Œå³ä½¿ç”¨äº†æ‰€æœ‰å¤§äº5000åˆ†çš„æ•°æ®ï¼Œä¸€å…±14ä¸ªç»´åº¦</p><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211213003527934.png" alt="ç”¨æ›´å¤šçš„æ•°æ®æ¥è®­ç»ƒresidual model"></p></li><li><p><strong>ç»“æœ</strong>ï¼šæœ€åç»è¿‡è®­ç»ƒä¹‹åæäº¤ï¼Œå¤§è¿›æ­¥<span class="github-emoji"><span>ğŸ‰</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f389.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span></p><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211213003658575.png" alt="image-20211213003658575"></p></li></ul><h4 id="2021-12-13-update2-temp-final"><a href="#2021-12-13-update2-temp-final" class="headerlink" title="2021-12-13 update2: temp final"></a>2021-12-13 update2: temp final</h4><p>æåˆ°ç°åœ¨ï¼Œåšäº†ä¸€ä¸‹ï¼Œç°åœ¨æœ€ä¼˜çš„æˆç»©æ˜¯ä¸‹é¢çš„ï¼ŒåŸºæœ¬ä¸Šå°±æ˜¯æ®‹å·®æ¨¡å—çš„æ•°é‡é—®é¢˜ï¼Œå…³äºä¼ªæ ‡ç­¾å…¶å®æˆ‘æ„Ÿè§‰å¦‚æœç”¨testçš„dataæ¥åšçš„è¯ï¼Œå°±ä¼šæœ‰è¿‡æ‹Ÿåˆtestæ•°æ®çš„å«Œç–‘ã€‚æ‰€ä»¥ç›®å‰æƒ³çš„æ˜¯ç­‰ç”¨generativeçš„æ–¹æ³•æ¥åšï¼Œç›®å‰æš‚æ—¶å°±å…ˆåˆ°è¿™é‡Œ</p><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211213015919490.png" alt="ç›®å‰çš„æœ€ä¼˜æˆç»©"></p><h2 id="4-My-Codes"><a href="#4-My-Codes" class="headerlink" title="4. My Codes"></a>4. My Codes</h2><p>ä¸‹é¢æ˜¯æˆ‘çš„ä»£ç </p><h3 id="1-ä»£ç ç»“æ„"><a href="#1-ä»£ç ç»“æ„" class="headerlink" title="1. ä»£ç ç»“æ„"></a>1. ä»£ç ç»“æ„</h3><p>æ•´ä¸ªä»£ç çš„ç»“æ„å¦‚ä¸‹</p><pre class="line-numbers language-shell"><code class="language-shell">(torch) jack@jack-Alienware-m15-R3:/media/jack/JackCode/project/deeplearning/hw1_1-regression$ tree -d -L 2.â”œâ”€â”€ checkpointâ”‚&nbsp;&nbsp; â”œâ”€â”€ Baselineâ”‚&nbsp;&nbsp; â”œâ”€â”€ DeeperNetâ”‚&nbsp;&nbsp; â”œâ”€â”€ DeeperNormalizedNetâ”‚&nbsp;&nbsp; â”œâ”€â”€ OtherNetâ”‚&nbsp;&nbsp; â””â”€â”€ WideNetâ”œâ”€â”€ dataâ”œâ”€â”€ logâ”‚&nbsp;&nbsp; â”œâ”€â”€ Baselineâ”‚&nbsp;&nbsp; â”œâ”€â”€ DeeperNetâ”‚&nbsp;&nbsp; â”œâ”€â”€ DeeperNormalizedNetâ”‚&nbsp;&nbsp; â”œâ”€â”€ OtherNetâ”‚&nbsp;&nbsp; â””â”€â”€ WideNetâ”œâ”€â”€ srcâ”‚&nbsp;&nbsp; â”œâ”€â”€ configâ”‚&nbsp;&nbsp; â””â”€â”€ __pycache__â””â”€â”€ submission    â”œâ”€â”€ Baseline    â”œâ”€â”€ DeeperNet    â”œâ”€â”€ DeeperNormalizedNet    â”œâ”€â”€ OtherNet    â””â”€â”€ WideNet22 directories<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å…¶ä¸­:</p><ul><li><p>srcé‡Œéƒ½æ˜¯æºä»£ç </p></li><li><p>checkpointã€logå’Œsubmissionéƒ½å¦‚å…¶å</p></li><li><p>æ¯æ¬¡è¿›è¡Œè®­ç»ƒçš„æ—¶å€™ï¼Œéƒ½ä¼šæ ¹æ®æ¨¡å‹ï¼ˆç½‘ç»œï¼‰ååˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œåœ¨é‡Œé¢æ”¾å¯¹åº”çš„è®­ç»ƒæ—¥å¿—ã€æäº¤ç»“æœã€å‚æ•°æ–‡ä»¶ç­‰ç­‰ã€‚ä»¥logä¸ºä¾‹ï¼Œæ¯æ¬¡å¾—åˆ°çš„ç»“æœéƒ½æ˜¯æ ¹æ®æ—¥æœŸå’Œæ—¶é—´åˆ›å»ºçš„æ–‡ä»¶å¤¹ã€‚åªæœ‰æ­£ç¡®è®­ç»ƒç»“æŸæ‰ä¼šä¸‰ä¸ªæ–‡ä»¶ï¼Œåˆ†åˆ«ä¸ºè®­ç»ƒæ‘˜è¦ã€è®­ç»ƒå›¾åƒä»¥åŠè®­ç»ƒçš„è¿‡ç¨‹ä¸­çš„lossã€‚</p><pre class="line-numbers language-shell"><code class="language-shell">(torch) jack@jack-Alienware-m15-R3:/media/jack/JackCode/project/deeplearning/hw1_1-regression$ tree log/DeeperNet/log/DeeperNet/â”œâ”€â”€ 2021-12-12 16_52_47â”œâ”€â”€ 2021-12-12 16_53_13â”œâ”€â”€ 2021-12-12 16_53_38â”œâ”€â”€ 2021-12-12 16_54_21â”œâ”€â”€ 2021-12-12 16_55_03â”‚&nbsp;&nbsp; â””â”€â”€ message.txtâ”œâ”€â”€ 2021-12-12 16_56_25â”‚&nbsp;&nbsp; â””â”€â”€ message.txtâ”œâ”€â”€ 2021-12-12 16_56_50â”‚&nbsp;&nbsp; â”œâ”€â”€ message.txtâ”‚&nbsp;&nbsp; â”œâ”€â”€ train_log1.pngâ”‚&nbsp;&nbsp; â””â”€â”€ train_val.loss.pklâ”œâ”€â”€ 2021-12-12 17_12_44â”œâ”€â”€ 2021-12-12 17_12_57â”‚&nbsp;&nbsp; â”œâ”€â”€ message.txtâ”‚&nbsp;&nbsp; â”œâ”€â”€ train_log.pngâ”‚&nbsp;&nbsp; â””â”€â”€ train_val.loss.pklâ”œâ”€â”€ 2021-12-12 17_16_00â”‚&nbsp;&nbsp; â”œâ”€â”€ message.txtâ”‚&nbsp;&nbsp; â”œâ”€â”€ train_log.pngâ”‚&nbsp;&nbsp; â””â”€â”€ train_val.loss.pklâ”œâ”€â”€ 2021-12-12 17_16_56â”‚&nbsp;&nbsp; â”œâ”€â”€ message.txtâ”‚&nbsp;&nbsp; â”œâ”€â”€ train_log.pngâ”‚&nbsp;&nbsp; â””â”€â”€ train_val.loss.pklâ”œâ”€â”€ 2021-12-12 17_17_49â”‚&nbsp;&nbsp; â”œâ”€â”€ message.txtâ”‚&nbsp;&nbsp; â”œâ”€â”€ train_log.pngâ”‚&nbsp;&nbsp; â””â”€â”€ train_val.loss.pklâ”œâ”€â”€ 2021-12-12 17_20_12â”œâ”€â”€ 2021-12-12 17_20_34â”‚&nbsp;&nbsp; â”œâ”€â”€ message.txtâ”‚&nbsp;&nbsp; â”œâ”€â”€ train_log.pngâ”‚&nbsp;&nbsp; â””â”€â”€ train_val.loss.pklâ”œâ”€â”€ 2021-12-12 17_41_30â”‚&nbsp;&nbsp; â”œâ”€â”€ message.txtâ”‚&nbsp;&nbsp; â”œâ”€â”€ train_log.pngâ”‚&nbsp;&nbsp; â””â”€â”€ train_val.loss.pklâ”œâ”€â”€ 2021-12-12 18_17_42â”‚&nbsp;&nbsp; â”œâ”€â”€ message.txtâ”‚&nbsp;&nbsp; â”œâ”€â”€ train_log.pngâ”‚&nbsp;&nbsp; â””â”€â”€ train_val.loss.pklâ”œâ”€â”€ 2021-12-12 18_21_58â”œâ”€â”€ 2021-12-12 18_22_24â”‚&nbsp;&nbsp; â”œâ”€â”€ message.txtâ”‚&nbsp;&nbsp; â”œâ”€â”€ train_log.pngâ”‚&nbsp;&nbsp; â””â”€â”€ train_val.loss.pklâ”œâ”€â”€ 2021-12-12 18_28_27â”‚&nbsp;&nbsp; â”œâ”€â”€ message.txtâ”‚&nbsp;&nbsp; â”œâ”€â”€ train_log.pngâ”‚&nbsp;&nbsp; â””â”€â”€ train_val.loss.pklâ”œâ”€â”€ 2021-12-12 19_17_44â”‚&nbsp;&nbsp; â””â”€â”€ message.txtâ”œâ”€â”€ 2021-12-12 19_18_15â”‚&nbsp;&nbsp; â””â”€â”€ message.txtâ”œâ”€â”€ 2021-12-12 19_18_42â”‚&nbsp;&nbsp; â””â”€â”€ message.txtâ”œâ”€â”€ 2021-12-12 19_19_12â”‚&nbsp;&nbsp; â”œâ”€â”€ message.txtâ”‚&nbsp;&nbsp; â”œâ”€â”€ train_log.pngâ”‚&nbsp;&nbsp; â””â”€â”€ train_val.loss.pklâ”œâ”€â”€ 2021-12-12 19_20_16â”‚&nbsp;&nbsp; â”œâ”€â”€ message.txtâ”‚&nbsp;&nbsp; â”œâ”€â”€ train_log.pngâ”‚&nbsp;&nbsp; â””â”€â”€ train_val.loss.pklâ”œâ”€â”€ 2021-12-12 19_25_46â”‚&nbsp;&nbsp; â”œâ”€â”€ message.txtâ”‚&nbsp;&nbsp; â”œâ”€â”€ train_log.pngâ”‚&nbsp;&nbsp; â””â”€â”€ train_val.loss.pklâ”œâ”€â”€ 2021-12-12 19_27_36â”‚&nbsp;&nbsp; â””â”€â”€ message.txtâ”œâ”€â”€ 2021-12-12 19_28_20â”‚&nbsp;&nbsp; â”œâ”€â”€ message.txtâ”‚&nbsp;&nbsp; â”œâ”€â”€ train_log.pngâ”‚&nbsp;&nbsp; â””â”€â”€ train_val.loss.pklâ”œâ”€â”€ 2021-12-12 19_33_37â”‚&nbsp;&nbsp; â”œâ”€â”€ message.txtâ”‚&nbsp;&nbsp; â”œâ”€â”€ train_log.pngâ”‚&nbsp;&nbsp; â””â”€â”€ train_val.loss.pklâ”œâ”€â”€ 2021-12-12 19_37_51â”‚&nbsp;&nbsp; â”œâ”€â”€ message.txtâ”‚&nbsp;&nbsp; â”œâ”€â”€ train_log.pngâ”‚&nbsp;&nbsp; â””â”€â”€ train_val.loss.pklâ”œâ”€â”€ 2021-12-12 19_42_24â”‚&nbsp;&nbsp; â”œâ”€â”€ message.txtâ”‚&nbsp;&nbsp; â”œâ”€â”€ train_log.pngâ”‚&nbsp;&nbsp; â””â”€â”€ train_val.loss.pklâ”œâ”€â”€ 2021-12-12 19_48_44â”‚&nbsp;&nbsp; â””â”€â”€ message.txtâ”œâ”€â”€ 2021-12-12 19_48_59â”‚&nbsp;&nbsp; â”œâ”€â”€ message.txtâ”‚&nbsp;&nbsp; â”œâ”€â”€ train_log.pngâ”‚&nbsp;&nbsp; â””â”€â”€ train_val.loss.pklâ”œâ”€â”€ 2021-12-12 19_52_28â”‚&nbsp;&nbsp; â”œâ”€â”€ message.txtâ”‚&nbsp;&nbsp; â”œâ”€â”€ train_log.pngâ”‚&nbsp;&nbsp; â””â”€â”€ train_val.loss.pklâ”œâ”€â”€ 2021-12-12 19_56_30â”‚&nbsp;&nbsp; â”œâ”€â”€ message.txtâ”‚&nbsp;&nbsp; â”œâ”€â”€ train_log.pngâ”‚&nbsp;&nbsp; â””â”€â”€ train_val.loss.pklâ”œâ”€â”€ 2021-12-12 20_05_07â”œâ”€â”€ 2021-12-12 20_05_46â”‚&nbsp;&nbsp; â”œâ”€â”€ message.txtâ”‚&nbsp;&nbsp; â”œâ”€â”€ train_log.pngâ”‚&nbsp;&nbsp; â””â”€â”€ train_val.loss.pklâ”œâ”€â”€ 2021-12-12 20_10_02â”‚&nbsp;&nbsp; â”œâ”€â”€ message.txtâ”‚&nbsp;&nbsp; â”œâ”€â”€ train_log.pngâ”‚&nbsp;&nbsp; â””â”€â”€ train_val.loss.pklâ”œâ”€â”€ 2021-12-12 20_12_20â”‚&nbsp;&nbsp; â””â”€â”€ message.txtâ”œâ”€â”€ 2021-12-12 20_13_33â”‚&nbsp;&nbsp; â”œâ”€â”€ message.txtâ”‚&nbsp;&nbsp; â”œâ”€â”€ train_log.pngâ”‚&nbsp;&nbsp; â””â”€â”€ train_val.loss.pklâ”œâ”€â”€ 2021-12-12 20_16_43â”‚&nbsp;&nbsp; â”œâ”€â”€ message.txtâ”‚&nbsp;&nbsp; â”œâ”€â”€ train_log.pngâ”‚&nbsp;&nbsp; â””â”€â”€ train_val.loss.pklâ”œâ”€â”€ 2021-12-12 20_21_37â”‚&nbsp;&nbsp; â”œâ”€â”€ message.txtâ”‚&nbsp;&nbsp; â”œâ”€â”€ train_log.pngâ”‚&nbsp;&nbsp; â””â”€â”€ train_val.loss.pklâ”œâ”€â”€ 2021-12-13 00_46_42â”‚&nbsp;&nbsp; â”œâ”€â”€ message.txtâ”‚&nbsp;&nbsp; â”œâ”€â”€ train_log.pngâ”‚&nbsp;&nbsp; â””â”€â”€ train_val.loss.pklâ”œâ”€â”€ 2021-12-13 00_59_08â”‚&nbsp;&nbsp; â”œâ”€â”€ message.txtâ”‚&nbsp;&nbsp; â”œâ”€â”€ train_log.pngâ”‚&nbsp;&nbsp; â””â”€â”€ train_val.loss.pklâ”œâ”€â”€ 2021-12-13 01_34_47â”‚&nbsp;&nbsp; â”œâ”€â”€ message.txtâ”‚&nbsp;&nbsp; â”œâ”€â”€ train_log.pngâ”‚&nbsp;&nbsp; â””â”€â”€ train_val.loss.pklâ”œâ”€â”€ 2021-12-13 01_39_11â”‚&nbsp;&nbsp; â”œâ”€â”€ message.txtâ”‚&nbsp;&nbsp; â”œâ”€â”€ train_log.pngâ”‚&nbsp;&nbsp; â””â”€â”€ train_val.loss.pklâ”œâ”€â”€ 2021-12-13 01_48_12â”‚&nbsp;&nbsp; â”œâ”€â”€ message.txtâ”‚&nbsp;&nbsp; â”œâ”€â”€ train_log.pngâ”‚&nbsp;&nbsp; â””â”€â”€ train_val.loss.pklâ”œâ”€â”€ 2021-12-13 01_51_22â”‚&nbsp;&nbsp; â”œâ”€â”€ message.txtâ”‚&nbsp;&nbsp; â”œâ”€â”€ train_log.pngâ”‚&nbsp;&nbsp; â””â”€â”€ train_val.loss.pklâ””â”€â”€ 2021-12-13 01_55_10    â”œâ”€â”€ message.txt    â”œâ”€â”€ train_log.png    â””â”€â”€ train_val.loss.pkl48 directories, 104 files<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>ç›´æ¥æäº¤submissionä¸­ç”Ÿæˆçš„æ–‡ä»¶å³å¯</p></li></ul><h3 id="2-srcä¸­æ–‡ä»¶ä½œç”¨"><a href="#2-srcä¸­æ–‡ä»¶ä½œç”¨" class="headerlink" title="2. srcä¸­æ–‡ä»¶ä½œç”¨"></a>2. srcä¸­æ–‡ä»¶ä½œç”¨</h3><p>srcä¸­æœ‰è¿™äº›æ–‡ä»¶</p><pre class="line-numbers language-shell"><code class="language-shell">(torch) jack@jack-Alienware-m15-R3:/media/jack/JackCode/project/deeplearning/hw1_1-regression$ tree src/ -L 1src/â”œâ”€â”€ configâ”œâ”€â”€ dataset.pyâ”œâ”€â”€ feature_selection.pyâ”œâ”€â”€ gen_submission.pyâ”œâ”€â”€ networks.pyâ”œâ”€â”€ pathconfig.pyâ”œâ”€â”€ __pycache__â””â”€â”€ train.py2 directories, 6 files<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å…¶ä¸­ï¼š</p><ul><li>trainæ˜¯è®­ç»ƒä»£ç </li><li>gen_submissionæ˜¯ç”Ÿæˆç»“æœçš„ä»£ç </li><li>networksæ˜¯æ‰€æœ‰çš„ç½‘ç»œçš„ä»£ç </li><li>feature_selection æ˜¯åšç‰¹å¾å·¥ç¨‹çš„æ—¶å€™ä»£ç </li></ul><p>å…·ä½“çš„ä»£ç åœ¨ä¸‹é¢ç»™å‡ºæ¥</p><h3 id="3-dataä¸­çš„æ•°æ®"><a href="#3-dataä¸­çš„æ•°æ®" class="headerlink" title="3. dataä¸­çš„æ•°æ®"></a>3. dataä¸­çš„æ•°æ®</h3><p>dataä¸­éœ€è¦æŠŠè®­ç»ƒã€æµ‹è¯•æ•°æ®æ”¾è¿›å»å°±è¡Œäº†</p><pre class="line-numbers language-shell"><code class="language-shell">(torch) jack@jack-Alienware-m15-R3:/media/jack/JackCode/project/deeplearning/hw1_1-regression$ tree data/data/â”œâ”€â”€ covid.test.csvâ”œâ”€â”€ covid.train.csvâ””â”€â”€ sampleSubmission.csv0 directories, 3 files<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å…¶å®æœ€ååªä¼šç”¨åˆ°test å’Œ train</p><h3 id="4-ä»£ç "><a href="#4-ä»£ç " class="headerlink" title="4. ä»£ç "></a>4. ä»£ç </h3><p>ç”¨çš„æ—¶å€™è¦æ³¨æ„ï¼Œgen_submissionè¦æ”¹å‚æ•°æ–‡ä»¶çš„è·¯å¾„ã€‚æ­¤å¤–è‡ªå·±æƒ³å†™ç½‘ç»œçš„è¯éœ€è¦ç»§æ‰¿_NetworkBaseï¼Œç„¶åé‡å†™dtype</p><p>è®­ç»ƒç½‘ç»œå’Œç”Ÿæˆç»“æœçš„æ—¶å€™ä¸€ç§ç½‘ç»œä¸€ä¸ªå‡½æ•°å³å¯</p><h4 id="1-pathconfig-py"><a href="#1-pathconfig-py" class="headerlink" title="1. pathconfig.py"></a>1. pathconfig.py</h4><p>è‡ªåŠ¨å†³å®šæ‰€æœ‰çš„è·¯å¾„</p><pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">import</span> sys<span class="token keyword">from</span> pathlib <span class="token keyword">import</span> Path<span class="token keyword">from</span> colorama <span class="token keyword">import</span> Fore<span class="token punctuation">,</span> Style<span class="token keyword">if</span> <span class="token punctuation">(</span>p<span class="token punctuation">:</span><span class="token operator">=</span>Path<span class="token punctuation">(</span>__file__<span class="token punctuation">)</span><span class="token punctuation">.</span>resolve<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>parent<span class="token punctuation">)</span><span class="token punctuation">.</span>__str__<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token keyword">in</span> sys<span class="token punctuation">.</span>path<span class="token punctuation">:</span>    sys<span class="token punctuation">.</span>path<span class="token punctuation">.</span>append<span class="token punctuation">(</span>p<span class="token punctuation">.</span>__str__<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">def</span> <span class="token function">green</span><span class="token punctuation">(</span>s<span class="token punctuation">:</span> str<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">return</span> f<span class="token string">"{Fore.GREEN}{s}{Fore.RESET}"</span><span class="token keyword">def</span> <span class="token function">red</span><span class="token punctuation">(</span>s<span class="token punctuation">:</span> str<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">return</span> f<span class="token string">"{Fore.RED}{s}{Fore.RESET}"</span><span class="token keyword">def</span> <span class="token function">yellow</span><span class="token punctuation">(</span>s<span class="token punctuation">:</span> str<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">return</span> f<span class="token string">"{Fore.YELLOW}{s}{Fore.RESET}"</span><span class="token keyword">class</span> <span class="token class-name">Paths</span><span class="token punctuation">:</span>    base_path<span class="token punctuation">:</span> Path <span class="token operator">=</span> Path<span class="token punctuation">(</span>__file__<span class="token punctuation">)</span><span class="token punctuation">.</span>resolve<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>parents<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>    src_path<span class="token punctuation">:</span> Path <span class="token operator">=</span> base_path<span class="token punctuation">.</span>joinpath<span class="token punctuation">(</span><span class="token string">"src"</span><span class="token punctuation">)</span>    log_path<span class="token punctuation">:</span> Path <span class="token operator">=</span> base_path<span class="token punctuation">.</span>joinpath<span class="token punctuation">(</span><span class="token string">"log"</span><span class="token punctuation">)</span>    data_path<span class="token punctuation">:</span> Path <span class="token operator">=</span> base_path<span class="token punctuation">.</span>joinpath<span class="token punctuation">(</span><span class="token string">"data"</span><span class="token punctuation">)</span>    checkpoint_path<span class="token punctuation">:</span> Path <span class="token operator">=</span> base_path<span class="token punctuation">.</span>joinpath<span class="token punctuation">(</span><span class="token string">"checkpoint"</span><span class="token punctuation">)</span>    submission_path<span class="token punctuation">:</span> Path <span class="token operator">=</span> base_path<span class="token punctuation">.</span>joinpath<span class="token punctuation">(</span><span class="token string">"submission"</span><span class="token punctuation">)</span>    train_path<span class="token punctuation">:</span> Path <span class="token operator">=</span> data_path <span class="token operator">/</span> <span class="token string">"covid.train.csv"</span>    test_path<span class="token punctuation">:</span> Path <span class="token operator">=</span> data_path <span class="token operator">/</span> <span class="token string">"covid.test.csv"</span>    config_path<span class="token punctuation">:</span> Path <span class="token operator">=</span> src_path <span class="token operator">/</span> <span class="token string">"config"</span><span class="token keyword">for</span> key<span class="token punctuation">,</span> value <span class="token keyword">in</span> Paths<span class="token punctuation">.</span>__dict__<span class="token punctuation">.</span>items<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">if</span> key<span class="token punctuation">.</span>endswith<span class="token punctuation">(</span><span class="token string">"_path"</span><span class="token punctuation">)</span> <span class="token operator">and</span> <span class="token operator">not</span> value<span class="token punctuation">.</span>exists<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        value<span class="token punctuation">.</span>mkdir<span class="token punctuation">(</span>parents<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>    pc <span class="token operator">=</span> Paths<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>pc<span class="token punctuation">.</span>base_path<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="2-feature-selection-py"><a href="#2-feature-selection-py" class="headerlink" title="2. feature_selection.py"></a>2. feature_selection.py</h4><pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">import</span> numpy <span class="token keyword">as</span> np<span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd<span class="token keyword">from</span> sklearn <span class="token keyword">import</span> preprocessing<span class="token keyword">from</span> sklearn<span class="token punctuation">.</span>feature_selection <span class="token keyword">import</span> SelectKBest<span class="token punctuation">,</span> f_regression<span class="token keyword">from</span> pathconfig <span class="token keyword">import</span> Pathsdata <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span>Paths<span class="token punctuation">.</span>train_path<span class="token punctuation">)</span>x<span class="token punctuation">,</span> y <span class="token operator">=</span> data<span class="token punctuation">.</span>iloc<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span> <span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> data<span class="token punctuation">.</span>iloc<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>x <span class="token operator">=</span> <span class="token punctuation">(</span>x <span class="token operator">-</span> x<span class="token punctuation">.</span>min<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token punctuation">(</span>x<span class="token punctuation">.</span>max<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> x<span class="token punctuation">.</span>min<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"># æ ¹æ®å¾—åˆ†å‡½æ•°è®¡ç®—å‡ºæ¥çš„åˆ†æ•°é€‰å–å‰äº”ä¸ª</span>bestfeatures <span class="token operator">=</span> SelectKBest<span class="token punctuation">(</span>score_func<span class="token operator">=</span>f_regression<span class="token punctuation">,</span> k<span class="token operator">=</span><span class="token number">5</span><span class="token punctuation">)</span>fit <span class="token operator">=</span> bestfeatures<span class="token punctuation">.</span>fit<span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">)</span>dfscores <span class="token operator">=</span> pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span>fit<span class="token punctuation">.</span>scores_<span class="token punctuation">)</span>dfcolumns <span class="token operator">=</span> pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span>x<span class="token punctuation">.</span>columns<span class="token punctuation">)</span><span class="token comment" spellcheck="true">#concat two dataframes for better visualization </span>featureScores <span class="token operator">=</span> pd<span class="token punctuation">.</span>concat<span class="token punctuation">(</span><span class="token punctuation">[</span>dfcolumns<span class="token punctuation">,</span>dfscores<span class="token punctuation">]</span><span class="token punctuation">,</span>axis<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>featureScores<span class="token punctuation">.</span>columns <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'Specs'</span><span class="token punctuation">,</span><span class="token string">'Score'</span><span class="token punctuation">]</span>  <span class="token comment" spellcheck="true">#naming the dataframe columns</span>pd<span class="token punctuation">.</span>set_option<span class="token punctuation">(</span><span class="token string">'display.max_rows'</span><span class="token punctuation">,</span> None<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>featureScores<span class="token punctuation">.</span>nlargest<span class="token punctuation">(</span><span class="token number">90</span><span class="token punctuation">,</span><span class="token string">'Score'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment" spellcheck="true">#print 15 best features</span><span class="token keyword">print</span><span class="token punctuation">(</span>featureScores<span class="token punctuation">.</span>nlargest<span class="token punctuation">(</span><span class="token number">90</span><span class="token punctuation">,</span> <span class="token string">"Score"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>index<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>pd<span class="token punctuation">.</span>Series<span class="token punctuation">(</span>data<span class="token punctuation">.</span>columns<span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="3-dataset-py"><a href="#3-dataset-py" class="headerlink" title="3. dataset.py"></a>3. dataset.py</h4><pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">import</span> pickle<span class="token keyword">import</span> random<span class="token keyword">import</span> typing<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np<span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd<span class="token keyword">import</span> torch<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>data <span class="token keyword">as</span> data<span class="token keyword">from</span> pathconfig <span class="token keyword">import</span> <span class="token operator">*</span><span class="token keyword">class</span> <span class="token class-name">CovidDataset</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>Dataset<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> split<span class="token operator">=</span><span class="token string">"train"</span><span class="token punctuation">,</span> dim2use<span class="token punctuation">:</span> typing<span class="token punctuation">.</span>Iterable<span class="token punctuation">[</span>int<span class="token punctuation">]</span><span class="token operator">=</span>None<span class="token punctuation">,</span> val_ratio<span class="token punctuation">:</span> float<span class="token operator">=</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> None<span class="token punctuation">:</span>        super<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span><span class="token punctuation">)</span>        dim2use <span class="token operator">=</span> range<span class="token punctuation">(</span><span class="token number">93</span><span class="token punctuation">)</span> <span class="token keyword">if</span> dim2use <span class="token keyword">is</span> None <span class="token keyword">else</span> dim2use        <span class="token keyword">assert</span> split <span class="token keyword">in</span> <span class="token punctuation">[</span><span class="token string">"train"</span><span class="token punctuation">,</span> <span class="token string">"test"</span><span class="token punctuation">,</span> <span class="token string">"val"</span><span class="token punctuation">]</span><span class="token punctuation">,</span> red<span class="token punctuation">(</span>f<span class="token string">"æ— æ•ˆçš„æ•°æ®é›†ç±»åˆ«ï¼š{split}"</span><span class="token punctuation">)</span>        <span class="token keyword">assert</span> <span class="token punctuation">(</span>t<span class="token punctuation">:</span><span class="token operator">=</span><span class="token punctuation">(</span>np<span class="token punctuation">.</span>array<span class="token punctuation">(</span>dim2use<span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">93</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>all<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> red<span class="token punctuation">(</span>f<span class="token string">"æ— æ•ˆçš„feature dimensionï¼Œ æœ€å¤§åªæœ‰ 93 ç»´(0-92), dim2use={dim2use[t]} > 92"</span><span class="token punctuation">)</span>        <span class="token comment" spellcheck="true"># read file</span>        self<span class="token punctuation">.</span>split<span class="token punctuation">:</span> str <span class="token operator">=</span> split        <span class="token keyword">if</span> self<span class="token punctuation">.</span>split <span class="token operator">==</span> <span class="token string">"test"</span><span class="token punctuation">:</span>            raw_csv<span class="token punctuation">:</span> np<span class="token punctuation">.</span>ndarray <span class="token operator">=</span> <span class="token punctuation">(</span>a<span class="token punctuation">:</span><span class="token operator">=</span>pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span>Paths<span class="token punctuation">.</span>test_path<span class="token punctuation">,</span> header<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> index_col<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> dtype<span class="token operator">=</span>float<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to_numpy<span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token keyword">else</span><span class="token punctuation">:</span>            raw_csv<span class="token punctuation">:</span> np<span class="token punctuation">.</span>ndarray <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span>Paths<span class="token punctuation">.</span>train_path<span class="token punctuation">,</span> header<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> index_col<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> dtype<span class="token operator">=</span>float<span class="token punctuation">)</span><span class="token punctuation">.</span>to_numpy<span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token keyword">if</span> <span class="token number">0</span> <span class="token operator">&lt;</span> val_ratio <span class="token operator">&lt;</span> <span class="token number">1</span><span class="token punctuation">:</span>                val_idx<span class="token punctuation">:</span> typing<span class="token punctuation">.</span>List<span class="token punctuation">[</span>int<span class="token punctuation">]</span> <span class="token operator">=</span> random<span class="token punctuation">.</span>sample<span class="token punctuation">(</span>population<span class="token operator">=</span>range<span class="token punctuation">(</span>len<span class="token punctuation">(</span>raw_csv<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> k<span class="token operator">=</span>int<span class="token punctuation">(</span>val_ratio <span class="token operator">*</span> len<span class="token punctuation">(</span>raw_csv<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                train_idx<span class="token punctuation">:</span> typing<span class="token punctuation">.</span>List<span class="token punctuation">[</span>int<span class="token punctuation">]</span> <span class="token operator">=</span> list<span class="token punctuation">(</span>set<span class="token punctuation">(</span>range<span class="token punctuation">(</span>len<span class="token punctuation">(</span>raw_csv<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">-</span> set<span class="token punctuation">(</span>val_idx<span class="token punctuation">)</span><span class="token punctuation">)</span>                <span class="token keyword">if</span> Paths<span class="token punctuation">.</span>config_path<span class="token punctuation">.</span>joinpath<span class="token punctuation">(</span><span class="token string">"train_val.pkl"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>exists<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>                    <span class="token keyword">print</span><span class="token punctuation">(</span>yellow<span class="token punctuation">(</span><span class="token string">"è¦†ç›–train_val.pkl"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                <span class="token keyword">with</span> open<span class="token punctuation">(</span>Paths<span class="token punctuation">.</span>config_path<span class="token punctuation">.</span>joinpath<span class="token punctuation">(</span><span class="token string">"train_val.pkl"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"wb"</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>                    pickle<span class="token punctuation">.</span>dump<span class="token punctuation">(</span>obj<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">"train"</span><span class="token punctuation">:</span>train_idx<span class="token punctuation">,</span> <span class="token string">"val"</span><span class="token punctuation">:</span>val_idx<span class="token punctuation">}</span><span class="token punctuation">,</span> file<span class="token operator">=</span>f<span class="token punctuation">)</span>            <span class="token keyword">else</span><span class="token punctuation">:</span>                <span class="token keyword">try</span><span class="token punctuation">:</span>                    <span class="token keyword">with</span> open<span class="token punctuation">(</span>Paths<span class="token punctuation">.</span>config_path<span class="token punctuation">.</span>joinpath<span class="token punctuation">(</span><span class="token string">"train_val.pkl"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"rb"</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>                        p <span class="token operator">=</span> pickle<span class="token punctuation">.</span>load<span class="token punctuation">(</span>file<span class="token operator">=</span>f<span class="token punctuation">)</span>                        train_idx<span class="token punctuation">:</span> typing<span class="token punctuation">.</span>List<span class="token punctuation">[</span>int<span class="token punctuation">]</span> <span class="token operator">=</span> p<span class="token punctuation">[</span><span class="token string">"train"</span><span class="token punctuation">]</span>                        val_idx<span class="token punctuation">:</span> typing<span class="token punctuation">.</span>List<span class="token punctuation">[</span>int<span class="token punctuation">]</span> <span class="token operator">=</span> p<span class="token punctuation">[</span><span class="token string">"val"</span><span class="token punctuation">]</span>                <span class="token keyword">except</span> FileNotFoundError<span class="token punctuation">:</span>                    <span class="token keyword">assert</span> <span class="token boolean">False</span><span class="token punctuation">,</span> red<span class="token punctuation">(</span>f<span class="token string">"ä¸å­˜åœ¨train_validationçš„configæ–‡ä»¶ï¼Œè¯·å…ˆæŒ‡å®šval_ratioç”Ÿæˆtrain_valçš„config"</span><span class="token punctuation">)</span>            <span class="token keyword">if</span> split <span class="token operator">==</span> <span class="token string">"val"</span><span class="token punctuation">:</span>                raw_csv <span class="token operator">=</span> raw_csv<span class="token punctuation">[</span>val_idx<span class="token punctuation">,</span> <span class="token punctuation">:</span><span class="token punctuation">]</span>            <span class="token keyword">else</span><span class="token punctuation">:</span>                raw_csv <span class="token operator">=</span> raw_csv<span class="token punctuation">[</span>train_idx<span class="token punctuation">,</span> <span class="token punctuation">:</span><span class="token punctuation">]</span>        <span class="token comment" spellcheck="true"># standard</span>        self<span class="token punctuation">.</span>mean <span class="token operator">=</span> raw_csv<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>mean<span class="token punctuation">(</span>axis<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>std <span class="token operator">=</span> raw_csv<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>std<span class="token punctuation">(</span>axis<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span>        raw_csv<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span>raw_csv<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">-</span> self<span class="token punctuation">.</span>mean<span class="token punctuation">)</span> <span class="token operator">/</span> self<span class="token punctuation">.</span>std        <span class="token keyword">if</span> self<span class="token punctuation">.</span>split <span class="token operator">!=</span> <span class="token string">"test"</span><span class="token punctuation">:</span>            self<span class="token punctuation">.</span>data<span class="token punctuation">:</span> np<span class="token punctuation">.</span>ndarray <span class="token operator">=</span> raw_csv<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span> dim2use<span class="token punctuation">]</span>            self<span class="token punctuation">.</span>label<span class="token punctuation">:</span> np<span class="token punctuation">.</span>ndarray <span class="token operator">=</span> raw_csv<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>        <span class="token keyword">else</span><span class="token punctuation">:</span>            self<span class="token punctuation">.</span>data<span class="token punctuation">:</span> np<span class="token punctuation">.</span>ndarray <span class="token operator">=</span> raw_csv<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span> dim2use<span class="token punctuation">]</span>        <span class="token keyword">def</span> <span class="token function">__len__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> int<span class="token punctuation">:</span>        <span class="token keyword">return</span> len<span class="token punctuation">(</span>self<span class="token punctuation">.</span>data<span class="token punctuation">)</span>        <span class="token keyword">def</span> <span class="token function">__getitem__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> index<span class="token punctuation">:</span> int<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> typing<span class="token punctuation">.</span>Tuple<span class="token punctuation">[</span>np<span class="token punctuation">.</span>ndarray<span class="token punctuation">]</span><span class="token punctuation">:</span>        <span class="token keyword">if</span> self<span class="token punctuation">.</span>split <span class="token operator">!=</span> <span class="token string">"test"</span><span class="token punctuation">:</span>            <span class="token keyword">return</span> self<span class="token punctuation">.</span>data<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">,</span> self<span class="token punctuation">.</span>label<span class="token punctuation">[</span>index<span class="token punctuation">]</span>        <span class="token keyword">else</span><span class="token punctuation">:</span>            <span class="token keyword">return</span> self<span class="token punctuation">.</span>data<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>    <span class="token comment" spellcheck="true"># cd = CovidDataset(split="train", val_ratio=0.1)</span>    <span class="token comment" spellcheck="true"># cd = CovidDataset(split="val", dim2use=range(10))</span>    <span class="token comment" spellcheck="true"># cd = CovidDataset(split="test", dim2use=range(10))</span>    cd <span class="token operator">=</span> CovidDataset<span class="token punctuation">(</span>split<span class="token operator">=</span><span class="token string">"train"</span><span class="token punctuation">,</span> dim2use<span class="token operator">=</span>None<span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>cd<span class="token punctuation">.</span>data<span class="token punctuation">.</span>shape<span class="token punctuation">)</span>    <span class="token keyword">for</span> x<span class="token punctuation">,</span> y <span class="token keyword">in</span> cd<span class="token punctuation">:</span>        <span class="token keyword">print</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span>        <span class="token keyword">print</span><span class="token punctuation">(</span>x<span class="token punctuation">.</span>shape<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="4-networks-py"><a href="#4-networks-py" class="headerlink" title="4. networks.py"></a>4. networks.py</h4><pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">import</span> torch<span class="token keyword">import</span> torch<span class="token punctuation">.</span>nn <span class="token keyword">as</span> nn<span class="token keyword">class</span> <span class="token class-name">_NetworkBase</span><span class="token punctuation">(</span>nn<span class="token punctuation">.</span>Module<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        super<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>dtype <span class="token operator">=</span> None        self<span class="token punctuation">.</span>net<span class="token punctuation">:</span> nn<span class="token punctuation">.</span>Module <span class="token operator">=</span> None<span class="token keyword">class</span> <span class="token class-name">Baseline</span><span class="token punctuation">(</span>_NetworkBase<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> in_features<span class="token punctuation">:</span>int<span class="token punctuation">)</span><span class="token punctuation">:</span>        super<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>net <span class="token operator">=</span> nn<span class="token punctuation">.</span>Sequential<span class="token punctuation">(</span>            nn<span class="token punctuation">.</span>Linear<span class="token punctuation">(</span>in_features<span class="token operator">=</span>in_features<span class="token punctuation">,</span> out_features<span class="token operator">=</span><span class="token number">64</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            nn<span class="token punctuation">.</span>ReLU<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            nn<span class="token punctuation">.</span>Linear<span class="token punctuation">(</span>in_features<span class="token operator">=</span><span class="token number">64</span><span class="token punctuation">,</span> out_features<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>        <span class="token punctuation">)</span>        <span class="token keyword">for</span> name<span class="token punctuation">,</span> son <span class="token keyword">in</span> self<span class="token punctuation">.</span>net<span class="token punctuation">.</span>named_children<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            weight<span class="token punctuation">:</span> nn<span class="token punctuation">.</span>parameter<span class="token punctuation">.</span>Parameter            <span class="token keyword">if</span> <span class="token punctuation">(</span>weight<span class="token punctuation">:</span><span class="token operator">=</span>getattr<span class="token punctuation">(</span>son<span class="token punctuation">,</span> <span class="token string">"weight"</span><span class="token punctuation">,</span> None<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">is</span> <span class="token operator">not</span> None<span class="token punctuation">:</span>                self<span class="token punctuation">.</span>dtype<span class="token punctuation">:</span> torch<span class="token punctuation">.</span>dtype <span class="token operator">=</span> weight<span class="token punctuation">.</span>dtype        <span class="token keyword">def</span> <span class="token function">forward</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> x<span class="token punctuation">:</span> torch<span class="token punctuation">.</span>Tensor<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token comment" spellcheck="true"># x: [batch, channel]</span>        <span class="token keyword">return</span> self<span class="token punctuation">.</span>net<span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token keyword">class</span> <span class="token class-name">DeeperNet</span><span class="token punctuation">(</span>_NetworkBase<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> in_features<span class="token punctuation">:</span> int<span class="token punctuation">)</span><span class="token punctuation">:</span>        super<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>input_trainsform <span class="token operator">=</span> nn<span class="token punctuation">.</span>Sequential<span class="token punctuation">(</span>            nn<span class="token punctuation">.</span>Linear<span class="token punctuation">(</span>in_features<span class="token operator">=</span>in_features<span class="token punctuation">,</span> out_features<span class="token operator">=</span><span class="token number">64</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            nn<span class="token punctuation">.</span>LeakyReLU<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            <span class="token comment" spellcheck="true"># nn.BatchNorm1d(num_features=128),</span>            <span class="token comment" spellcheck="true"># nn.Dropout(),</span>        <span class="token punctuation">)</span>        self<span class="token punctuation">.</span>residual_block1 <span class="token operator">=</span> nn<span class="token punctuation">.</span>Sequential<span class="token punctuation">(</span>            nn<span class="token punctuation">.</span>Linear<span class="token punctuation">(</span>in_features<span class="token operator">=</span><span class="token number">64</span><span class="token punctuation">,</span> out_features<span class="token operator">=</span><span class="token number">32</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            nn<span class="token punctuation">.</span>LeakyReLU<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            <span class="token comment" spellcheck="true"># nn.BatchNorm1d(num_features=64),</span>            <span class="token comment" spellcheck="true"># nn.Dropout(),</span>            nn<span class="token punctuation">.</span>Linear<span class="token punctuation">(</span>in_features<span class="token operator">=</span><span class="token number">32</span><span class="token punctuation">,</span> out_features<span class="token operator">=</span><span class="token number">64</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            nn<span class="token punctuation">.</span>LeakyReLU<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            <span class="token comment" spellcheck="true"># nn.BatchNorm1d(num_features=128),</span>            <span class="token comment" spellcheck="true"># nn.Dropout(),</span>        <span class="token punctuation">)</span>        self<span class="token punctuation">.</span>residual_block2 <span class="token operator">=</span> nn<span class="token punctuation">.</span>Sequential<span class="token punctuation">(</span>            nn<span class="token punctuation">.</span>Linear<span class="token punctuation">(</span>in_features<span class="token operator">=</span><span class="token number">64</span><span class="token punctuation">,</span> out_features<span class="token operator">=</span><span class="token number">32</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            nn<span class="token punctuation">.</span>LeakyReLU<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            <span class="token comment" spellcheck="true"># nn.BatchNorm1d(num_features=64),</span>            <span class="token comment" spellcheck="true"># nn.Dropout(),</span>            nn<span class="token punctuation">.</span>Linear<span class="token punctuation">(</span>in_features<span class="token operator">=</span><span class="token number">32</span><span class="token punctuation">,</span> out_features<span class="token operator">=</span><span class="token number">64</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            nn<span class="token punctuation">.</span>LeakyReLU<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            <span class="token comment" spellcheck="true"># nn.BatchNorm1d(num_features=128),</span>            <span class="token comment" spellcheck="true"># nn.Dropout(),</span>        <span class="token punctuation">)</span>        self<span class="token punctuation">.</span>residual_block3 <span class="token operator">=</span> nn<span class="token punctuation">.</span>Sequential<span class="token punctuation">(</span>            nn<span class="token punctuation">.</span>Linear<span class="token punctuation">(</span>in_features<span class="token operator">=</span><span class="token number">64</span><span class="token punctuation">,</span> out_features<span class="token operator">=</span><span class="token number">32</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            nn<span class="token punctuation">.</span>LeakyReLU<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            <span class="token comment" spellcheck="true"># nn.BatchNorm1d(num_features=64),</span>            <span class="token comment" spellcheck="true"># nn.Dropout(),</span>            nn<span class="token punctuation">.</span>Linear<span class="token punctuation">(</span>in_features<span class="token operator">=</span><span class="token number">32</span><span class="token punctuation">,</span> out_features<span class="token operator">=</span><span class="token number">64</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            nn<span class="token punctuation">.</span>LeakyReLU<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            <span class="token comment" spellcheck="true"># nn.BatchNorm1d(num_features=128),</span>            <span class="token comment" spellcheck="true"># nn.Dropout(),</span>        <span class="token punctuation">)</span>        self<span class="token punctuation">.</span>residual_block4 <span class="token operator">=</span> nn<span class="token punctuation">.</span>Sequential<span class="token punctuation">(</span>            nn<span class="token punctuation">.</span>Linear<span class="token punctuation">(</span>in_features<span class="token operator">=</span><span class="token number">64</span><span class="token punctuation">,</span> out_features<span class="token operator">=</span><span class="token number">32</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            nn<span class="token punctuation">.</span>LeakyReLU<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            <span class="token comment" spellcheck="true"># nn.BatchNorm1d(num_features=64),</span>            <span class="token comment" spellcheck="true"># nn.Dropout(),</span>            nn<span class="token punctuation">.</span>Linear<span class="token punctuation">(</span>in_features<span class="token operator">=</span><span class="token number">32</span><span class="token punctuation">,</span> out_features<span class="token operator">=</span><span class="token number">64</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            nn<span class="token punctuation">.</span>LeakyReLU<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            <span class="token comment" spellcheck="true"># nn.BatchNorm1d(num_features=128),</span>            <span class="token comment" spellcheck="true"># nn.Dropout(),</span>        <span class="token punctuation">)</span>        self<span class="token punctuation">.</span>output <span class="token operator">=</span> nn<span class="token punctuation">.</span>Sequential<span class="token punctuation">(</span>            nn<span class="token punctuation">.</span>Linear<span class="token punctuation">(</span>in_features<span class="token operator">=</span><span class="token number">64</span><span class="token punctuation">,</span> out_features<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            <span class="token comment" spellcheck="true"># nn.LeakyReLU(),</span>            <span class="token comment" spellcheck="true"># nn.Linear(in_features=32, out_features=1)</span>        <span class="token punctuation">)</span>        <span class="token keyword">for</span> name<span class="token punctuation">,</span> son <span class="token keyword">in</span> self<span class="token punctuation">.</span>input_trainsform<span class="token punctuation">.</span>named_children<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            weight<span class="token punctuation">:</span> nn<span class="token punctuation">.</span>parameter<span class="token punctuation">.</span>Parameter            <span class="token keyword">if</span> <span class="token punctuation">(</span>weight<span class="token punctuation">:</span><span class="token operator">=</span>getattr<span class="token punctuation">(</span>son<span class="token punctuation">,</span> <span class="token string">"weight"</span><span class="token punctuation">,</span> None<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">is</span> <span class="token operator">not</span> None<span class="token punctuation">:</span>                self<span class="token punctuation">.</span>dtype<span class="token punctuation">:</span> torch<span class="token punctuation">.</span>dtype <span class="token operator">=</span> weight<span class="token punctuation">.</span>dtype        <span class="token keyword">def</span> <span class="token function">forward</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> raw_x<span class="token punctuation">:</span> torch<span class="token punctuation">.</span>Tensor<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> torch<span class="token punctuation">.</span>Tensor<span class="token punctuation">:</span>        x <span class="token operator">=</span> self<span class="token punctuation">.</span>input_trainsform<span class="token punctuation">(</span>raw_x<span class="token punctuation">)</span>        y1 <span class="token operator">=</span> self<span class="token punctuation">.</span>residual_block1<span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token operator">+</span> x        y2 <span class="token operator">=</span> self<span class="token punctuation">.</span>residual_block2<span class="token punctuation">(</span>y1<span class="token punctuation">)</span> <span class="token operator">+</span> y1         <span class="token comment" spellcheck="true"># y3 = self.residual_block3(y2) + y2</span>        <span class="token comment" spellcheck="true"># y4 = self.residual_block4(y3) + y3</span>        <span class="token keyword">return</span> self<span class="token punctuation">.</span>output<span class="token punctuation">(</span>y2<span class="token punctuation">)</span><span class="token keyword">class</span> <span class="token class-name">DeeperNormalizedNet</span><span class="token punctuation">(</span>_NetworkBase<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> in_features<span class="token punctuation">:</span> int<span class="token punctuation">)</span><span class="token punctuation">:</span>        super<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>input_trainsform <span class="token operator">=</span> nn<span class="token punctuation">.</span>Sequential<span class="token punctuation">(</span>            nn<span class="token punctuation">.</span>Linear<span class="token punctuation">(</span>in_features<span class="token operator">=</span>in_features<span class="token punctuation">,</span> out_features<span class="token operator">=</span><span class="token number">128</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            nn<span class="token punctuation">.</span>ReLU<span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">)</span>        self<span class="token punctuation">.</span>residual_block1 <span class="token operator">=</span> nn<span class="token punctuation">.</span>Sequential<span class="token punctuation">(</span>            nn<span class="token punctuation">.</span>Linear<span class="token punctuation">(</span>in_features<span class="token operator">=</span><span class="token number">128</span><span class="token punctuation">,</span> out_features<span class="token operator">=</span><span class="token number">64</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            nn<span class="token punctuation">.</span>ReLU<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            <span class="token comment" spellcheck="true"># nn.BatchNorm1d(num_features=64),</span>            <span class="token comment" spellcheck="true"># nn.Dropout(),</span>            nn<span class="token punctuation">.</span>Linear<span class="token punctuation">(</span>in_features<span class="token operator">=</span><span class="token number">64</span><span class="token punctuation">,</span> out_features<span class="token operator">=</span><span class="token number">128</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            nn<span class="token punctuation">.</span>ReLU<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            <span class="token comment" spellcheck="true"># nn.BatchNorm1d(num_features=128),</span>            <span class="token comment" spellcheck="true"># nn.Dropout(),</span>        <span class="token punctuation">)</span>        self<span class="token punctuation">.</span>residual_block2 <span class="token operator">=</span> nn<span class="token punctuation">.</span>Sequential<span class="token punctuation">(</span>            nn<span class="token punctuation">.</span>Linear<span class="token punctuation">(</span>in_features<span class="token operator">=</span><span class="token number">128</span><span class="token punctuation">,</span> out_features<span class="token operator">=</span><span class="token number">64</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            nn<span class="token punctuation">.</span>ReLU<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            <span class="token comment" spellcheck="true"># nn.BatchNorm1d(num_features=64),</span>            <span class="token comment" spellcheck="true"># nn.Dropout(),</span>            nn<span class="token punctuation">.</span>Linear<span class="token punctuation">(</span>in_features<span class="token operator">=</span><span class="token number">64</span><span class="token punctuation">,</span> out_features<span class="token operator">=</span><span class="token number">128</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            nn<span class="token punctuation">.</span>ReLU<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            <span class="token comment" spellcheck="true"># nn.BatchNorm1d(num_features=128),</span>            <span class="token comment" spellcheck="true"># nn.Dropout(),</span>        <span class="token punctuation">)</span>        self<span class="token punctuation">.</span>output <span class="token operator">=</span> nn<span class="token punctuation">.</span>Linear<span class="token punctuation">(</span>in_features<span class="token operator">=</span><span class="token number">128</span><span class="token punctuation">,</span> out_features<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>        <span class="token keyword">for</span> name<span class="token punctuation">,</span> son <span class="token keyword">in</span> self<span class="token punctuation">.</span>input_trainsform<span class="token punctuation">.</span>named_children<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            weight<span class="token punctuation">:</span> nn<span class="token punctuation">.</span>parameter<span class="token punctuation">.</span>Parameter            <span class="token keyword">if</span> <span class="token punctuation">(</span>weight<span class="token punctuation">:</span><span class="token operator">=</span>getattr<span class="token punctuation">(</span>son<span class="token punctuation">,</span> <span class="token string">"weight"</span><span class="token punctuation">,</span> None<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">is</span> <span class="token operator">not</span> None<span class="token punctuation">:</span>                self<span class="token punctuation">.</span>dtype<span class="token punctuation">:</span> torch<span class="token punctuation">.</span>dtype <span class="token operator">=</span> weight<span class="token punctuation">.</span>dtype        <span class="token keyword">def</span> <span class="token function">forward</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> raw_x<span class="token punctuation">:</span> torch<span class="token punctuation">.</span>Tensor<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> torch<span class="token punctuation">.</span>Tensor<span class="token punctuation">:</span>        x <span class="token operator">=</span> self<span class="token punctuation">.</span>input_trainsform<span class="token punctuation">(</span>raw_x<span class="token punctuation">)</span>        y1 <span class="token operator">=</span> self<span class="token punctuation">.</span>residual_block1<span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token operator">+</span> x        y2 <span class="token operator">=</span> self<span class="token punctuation">.</span>residual_block2<span class="token punctuation">(</span>y1<span class="token punctuation">)</span> <span class="token operator">+</span> y1        <span class="token keyword">return</span> self<span class="token punctuation">.</span>output<span class="token punctuation">(</span>y2<span class="token punctuation">)</span><span class="token keyword">class</span> <span class="token class-name">WideNet</span><span class="token punctuation">(</span>_NetworkBase<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> in_features<span class="token punctuation">:</span> int<span class="token punctuation">)</span><span class="token punctuation">:</span>        super<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>input_trainsform <span class="token operator">=</span> nn<span class="token punctuation">.</span>Sequential<span class="token punctuation">(</span>            nn<span class="token punctuation">.</span>Linear<span class="token punctuation">(</span>in_features<span class="token operator">=</span>in_features<span class="token punctuation">,</span> out_features<span class="token operator">=</span><span class="token number">128</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            nn<span class="token punctuation">.</span>ReLU<span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">)</span>        self<span class="token punctuation">.</span>residual_block1 <span class="token operator">=</span> nn<span class="token punctuation">.</span>Sequential<span class="token punctuation">(</span>            nn<span class="token punctuation">.</span>Linear<span class="token punctuation">(</span>in_features<span class="token operator">=</span><span class="token number">128</span><span class="token punctuation">,</span> out_features<span class="token operator">=</span><span class="token number">64</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            nn<span class="token punctuation">.</span>ReLU<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            nn<span class="token punctuation">.</span>Linear<span class="token punctuation">(</span>in_features<span class="token operator">=</span><span class="token number">64</span><span class="token punctuation">,</span> out_features<span class="token operator">=</span><span class="token number">128</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            nn<span class="token punctuation">.</span>ReLU<span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">)</span>        self<span class="token punctuation">.</span>residual_block2 <span class="token operator">=</span> nn<span class="token punctuation">.</span>Sequential<span class="token punctuation">(</span>            nn<span class="token punctuation">.</span>Linear<span class="token punctuation">(</span>in_features<span class="token operator">=</span><span class="token number">128</span><span class="token punctuation">,</span> out_features<span class="token operator">=</span><span class="token number">64</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            nn<span class="token punctuation">.</span>ReLU<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            nn<span class="token punctuation">.</span>Linear<span class="token punctuation">(</span>in_features<span class="token operator">=</span><span class="token number">64</span><span class="token punctuation">,</span> out_features<span class="token operator">=</span><span class="token number">128</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            nn<span class="token punctuation">.</span>ReLU<span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">)</span>        self<span class="token punctuation">.</span>residual_block3 <span class="token operator">=</span> nn<span class="token punctuation">.</span>Sequential<span class="token punctuation">(</span>            nn<span class="token punctuation">.</span>Linear<span class="token punctuation">(</span>in_features<span class="token operator">=</span><span class="token number">128</span><span class="token punctuation">,</span> out_features<span class="token operator">=</span><span class="token number">64</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            nn<span class="token punctuation">.</span>ReLU<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            nn<span class="token punctuation">.</span>Linear<span class="token punctuation">(</span>in_features<span class="token operator">=</span><span class="token number">64</span><span class="token punctuation">,</span> out_features<span class="token operator">=</span><span class="token number">128</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            nn<span class="token punctuation">.</span>ReLU<span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">)</span>        self<span class="token punctuation">.</span>output <span class="token operator">=</span> nn<span class="token punctuation">.</span>Linear<span class="token punctuation">(</span>in_features<span class="token operator">=</span><span class="token number">128</span><span class="token punctuation">,</span> out_features<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>        <span class="token keyword">for</span> name<span class="token punctuation">,</span> son <span class="token keyword">in</span> self<span class="token punctuation">.</span>input_trainsform<span class="token punctuation">.</span>named_children<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            weight<span class="token punctuation">:</span> nn<span class="token punctuation">.</span>parameter<span class="token punctuation">.</span>Parameter            <span class="token keyword">if</span> <span class="token punctuation">(</span>weight<span class="token punctuation">:</span><span class="token operator">=</span>getattr<span class="token punctuation">(</span>son<span class="token punctuation">,</span> <span class="token string">"weight"</span><span class="token punctuation">,</span> None<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">is</span> <span class="token operator">not</span> None<span class="token punctuation">:</span>                self<span class="token punctuation">.</span>dtype<span class="token punctuation">:</span> torch<span class="token punctuation">.</span>dtype <span class="token operator">=</span> weight<span class="token punctuation">.</span>dtype        <span class="token keyword">def</span> <span class="token function">forward</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> raw_x<span class="token punctuation">:</span> torch<span class="token punctuation">.</span>Tensor<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> torch<span class="token punctuation">.</span>Tensor<span class="token punctuation">:</span>        x <span class="token operator">=</span> self<span class="token punctuation">.</span>input_trainsform<span class="token punctuation">(</span>raw_x<span class="token punctuation">)</span>        y11 <span class="token operator">=</span> self<span class="token punctuation">.</span>residual_block1<span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token operator">+</span> x        y12 <span class="token operator">=</span> self<span class="token punctuation">.</span>residual_block2<span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token operator">+</span> x        y1 <span class="token operator">=</span> <span class="token punctuation">(</span>y11 <span class="token operator">+</span> y12<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span>        y2 <span class="token operator">=</span> self<span class="token punctuation">.</span>residual_block3<span class="token punctuation">(</span>y1<span class="token punctuation">)</span> <span class="token operator">+</span> y1        <span class="token keyword">return</span> self<span class="token punctuation">.</span>output<span class="token punctuation">(</span>y2<span class="token punctuation">)</span><span class="token keyword">class</span> <span class="token class-name">OtherNet</span><span class="token punctuation">(</span>_NetworkBase<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> in_features<span class="token punctuation">:</span> int<span class="token punctuation">)</span><span class="token punctuation">:</span>        super<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>net <span class="token operator">=</span> nn<span class="token punctuation">.</span>Sequential<span class="token punctuation">(</span>            nn<span class="token punctuation">.</span>Linear<span class="token punctuation">(</span>in_features<span class="token operator">=</span>in_features<span class="token punctuation">,</span> out_features<span class="token operator">=</span><span class="token number">32</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            nn<span class="token punctuation">.</span>BatchNorm1d<span class="token punctuation">(</span>num_features<span class="token operator">=</span><span class="token number">32</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            nn<span class="token punctuation">.</span>Dropout<span class="token punctuation">(</span>p<span class="token operator">=</span><span class="token number">0.2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            nn<span class="token punctuation">.</span>LeakyReLU<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            nn<span class="token punctuation">.</span>Linear<span class="token punctuation">(</span>in_features<span class="token operator">=</span><span class="token number">32</span><span class="token punctuation">,</span> out_features<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>        <span class="token punctuation">)</span>        <span class="token keyword">for</span> name<span class="token punctuation">,</span> son <span class="token keyword">in</span> self<span class="token punctuation">.</span>net<span class="token punctuation">.</span>named_children<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            weight<span class="token punctuation">:</span> nn<span class="token punctuation">.</span>parameter<span class="token punctuation">.</span>Parameter            <span class="token keyword">if</span> <span class="token punctuation">(</span>weight<span class="token punctuation">:</span><span class="token operator">=</span>getattr<span class="token punctuation">(</span>son<span class="token punctuation">,</span> <span class="token string">"weight"</span><span class="token punctuation">,</span> None<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">is</span> <span class="token operator">not</span> None<span class="token punctuation">:</span>                self<span class="token punctuation">.</span>dtype<span class="token punctuation">:</span> torch<span class="token punctuation">.</span>dtype <span class="token operator">=</span> weight<span class="token punctuation">.</span>dtype        <span class="token keyword">def</span> <span class="token function">forward</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> x<span class="token punctuation">:</span> torch<span class="token punctuation">.</span>Tensor<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token comment" spellcheck="true"># x: [batch, channel]</span>        <span class="token keyword">return</span> self<span class="token punctuation">.</span>net<span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>    baseline <span class="token operator">=</span> Baseline<span class="token punctuation">(</span>in_features<span class="token operator">=</span><span class="token number">93</span><span class="token punctuation">)</span>    x <span class="token operator">=</span> torch<span class="token punctuation">.</span>randn<span class="token punctuation">(</span><span class="token number">64</span><span class="token punctuation">,</span> <span class="token number">93</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">(</span>dtype<span class="token operator">=</span>baseline<span class="token punctuation">.</span>dtype<span class="token punctuation">,</span> device<span class="token operator">=</span>baseline<span class="token punctuation">.</span>device<span class="token punctuation">)</span>    baseline<span class="token punctuation">(</span>x<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="5-train-py"><a href="#5-train-py" class="headerlink" title="5. train.py"></a>5. train.py</h4><pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">import</span> datetime<span class="token keyword">import</span> typing<span class="token keyword">from</span> pathlib <span class="token keyword">import</span> Path<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np<span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd<span class="token keyword">import</span> matplotlib <span class="token keyword">as</span> mpl<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt<span class="token keyword">from</span> colorama <span class="token keyword">import</span> Fore<span class="token punctuation">,</span> Style<span class="token keyword">from</span> matplotlib<span class="token punctuation">.</span>axes <span class="token keyword">import</span> Axes<span class="token keyword">import</span> torch<span class="token keyword">import</span> torch<span class="token punctuation">.</span>cuda<span class="token keyword">import</span> torch<span class="token punctuation">.</span>backends<span class="token punctuation">.</span>cudnn<span class="token keyword">import</span> torch<span class="token punctuation">.</span>optim <span class="token keyword">as</span> optim<span class="token keyword">import</span> torch<span class="token punctuation">.</span>nn <span class="token keyword">as</span> nn<span class="token keyword">from</span> torch<span class="token punctuation">.</span>optim <span class="token keyword">import</span> optimizer<span class="token keyword">import</span> torch<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>data <span class="token keyword">as</span> data<span class="token keyword">import</span> networks<span class="token keyword">from</span> pathconfig <span class="token keyword">import</span> <span class="token operator">*</span><span class="token keyword">from</span> dataset <span class="token keyword">import</span> <span class="token operator">*</span><span class="token keyword">class</span> <span class="token class-name">Trainer</span><span class="token punctuation">(</span>object<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> network<span class="token punctuation">:</span> networks<span class="token punctuation">.</span>_NetworkBase<span class="token punctuation">,</span> dim2use<span class="token punctuation">:</span> typing<span class="token punctuation">.</span>List<span class="token punctuation">[</span>int<span class="token punctuation">]</span><span class="token operator">=</span>None<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> None<span class="token punctuation">:</span>        super<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>start_time<span class="token punctuation">:</span> str <span class="token operator">=</span> datetime<span class="token punctuation">.</span>datetime<span class="token punctuation">.</span>now<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__str__<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">"."</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>        self<span class="token punctuation">.</span>select_device<span class="token punctuation">(</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>reproducibile<span class="token punctuation">(</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>network <span class="token operator">=</span> network<span class="token punctuation">.</span>to<span class="token punctuation">(</span>device<span class="token operator">=</span>self<span class="token punctuation">.</span>device<span class="token punctuation">)</span>        self<span class="token punctuation">.</span>suffix<span class="token punctuation">:</span> str <span class="token operator">=</span> self<span class="token punctuation">.</span>network<span class="token punctuation">.</span>__class__<span class="token punctuation">.</span>__name__        self<span class="token punctuation">.</span>log_folder<span class="token punctuation">:</span> Path <span class="token operator">=</span> Paths<span class="token punctuation">.</span>log_path <span class="token operator">/</span> self<span class="token punctuation">.</span>suffix <span class="token operator">/</span> self<span class="token punctuation">.</span>start_time<span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token string">":"</span><span class="token punctuation">,</span> <span class="token string">"_"</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>checkpoint_path<span class="token punctuation">:</span> Path <span class="token operator">=</span> Paths<span class="token punctuation">.</span>checkpoint_path <span class="token operator">/</span> self<span class="token punctuation">.</span>suffix <span class="token operator">/</span> f<span class="token string">"{self.start_time}.pt"</span><span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token string">":"</span><span class="token punctuation">,</span> <span class="token string">"_"</span><span class="token punctuation">)</span>        <span class="token keyword">if</span> <span class="token operator">not</span> self<span class="token punctuation">.</span>checkpoint_path<span class="token punctuation">.</span>parent<span class="token punctuation">.</span>exists<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            self<span class="token punctuation">.</span>checkpoint_path<span class="token punctuation">.</span>parent<span class="token punctuation">.</span>mkdir<span class="token punctuation">(</span>parents<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>        <span class="token keyword">if</span> <span class="token operator">not</span> self<span class="token punctuation">.</span>log_folder<span class="token punctuation">.</span>exists<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            self<span class="token punctuation">.</span>log_folder<span class="token punctuation">.</span>mkdir<span class="token punctuation">(</span>parents<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>        <span class="token comment" spellcheck="true"># train</span>        self<span class="token punctuation">.</span>train_loader <span class="token operator">=</span> data<span class="token punctuation">.</span>DataLoader<span class="token punctuation">(</span>CovidDataset<span class="token punctuation">(</span>split<span class="token operator">=</span><span class="token string">"train"</span><span class="token punctuation">,</span> dim2use<span class="token operator">=</span>dim2use<span class="token punctuation">)</span><span class="token punctuation">,</span> batch_size<span class="token operator">=</span><span class="token number">64</span><span class="token punctuation">,</span> shuffle<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>val_loader <span class="token operator">=</span> data<span class="token punctuation">.</span>DataLoader<span class="token punctuation">(</span>CovidDataset<span class="token punctuation">(</span>split<span class="token operator">=</span><span class="token string">"val"</span><span class="token punctuation">,</span> dim2use<span class="token operator">=</span>dim2use<span class="token punctuation">)</span><span class="token punctuation">,</span> batch_size<span class="token operator">=</span><span class="token number">64</span><span class="token punctuation">,</span> shuffle<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>        <span class="token comment" spellcheck="true"># mse for regression</span>        self<span class="token punctuation">.</span>lossfunc <span class="token operator">=</span> nn<span class="token punctuation">.</span>MSELoss<span class="token punctuation">(</span>reduction<span class="token operator">=</span><span class="token string">"mean"</span><span class="token punctuation">)</span>        <span class="token comment" spellcheck="true"># self.lossfunc = nn.(reduction="mean")</span>        <span class="token comment" spellcheck="true"># visualize</span>        self<span class="token punctuation">.</span>train_loss<span class="token punctuation">:</span> typing<span class="token punctuation">.</span>List<span class="token punctuation">[</span>float<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>        self<span class="token punctuation">.</span>val_loss<span class="token punctuation">:</span> typing<span class="token punctuation">.</span>List<span class="token punctuation">[</span>float<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>        self<span class="token punctuation">.</span>min_val_loss<span class="token punctuation">:</span> float <span class="token operator">=</span> float<span class="token punctuation">(</span><span class="token string">"inf"</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>axes<span class="token punctuation">:</span> Axes        _<span class="token punctuation">,</span> self<span class="token punctuation">.</span>axes <span class="token operator">=</span> plt<span class="token punctuation">.</span>subplots<span class="token punctuation">(</span>nrows<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> ncols<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">18</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">select_device</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        self<span class="token punctuation">.</span>device <span class="token operator">=</span> <span class="token string">"cuda"</span> <span class="token keyword">if</span> torch<span class="token punctuation">.</span>cuda<span class="token punctuation">.</span>is_available<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">else</span> <span class="token string">"cpu"</span>        <span class="token keyword">def</span> <span class="token function">reproducibile</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> seed<span class="token punctuation">:</span> int<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        np<span class="token punctuation">.</span>random<span class="token punctuation">.</span>seed<span class="token punctuation">(</span>seed<span class="token operator">=</span>seed<span class="token punctuation">)</span>        torch<span class="token punctuation">.</span>manual_seed<span class="token punctuation">(</span>seed<span class="token operator">=</span>seed<span class="token punctuation">)</span>        <span class="token comment" spellcheck="true"># no optimization for convolution</span>        torch<span class="token punctuation">.</span>backends<span class="token punctuation">.</span>cudnn<span class="token punctuation">.</span>benchmark <span class="token operator">=</span> <span class="token boolean">False</span>        <span class="token comment" spellcheck="true"># use default convolution algorithm</span>        torch<span class="token punctuation">.</span>backends<span class="token punctuation">.</span>cudnn<span class="token punctuation">.</span>deterministic <span class="token operator">=</span> <span class="token boolean">True</span>        <span class="token keyword">if</span> self<span class="token punctuation">.</span>device <span class="token operator">==</span> <span class="token string">"cuda"</span><span class="token punctuation">:</span>            torch<span class="token punctuation">.</span>cuda<span class="token punctuation">.</span>manual_seed<span class="token punctuation">(</span>seed<span class="token operator">=</span>seed<span class="token punctuation">)</span>            torch<span class="token punctuation">.</span>cuda<span class="token punctuation">.</span>manual_seed<span class="token punctuation">(</span>seed<span class="token operator">=</span>seed<span class="token punctuation">)</span>        <span class="token keyword">def</span> <span class="token function">visualize</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> val_loss<span class="token punctuation">:</span> float<span class="token punctuation">,</span> train_loss<span class="token punctuation">:</span> float<span class="token punctuation">)</span><span class="token punctuation">:</span>        plt<span class="token punctuation">.</span>ion<span class="token punctuation">(</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>axes<span class="token punctuation">.</span>cla<span class="token punctuation">(</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>axes<span class="token punctuation">.</span>set_ylim<span class="token punctuation">(</span><span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">400.0</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>axes<span class="token punctuation">.</span>set_xlabel<span class="token punctuation">(</span><span class="token string">"steps"</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>axes<span class="token punctuation">.</span>set_ylabel<span class="token punctuation">(</span><span class="token string">"loss / MSE"</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>axes<span class="token punctuation">.</span>set_title<span class="token punctuation">(</span>f<span class="token string">"{self.suffix}-{self.start_time}"</span><span class="token punctuation">)</span>                x_train <span class="token operator">=</span> range<span class="token punctuation">(</span>len<span class="token punctuation">(</span>self<span class="token punctuation">.</span>train_loss<span class="token punctuation">)</span><span class="token punctuation">)</span>        x_val <span class="token operator">=</span> x_train<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">:</span>len<span class="token punctuation">(</span>self<span class="token punctuation">.</span>train_loss<span class="token punctuation">)</span> <span class="token operator">//</span> len<span class="token punctuation">(</span>self<span class="token punctuation">.</span>val_loss<span class="token punctuation">)</span><span class="token punctuation">]</span>        self<span class="token punctuation">.</span>axes<span class="token punctuation">.</span>plot<span class="token punctuation">(</span>x_train<span class="token punctuation">,</span> self<span class="token punctuation">.</span>train_loss<span class="token punctuation">,</span> c<span class="token operator">=</span><span class="token string">"tab:red"</span><span class="token punctuation">,</span> label<span class="token operator">=</span><span class="token string">"train loss"</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>axes<span class="token punctuation">.</span>plot<span class="token punctuation">(</span>x_val<span class="token punctuation">,</span> self<span class="token punctuation">.</span>val_loss<span class="token punctuation">,</span> c<span class="token operator">=</span><span class="token string">"tab:cyan"</span><span class="token punctuation">,</span> label<span class="token operator">=</span><span class="token string">"val loss"</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>axes<span class="token punctuation">.</span>plot<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> label<span class="token operator">=</span>f<span class="token string">"min_val_loss: {self.min_val_loss:>5.4f}"</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>axes<span class="token punctuation">.</span>plot<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> label<span class="token operator">=</span>f<span class="token string">"val/train loss: {val_loss:>5.4f}/{train_loss:>5.4f}"</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>axes<span class="token punctuation">.</span>text<span class="token punctuation">(</span>x<span class="token operator">=</span>len<span class="token punctuation">(</span>self<span class="token punctuation">.</span>train_loss<span class="token punctuation">)</span><span class="token operator">//</span><span class="token number">2</span><span class="token punctuation">,</span> y<span class="token operator">=</span><span class="token number">200</span><span class="token punctuation">,</span> s<span class="token operator">=</span>f<span class="token string">"Current loss: {self.train_loss[-1]:>5.4f}"</span><span class="token punctuation">,</span> fontsize<span class="token operator">=</span><span class="token number">24</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>axes<span class="token punctuation">.</span>legend<span class="token punctuation">(</span><span class="token punctuation">)</span>        plt<span class="token punctuation">.</span>pause<span class="token punctuation">(</span><span class="token number">0.05</span><span class="token punctuation">)</span>        plt<span class="token punctuation">.</span>ioff<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">save</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> epoch<span class="token punctuation">:</span> int<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">print</span><span class="token punctuation">(</span>f<span class="token string">"Saving model at {Fore.GREEN}{Style.BRIGHT}{epoch}{Style.RESET_ALL} epoch, val_loss = {Fore.GREEN}{Style.BRIGHT}{self.min_val_loss}{Style.RESET_ALL}"</span><span class="token punctuation">)</span>        torch<span class="token punctuation">.</span>save<span class="token punctuation">(</span>self<span class="token punctuation">.</span>network<span class="token punctuation">.</span>state_dict<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> f<span class="token operator">=</span>self<span class="token punctuation">.</span>checkpoint_path<span class="token punctuation">)</span>        <span class="token keyword">def</span> <span class="token function">lossfunc_l2</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> target<span class="token punctuation">,</span> pred<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> torch<span class="token punctuation">.</span>Tensor<span class="token punctuation">:</span>        loss <span class="token operator">=</span> self<span class="token punctuation">.</span>lossfunc<span class="token punctuation">(</span>target<span class="token punctuation">,</span> pred<span class="token punctuation">)</span>        norm_loss <span class="token operator">=</span> <span class="token number">0</span>        <span class="token keyword">for</span> param <span class="token keyword">in</span> self<span class="token punctuation">.</span>network<span class="token punctuation">.</span>parameters<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            norm_loss <span class="token operator">+=</span> torch<span class="token punctuation">.</span>sum<span class="token punctuation">(</span>param<span class="token operator">**</span><span class="token number">2</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> loss <span class="token operator">+</span> norm_loss <span class="token operator">*</span> <span class="token number">0.00075</span>        @torch<span class="token punctuation">.</span>no_grad<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">validation</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        loss <span class="token operator">=</span> <span class="token number">0</span>        x<span class="token punctuation">:</span> torch<span class="token punctuation">.</span>Tensor        y<span class="token punctuation">:</span> torch<span class="token punctuation">.</span>Tensor        self<span class="token punctuation">.</span>network<span class="token punctuation">.</span>eval<span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token keyword">for</span> x<span class="token punctuation">,</span> y <span class="token keyword">in</span> self<span class="token punctuation">.</span>val_loader<span class="token punctuation">:</span>            x<span class="token punctuation">,</span> y <span class="token operator">=</span> x<span class="token punctuation">.</span>to<span class="token punctuation">(</span>device<span class="token operator">=</span>self<span class="token punctuation">.</span>device<span class="token punctuation">,</span> dtype<span class="token operator">=</span>self<span class="token punctuation">.</span>network<span class="token punctuation">.</span>dtype<span class="token punctuation">)</span><span class="token punctuation">,</span> y<span class="token punctuation">.</span>to<span class="token punctuation">(</span>device<span class="token operator">=</span>self<span class="token punctuation">.</span>device<span class="token punctuation">,</span> dtype<span class="token operator">=</span>self<span class="token punctuation">.</span>network<span class="token punctuation">.</span>dtype<span class="token punctuation">)</span>            y_pred<span class="token punctuation">:</span> torch<span class="token punctuation">.</span>Tensor <span class="token operator">=</span> self<span class="token punctuation">.</span>network<span class="token punctuation">(</span>x<span class="token punctuation">)</span>            <span class="token comment" spellcheck="true"># loss += self.lossfunc(y, y_pred.squeeze()).sqrt()</span>            <span class="token comment" spellcheck="true"># loss = self.lossfunc_l2(y, y_pred.squeeze())</span>            loss <span class="token operator">+=</span> self<span class="token punctuation">.</span>lossfunc<span class="token punctuation">(</span>y<span class="token punctuation">,</span> y_pred<span class="token punctuation">.</span>squeeze<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        l<span class="token punctuation">:</span> torch<span class="token punctuation">.</span>Tensor        self<span class="token punctuation">.</span>val_loss<span class="token punctuation">.</span>append<span class="token punctuation">(</span>l<span class="token punctuation">:</span><span class="token operator">=</span><span class="token punctuation">(</span>loss<span class="token operator">/</span>len<span class="token punctuation">(</span>self<span class="token punctuation">.</span>val_loader<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>cpu<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>item<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token keyword">return</span> l    <span class="token keyword">def</span> <span class="token function">train</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> lr<span class="token punctuation">:</span> float<span class="token operator">=</span><span class="token number">1e</span><span class="token operator">-</span><span class="token number">4</span><span class="token punctuation">,</span> wd<span class="token punctuation">:</span> float<span class="token operator">=</span><span class="token number">0.9</span><span class="token punctuation">,</span> n_epoch<span class="token punctuation">:</span> int<span class="token operator">=</span><span class="token number">3000</span><span class="token punctuation">,</span> momentum<span class="token operator">=</span><span class="token number">0.9</span><span class="token punctuation">,</span> early_stop<span class="token punctuation">:</span> int<span class="token operator">=</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        msg<span class="token punctuation">:</span> str <span class="token operator">=</span> input<span class="token punctuation">(</span><span class="token string">"è¯·è¾“å…¥æœ¬æ¬¡è®­ç»ƒçš„æ—¥å¿—è®°å½•ï¼š"</span><span class="token punctuation">)</span>        <span class="token comment" spellcheck="true"># optimizer = optim.SGD(self.network.parameters(), lr=lr, weight_decay=wd, momentum=momentum)</span>        optimizer <span class="token operator">=</span> optim<span class="token punctuation">.</span>AdamW<span class="token punctuation">(</span>self<span class="token punctuation">.</span>network<span class="token punctuation">.</span>parameters<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> lr<span class="token operator">=</span>lr<span class="token punctuation">,</span> weight_decay<span class="token operator">=</span>wd<span class="token punctuation">)</span>        <span class="token keyword">with</span> open<span class="token punctuation">(</span>self<span class="token punctuation">.</span>log_folder<span class="token punctuation">.</span>joinpath<span class="token punctuation">(</span><span class="token string">"message.txt"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"w"</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>            f<span class="token punctuation">.</span>write<span class="token punctuation">(</span>msg<span class="token operator">+</span><span class="token string">"\n"</span><span class="token punctuation">)</span>            f<span class="token punctuation">.</span>write<span class="token punctuation">(</span>f<span class="token string">"epoch: {n_epoch}, lr: {lr}, wd: {wd}, early_stop: {early_stop}, optimizer: {optimizer.__class__.__name__}\n"</span><span class="token punctuation">)</span>        early_stop_cnt <span class="token operator">=</span> <span class="token number">0</span>        <span class="token keyword">for</span> epoch <span class="token keyword">in</span> range<span class="token punctuation">(</span>n_epoch<span class="token punctuation">)</span><span class="token punctuation">:</span>            x<span class="token punctuation">:</span> torch<span class="token punctuation">.</span>Tensor            y<span class="token punctuation">:</span> torch<span class="token punctuation">.</span>Tensor            self<span class="token punctuation">.</span>network<span class="token punctuation">.</span>train<span class="token punctuation">(</span><span class="token punctuation">)</span>            train_loss<span class="token punctuation">:</span> float <span class="token operator">=</span> <span class="token number">0</span>            <span class="token keyword">for</span> x<span class="token punctuation">,</span> y <span class="token keyword">in</span> self<span class="token punctuation">.</span>train_loader<span class="token punctuation">:</span>                optimizer<span class="token punctuation">.</span>zero_grad<span class="token punctuation">(</span><span class="token punctuation">)</span>                x<span class="token punctuation">,</span> y <span class="token operator">=</span> x<span class="token punctuation">.</span>to<span class="token punctuation">(</span>device<span class="token operator">=</span>self<span class="token punctuation">.</span>device<span class="token punctuation">,</span> dtype<span class="token operator">=</span>self<span class="token punctuation">.</span>network<span class="token punctuation">.</span>dtype<span class="token punctuation">)</span><span class="token punctuation">,</span> y<span class="token punctuation">.</span>to<span class="token punctuation">(</span>device<span class="token operator">=</span>self<span class="token punctuation">.</span>device<span class="token punctuation">,</span> dtype<span class="token operator">=</span>self<span class="token punctuation">.</span>network<span class="token punctuation">.</span>dtype<span class="token punctuation">)</span>                y_pred<span class="token punctuation">:</span> torch<span class="token punctuation">.</span>Tensor <span class="token operator">=</span> self<span class="token punctuation">.</span>network<span class="token punctuation">(</span>x<span class="token punctuation">)</span>                loss<span class="token punctuation">:</span> torch<span class="token punctuation">.</span>Tensor <span class="token operator">=</span> self<span class="token punctuation">.</span>lossfunc<span class="token punctuation">(</span>y<span class="token punctuation">,</span> y_pred<span class="token punctuation">.</span>squeeze<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                <span class="token comment" spellcheck="true"># loss = self.lossfunc_l2(y, y_pred.squeeze())</span>                <span class="token comment" spellcheck="true"># loss = loss.sqrt()</span>                loss<span class="token punctuation">.</span>backward<span class="token punctuation">(</span><span class="token punctuation">)</span>                optimizer<span class="token punctuation">.</span>step<span class="token punctuation">(</span><span class="token punctuation">)</span>                train_loss <span class="token operator">+=</span> loss<span class="token punctuation">.</span>clone<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>detach<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>cpu<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>squeeze<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>item<span class="token punctuation">(</span><span class="token punctuation">)</span>                self<span class="token punctuation">.</span>train_loss<span class="token punctuation">.</span>append<span class="token punctuation">(</span>loss<span class="token punctuation">.</span>clone<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>detach<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>cpu<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>squeeze<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>item<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>            train_loss <span class="token operator">=</span> <span class="token punctuation">(</span>train_loss <span class="token operator">/</span> len<span class="token punctuation">(</span>self<span class="token punctuation">.</span>train_loader<span class="token punctuation">)</span><span class="token punctuation">)</span>            val_loss <span class="token operator">=</span> self<span class="token punctuation">.</span>validation<span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token keyword">if</span> val_loss <span class="token operator">&lt;</span> self<span class="token punctuation">.</span>min_val_loss<span class="token punctuation">:</span>                self<span class="token punctuation">.</span>min_val_loss <span class="token operator">=</span> val_loss                early_stop_cnt <span class="token operator">=</span> <span class="token number">0</span>                self<span class="token punctuation">.</span>save<span class="token punctuation">(</span>epoch<span class="token operator">=</span>epoch<span class="token punctuation">)</span>            <span class="token keyword">else</span><span class="token punctuation">:</span>                early_stop_cnt <span class="token operator">+=</span> <span class="token number">1</span>            self<span class="token punctuation">.</span>visualize<span class="token punctuation">(</span>val_loss<span class="token operator">=</span>val_loss<span class="token punctuation">,</span> train_loss<span class="token operator">=</span>train_loss<span class="token punctuation">)</span>            <span class="token keyword">if</span> early_stop_cnt <span class="token operator">>=</span> early_stop<span class="token punctuation">:</span>                <span class="token keyword">break</span>        <span class="token keyword">print</span><span class="token punctuation">(</span>green<span class="token punctuation">(</span>f<span class="token string">"Training stopped at {epoch}"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token keyword">print</span><span class="token punctuation">(</span>green<span class="token punctuation">(</span><span class="token string">"Saving trainig log"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token keyword">with</span> open<span class="token punctuation">(</span>self<span class="token punctuation">.</span>log_folder<span class="token punctuation">.</span>joinpath<span class="token punctuation">(</span><span class="token string">"train_val.loss.pkl"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"wb"</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>            pickle<span class="token punctuation">.</span>dump<span class="token punctuation">(</span>                <span class="token punctuation">{</span>                    <span class="token string">"val"</span><span class="token punctuation">:</span> self<span class="token punctuation">.</span>val_loss<span class="token punctuation">,</span>                    <span class="token string">"train"</span><span class="token punctuation">:</span> self<span class="token punctuation">.</span>train_loss<span class="token punctuation">,</span>                    <span class="token string">"min_val"</span><span class="token punctuation">:</span> self<span class="token punctuation">.</span>min_val_loss                <span class="token punctuation">}</span><span class="token punctuation">,</span> file<span class="token operator">=</span>f            <span class="token punctuation">)</span>        plt<span class="token punctuation">.</span>savefig<span class="token punctuation">(</span>self<span class="token punctuation">.</span>log_folder<span class="token punctuation">.</span>joinpath<span class="token punctuation">(</span><span class="token string">"train_log.png"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__str__<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> dpi<span class="token operator">=</span><span class="token number">300</span><span class="token punctuation">)</span>        <span class="token comment" spellcheck="true"># @torch.no_grad()</span>    <span class="token comment" spellcheck="true"># def get_presudo</span><span class="token keyword">def</span> <span class="token function">baseline</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    b <span class="token operator">=</span> networks<span class="token punctuation">.</span>Baseline<span class="token punctuation">(</span>in_features<span class="token operator">=</span><span class="token number">93</span><span class="token punctuation">)</span>    t <span class="token operator">=</span> Trainer<span class="token punctuation">(</span>network<span class="token operator">=</span>b<span class="token punctuation">)</span>    t<span class="token punctuation">.</span>train<span class="token punctuation">(</span>wd<span class="token operator">=</span><span class="token number">0.5</span><span class="token punctuation">)</span><span class="token keyword">def</span> <span class="token function">previous2day</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    dim2use <span class="token operator">=</span> list<span class="token punctuation">(</span>range<span class="token punctuation">(</span><span class="token number">40</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    dim2use<span class="token punctuation">.</span>extend<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">57</span><span class="token punctuation">,</span> <span class="token number">75</span><span class="token punctuation">]</span><span class="token punctuation">)</span>    b <span class="token operator">=</span> networks<span class="token punctuation">.</span>Baseline<span class="token punctuation">(</span>in_features<span class="token operator">=</span><span class="token number">42</span><span class="token punctuation">)</span>    t <span class="token operator">=</span> Trainer<span class="token punctuation">(</span>network<span class="token operator">=</span>b<span class="token punctuation">,</span> dim2use<span class="token operator">=</span>dim2use<span class="token punctuation">)</span>    t<span class="token punctuation">.</span>train<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">def</span> <span class="token function">selected_feature</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    dim2use <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">76</span><span class="token punctuation">,</span> <span class="token number">58</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span>    b <span class="token operator">=</span> networks<span class="token punctuation">.</span>Baseline<span class="token punctuation">(</span>in_features<span class="token operator">=</span>len<span class="token punctuation">(</span>dim2use<span class="token punctuation">)</span><span class="token punctuation">)</span>    t <span class="token operator">=</span> Trainer<span class="token punctuation">(</span>network<span class="token operator">=</span>b<span class="token punctuation">,</span> dim2use<span class="token operator">=</span>dim2use<span class="token punctuation">)</span>    t<span class="token punctuation">.</span>train<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">def</span> <span class="token function">residual</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token comment" spellcheck="true"># dim2use = np.array([76, 58]) - 1</span>    dim2use <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">75</span><span class="token punctuation">,</span> <span class="token number">57</span><span class="token punctuation">,</span> <span class="token number">42</span><span class="token punctuation">,</span> <span class="token number">60</span><span class="token punctuation">,</span> <span class="token number">78</span><span class="token punctuation">,</span> <span class="token number">43</span><span class="token punctuation">,</span> <span class="token number">61</span><span class="token punctuation">,</span> <span class="token number">79</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">,</span> <span class="token number">58</span><span class="token punctuation">,</span> <span class="token number">76</span><span class="token punctuation">,</span> <span class="token number">41</span><span class="token punctuation">,</span> <span class="token number">59</span><span class="token punctuation">,</span> <span class="token number">77</span><span class="token punctuation">]</span><span class="token punctuation">)</span>    <span class="token comment" spellcheck="true"># dim2use = np.array([76, 58, 43, 61, 79, 44, 62, 80, 41, 59, 77, 42, 60, 78, 93, 75, 57, 88, 70, 52, 84, 66, 48]) - 1</span>    <span class="token comment" spellcheck="true"># dim2use = np.array([75, 57, 61, 79, 43, 78, 60, 42, 91, 73, 83, 80, 68, 62, 40, 86, 65, 77, 85, 67, 55, 49])</span>    d <span class="token operator">=</span> networks<span class="token punctuation">.</span>DeeperNet<span class="token punctuation">(</span>in_features<span class="token operator">=</span>len<span class="token punctuation">(</span>dim2use<span class="token punctuation">)</span><span class="token punctuation">)</span>    t <span class="token operator">=</span> Trainer<span class="token punctuation">(</span>network<span class="token operator">=</span>d<span class="token punctuation">,</span> dim2use<span class="token operator">=</span>dim2use<span class="token punctuation">)</span>    t<span class="token punctuation">.</span>train<span class="token punctuation">(</span>wd<span class="token operator">=</span><span class="token number">0.5</span><span class="token punctuation">,</span> lr<span class="token operator">=</span><span class="token number">1e</span><span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token keyword">def</span> <span class="token function">normalized</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    dim2use <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">76</span><span class="token punctuation">,</span> <span class="token number">58</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span>    d <span class="token operator">=</span> networks<span class="token punctuation">.</span>DeeperNormalizedNet<span class="token punctuation">(</span>in_features<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span>    t <span class="token operator">=</span> Trainer<span class="token punctuation">(</span>network<span class="token operator">=</span>d<span class="token punctuation">,</span> dim2use<span class="token operator">=</span>dim2use<span class="token punctuation">)</span>    t<span class="token punctuation">.</span>train<span class="token punctuation">(</span>wd<span class="token operator">=</span><span class="token number">0.5</span><span class="token punctuation">)</span><span class="token keyword">def</span> <span class="token function">wider</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    dim2use <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">76</span><span class="token punctuation">,</span> <span class="token number">58</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span>    w <span class="token operator">=</span> networks<span class="token punctuation">.</span>WideNet<span class="token punctuation">(</span>in_features<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span>    t <span class="token operator">=</span> Trainer<span class="token punctuation">(</span>network<span class="token operator">=</span>w<span class="token punctuation">,</span> dim2use<span class="token operator">=</span>dim2use<span class="token punctuation">)</span>    t<span class="token punctuation">.</span>train<span class="token punctuation">(</span>wd<span class="token operator">=</span><span class="token number">0.5</span><span class="token punctuation">,</span> lr<span class="token operator">=</span><span class="token number">1e</span><span class="token operator">-</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token keyword">def</span> <span class="token function">other</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    dim2use <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">75</span><span class="token punctuation">,</span> <span class="token number">57</span><span class="token punctuation">,</span> <span class="token number">42</span><span class="token punctuation">,</span> <span class="token number">60</span><span class="token punctuation">,</span> <span class="token number">78</span><span class="token punctuation">,</span> <span class="token number">43</span><span class="token punctuation">,</span> <span class="token number">61</span><span class="token punctuation">,</span> <span class="token number">79</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">,</span> <span class="token number">58</span><span class="token punctuation">,</span> <span class="token number">76</span><span class="token punctuation">,</span> <span class="token number">41</span><span class="token punctuation">,</span> <span class="token number">59</span><span class="token punctuation">,</span> <span class="token number">77</span><span class="token punctuation">]</span><span class="token punctuation">)</span>    o <span class="token operator">=</span> networks<span class="token punctuation">.</span>OtherNet<span class="token punctuation">(</span>in_features<span class="token operator">=</span>len<span class="token punctuation">(</span>dim2use<span class="token punctuation">)</span><span class="token punctuation">)</span>    t <span class="token operator">=</span> Trainer<span class="token punctuation">(</span>network<span class="token operator">=</span>o<span class="token punctuation">,</span> dim2use<span class="token operator">=</span>dim2use<span class="token punctuation">)</span>    t<span class="token punctuation">.</span>train<span class="token punctuation">(</span>wd<span class="token operator">=</span><span class="token number">0.5</span><span class="token punctuation">,</span> lr<span class="token operator">=</span><span class="token number">1e</span><span class="token operator">-</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>    <span class="token comment" spellcheck="true"># baseline()</span>    <span class="token comment" spellcheck="true"># previous2day()</span>    <span class="token comment" spellcheck="true"># selected_feature()</span>    residual<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment" spellcheck="true"># other()</span>    <span class="token comment" spellcheck="true"># normalized()</span>    <span class="token comment" spellcheck="true"># wider()</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="6-gen-submission-py"><a href="#6-gen-submission-py" class="headerlink" title="6. gen_submission.py"></a>6. gen_submission.py</h4><pre class="line-numbers language-python"><code class="language-python"><span class="token keyword">import</span> typing<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np<span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd<span class="token keyword">import</span> torch<span class="token keyword">import</span> torch<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>data <span class="token keyword">as</span> data<span class="token keyword">from</span> dataset <span class="token keyword">import</span> CovidDataset<span class="token keyword">import</span> networks<span class="token keyword">from</span> pathconfig <span class="token keyword">import</span> <span class="token operator">*</span>@torch<span class="token punctuation">.</span>no_grad<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">def</span> <span class="token function">gen_submission</span><span class="token punctuation">(</span>network<span class="token punctuation">:</span>networks<span class="token punctuation">.</span>_NetworkBase<span class="token punctuation">,</span> dim2use<span class="token operator">=</span>None<span class="token punctuation">,</span> save_path<span class="token punctuation">:</span> Path<span class="token operator">=</span>None<span class="token punctuation">)</span><span class="token punctuation">:</span>    test_loader <span class="token operator">=</span> data<span class="token punctuation">.</span>DataLoader<span class="token punctuation">(</span>dataset<span class="token operator">=</span>CovidDataset<span class="token punctuation">(</span>split<span class="token operator">=</span><span class="token string">"test"</span><span class="token punctuation">,</span> dim2use<span class="token operator">=</span>dim2use<span class="token punctuation">)</span><span class="token punctuation">,</span> batch_size<span class="token operator">=</span><span class="token number">64</span><span class="token punctuation">)</span>    result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>    x<span class="token punctuation">:</span> torch<span class="token punctuation">.</span>Tensor    <span class="token keyword">for</span> x <span class="token keyword">in</span> test_loader<span class="token punctuation">:</span>        x <span class="token operator">=</span> x<span class="token punctuation">.</span>to<span class="token punctuation">(</span>device<span class="token operator">=</span><span class="token string">"cuda"</span><span class="token punctuation">,</span> dtype<span class="token operator">=</span>network<span class="token punctuation">.</span>dtype<span class="token punctuation">)</span>        y_pred<span class="token punctuation">:</span> torch<span class="token punctuation">.</span>Tensor <span class="token operator">=</span> network<span class="token punctuation">(</span>x<span class="token punctuation">)</span>        result<span class="token punctuation">.</span>extend<span class="token punctuation">(</span>y_pred<span class="token punctuation">.</span>cpu<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>squeeze<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token keyword">if</span> <span class="token operator">not</span> save_path<span class="token punctuation">.</span>parent<span class="token punctuation">.</span>exists<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        save_path<span class="token punctuation">.</span>parent<span class="token punctuation">.</span>mkdir<span class="token punctuation">(</span>parents<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>    result <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span>result<span class="token punctuation">)</span>    <span class="token keyword">with</span> open<span class="token punctuation">(</span>save_path<span class="token punctuation">,</span> <span class="token string">"w"</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>        <span class="token keyword">print</span><span class="token punctuation">(</span>save_path<span class="token punctuation">)</span>        f<span class="token punctuation">.</span>write<span class="token punctuation">(</span><span class="token string">"id,tested_positive\n"</span><span class="token punctuation">)</span>        <span class="token keyword">for</span> id<span class="token punctuation">,</span> r <span class="token keyword">in</span> enumerate<span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">:</span>            f<span class="token punctuation">.</span>write<span class="token punctuation">(</span>f<span class="token string">"{id},{r}\n"</span><span class="token punctuation">)</span><span class="token keyword">def</span> <span class="token function">gen_baseline</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    net <span class="token operator">=</span> networks<span class="token punctuation">.</span>Baseline<span class="token punctuation">(</span>in_features<span class="token operator">=</span><span class="token number">93</span><span class="token punctuation">)</span><span class="token punctuation">.</span>cuda<span class="token punctuation">(</span><span class="token punctuation">)</span>    net<span class="token punctuation">.</span>load_state_dict<span class="token punctuation">(</span>torch<span class="token punctuation">.</span>load<span class="token punctuation">(</span>s<span class="token punctuation">:</span><span class="token operator">=</span>Paths<span class="token punctuation">.</span>checkpoint_path<span class="token punctuation">.</span>joinpath<span class="token punctuation">(</span><span class="token string">"../checkpoint/Baseline/2021-12-12 15_29_31.pt"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    gen_submission<span class="token punctuation">(</span>network<span class="token operator">=</span>net<span class="token punctuation">,</span> dim2use<span class="token operator">=</span>None<span class="token punctuation">,</span> save_path<span class="token operator">=</span>Paths<span class="token punctuation">.</span>submission_path<span class="token punctuation">.</span>joinpath<span class="token punctuation">(</span>net<span class="token punctuation">.</span>__class__<span class="token punctuation">.</span>__name__<span class="token punctuation">,</span> s<span class="token punctuation">.</span>stem<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">"."</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">".csv"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">def</span> <span class="token function">gen2day</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    net <span class="token operator">=</span> networks<span class="token punctuation">.</span>Baseline<span class="token punctuation">(</span>in_features<span class="token operator">=</span><span class="token number">42</span><span class="token punctuation">)</span><span class="token punctuation">.</span>cuda<span class="token punctuation">(</span><span class="token punctuation">)</span>    net<span class="token punctuation">.</span>load_state_dict<span class="token punctuation">(</span>torch<span class="token punctuation">.</span>load<span class="token punctuation">(</span>s<span class="token punctuation">:</span><span class="token operator">=</span>Paths<span class="token punctuation">.</span>checkpoint_path<span class="token punctuation">.</span>joinpath<span class="token punctuation">(</span><span class="token string">"../checkpoint/Baseline/2021-12-12 15_40_58.pt"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    dim2use <span class="token operator">=</span> list<span class="token punctuation">(</span>range<span class="token punctuation">(</span><span class="token number">40</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    dim2use<span class="token punctuation">.</span>extend<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">57</span><span class="token punctuation">,</span> <span class="token number">75</span><span class="token punctuation">]</span><span class="token punctuation">)</span>    gen_submission<span class="token punctuation">(</span>network<span class="token operator">=</span>net<span class="token punctuation">,</span> dim2use<span class="token operator">=</span>dim2use<span class="token punctuation">,</span> save_path<span class="token operator">=</span>Paths<span class="token punctuation">.</span>submission_path<span class="token punctuation">.</span>joinpath<span class="token punctuation">(</span>net<span class="token punctuation">.</span>__class__<span class="token punctuation">.</span>__name__<span class="token punctuation">,</span> s<span class="token punctuation">.</span>stem<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">"."</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">".csv"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">def</span> <span class="token function">feature_selection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token comment" spellcheck="true"># dim2use = np.array([76, 58, 43, 61, 79, 44, 62, 80, 41, 59, 77, 42, 60, 78, 93]) - 1</span>    dim2use <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">76</span><span class="token punctuation">,</span> <span class="token number">58</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span>    net <span class="token operator">=</span> networks<span class="token punctuation">.</span>Baseline<span class="token punctuation">(</span>in_features<span class="token operator">=</span>len<span class="token punctuation">(</span>dim2use<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>cuda<span class="token punctuation">(</span><span class="token punctuation">)</span>    net<span class="token punctuation">.</span>load_state_dict<span class="token punctuation">(</span>torch<span class="token punctuation">.</span>load<span class="token punctuation">(</span>s<span class="token punctuation">:</span><span class="token operator">=</span>Paths<span class="token punctuation">.</span>checkpoint_path<span class="token punctuation">.</span>joinpath<span class="token punctuation">(</span><span class="token string">"../checkpoint/Baseline/2021-12-12 16_33_04.pt"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    gen_submission<span class="token punctuation">(</span>network<span class="token operator">=</span>net<span class="token punctuation">,</span> dim2use<span class="token operator">=</span>dim2use<span class="token punctuation">,</span> save_path<span class="token operator">=</span>Paths<span class="token punctuation">.</span>submission_path<span class="token punctuation">.</span>joinpath<span class="token punctuation">(</span>net<span class="token punctuation">.</span>__class__<span class="token punctuation">.</span>__name__<span class="token punctuation">,</span> s<span class="token punctuation">.</span>stem<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">"."</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">".csv"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">def</span> <span class="token function">residual</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token comment" spellcheck="true"># dim2use = np.array([76, 58, 43, 61, 79, 44, 62, 80, 41, 59, 77, 42, 60, 78, 93]) - 1</span>    <span class="token comment" spellcheck="true"># dim2use = np.array([76, 58]) - 1</span>    dim2use <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">75</span><span class="token punctuation">,</span> <span class="token number">57</span><span class="token punctuation">,</span> <span class="token number">42</span><span class="token punctuation">,</span> <span class="token number">60</span><span class="token punctuation">,</span> <span class="token number">78</span><span class="token punctuation">,</span> <span class="token number">43</span><span class="token punctuation">,</span> <span class="token number">61</span><span class="token punctuation">,</span> <span class="token number">79</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">,</span> <span class="token number">58</span><span class="token punctuation">,</span> <span class="token number">76</span><span class="token punctuation">,</span> <span class="token number">41</span><span class="token punctuation">,</span> <span class="token number">59</span><span class="token punctuation">,</span> <span class="token number">77</span><span class="token punctuation">]</span><span class="token punctuation">)</span>    <span class="token comment" spellcheck="true"># dim2use = np.array([75, 57, 61, 79, 43, 78, 60, 42, 91, 73, 83, 80, 68, 62, 40, 86, 65, 77, 85, 67, 55, 49])</span>    <span class="token comment" spellcheck="true"># dim2use = np.array([76, 58, 43, 61, 79, 44, 62, 80, 41, 59, 77, 42, 60, 78, 93, 75, 57, 88, 70, 52, 84, 66, 48]) - 1</span>    <span class="token comment" spellcheck="true"># dim2use = np.array([75, 57])</span>    net <span class="token operator">=</span> networks<span class="token punctuation">.</span>DeeperNet<span class="token punctuation">(</span>in_features<span class="token operator">=</span>len<span class="token punctuation">(</span>dim2use<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>cuda<span class="token punctuation">(</span><span class="token punctuation">)</span>    net<span class="token punctuation">.</span>load_state_dict<span class="token punctuation">(</span>torch<span class="token punctuation">.</span>load<span class="token punctuation">(</span>s<span class="token punctuation">:</span><span class="token operator">=</span>Paths<span class="token punctuation">.</span>checkpoint_path<span class="token punctuation">.</span>joinpath<span class="token punctuation">(</span><span class="token string">"../checkpoint/DeeperNet/2021-12-13 01_55_10.pt"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    gen_submission<span class="token punctuation">(</span>network<span class="token operator">=</span>net<span class="token punctuation">,</span> dim2use<span class="token operator">=</span>dim2use<span class="token punctuation">,</span> save_path<span class="token operator">=</span>Paths<span class="token punctuation">.</span>submission_path<span class="token punctuation">.</span>joinpath<span class="token punctuation">(</span>net<span class="token punctuation">.</span>__class__<span class="token punctuation">.</span>__name__<span class="token punctuation">,</span> s<span class="token punctuation">.</span>stem<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">"."</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">".csv"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">def</span> <span class="token function">normalize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token comment" spellcheck="true"># dim2use = np.array([76, 58, 43, 61, 79, 44, 62, 80, 41, 59, 77, 42, 60, 78, 93]) - 1</span>    dim2use <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">76</span><span class="token punctuation">,</span> <span class="token number">58</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span>    net <span class="token operator">=</span> networks<span class="token punctuation">.</span>DeeperNormalizedNet<span class="token punctuation">(</span>in_features<span class="token operator">=</span>len<span class="token punctuation">(</span>dim2use<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>cuda<span class="token punctuation">(</span><span class="token punctuation">)</span>    net<span class="token punctuation">.</span>load_state_dict<span class="token punctuation">(</span>torch<span class="token punctuation">.</span>load<span class="token punctuation">(</span>s<span class="token punctuation">:</span><span class="token operator">=</span>Paths<span class="token punctuation">.</span>checkpoint_path<span class="token punctuation">.</span>joinpath<span class="token punctuation">(</span><span class="token string">"../checkpoint/DeeperNormalizedNet/2021-12-12 17_55_08.pt"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    gen_submission<span class="token punctuation">(</span>network<span class="token operator">=</span>net<span class="token punctuation">,</span> dim2use<span class="token operator">=</span>dim2use<span class="token punctuation">,</span> save_path<span class="token operator">=</span>Paths<span class="token punctuation">.</span>submission_path<span class="token punctuation">.</span>joinpath<span class="token punctuation">(</span>net<span class="token punctuation">.</span>__class__<span class="token punctuation">.</span>__name__<span class="token punctuation">,</span> s<span class="token punctuation">.</span>stem<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">"."</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">".csv"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">def</span> <span class="token function">wider</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    dim2use <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">76</span><span class="token punctuation">,</span> <span class="token number">58</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span>    net <span class="token operator">=</span> networks<span class="token punctuation">.</span>WideNet<span class="token punctuation">(</span>in_features<span class="token operator">=</span>len<span class="token punctuation">(</span>dim2use<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>cuda<span class="token punctuation">(</span><span class="token punctuation">)</span>    net<span class="token punctuation">.</span>load_state_dict<span class="token punctuation">(</span>torch<span class="token punctuation">.</span>load<span class="token punctuation">(</span>s<span class="token punctuation">:</span><span class="token operator">=</span>Paths<span class="token punctuation">.</span>checkpoint_path<span class="token punctuation">.</span>joinpath<span class="token punctuation">(</span><span class="token string">"../checkpoint/WideNet/2021-12-12 18_12_38.pt"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    gen_submission<span class="token punctuation">(</span>network<span class="token operator">=</span>net<span class="token punctuation">,</span> dim2use<span class="token operator">=</span>dim2use<span class="token punctuation">,</span> save_path<span class="token operator">=</span>Paths<span class="token punctuation">.</span>submission_path<span class="token punctuation">.</span>joinpath<span class="token punctuation">(</span>net<span class="token punctuation">.</span>__class__<span class="token punctuation">.</span>__name__<span class="token punctuation">,</span> s<span class="token punctuation">.</span>stem<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">"."</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">".csv"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">def</span> <span class="token function">other</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    dim2use <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">75</span><span class="token punctuation">,</span> <span class="token number">57</span><span class="token punctuation">,</span> <span class="token number">42</span><span class="token punctuation">,</span> <span class="token number">60</span><span class="token punctuation">,</span> <span class="token number">78</span><span class="token punctuation">,</span> <span class="token number">43</span><span class="token punctuation">,</span> <span class="token number">61</span><span class="token punctuation">,</span> <span class="token number">79</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">,</span> <span class="token number">58</span><span class="token punctuation">,</span> <span class="token number">76</span><span class="token punctuation">,</span> <span class="token number">41</span><span class="token punctuation">,</span> <span class="token number">59</span><span class="token punctuation">,</span> <span class="token number">77</span><span class="token punctuation">]</span><span class="token punctuation">)</span>    net <span class="token operator">=</span> networks<span class="token punctuation">.</span>OtherNet<span class="token punctuation">(</span>in_features<span class="token operator">=</span>len<span class="token punctuation">(</span>dim2use<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>cuda<span class="token punctuation">(</span><span class="token punctuation">)</span>    net<span class="token punctuation">.</span>load_state_dict<span class="token punctuation">(</span>torch<span class="token punctuation">.</span>load<span class="token punctuation">(</span>s<span class="token punctuation">:</span><span class="token operator">=</span>Paths<span class="token punctuation">.</span>checkpoint_path<span class="token punctuation">.</span>joinpath<span class="token punctuation">(</span><span class="token string">"../checkpoint/OtherNet/2021-12-13 00_49_48.pt"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    gen_submission<span class="token punctuation">(</span>network<span class="token operator">=</span>net<span class="token punctuation">,</span> dim2use<span class="token operator">=</span>dim2use<span class="token punctuation">,</span> save_path<span class="token operator">=</span>Paths<span class="token punctuation">.</span>submission_path<span class="token punctuation">.</span>joinpath<span class="token punctuation">(</span>net<span class="token punctuation">.</span>__class__<span class="token punctuation">.</span>__name__<span class="token punctuation">,</span> s<span class="token punctuation">.</span>stem<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">"."</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">".csv"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>    <span class="token comment" spellcheck="true"># gen_baseline()</span>    <span class="token comment" spellcheck="true"># gen2day()</span>    <span class="token comment" spellcheck="true"># feature_selection()</span>    <span class="token comment" spellcheck="true"># other()</span>    residual<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment" spellcheck="true"># normalize()</span>    <span class="token comment" spellcheck="true"># wider()</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> æå®æ¯…ML2021 Spring Homeworks </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Deep Learning </tag>
            
            <tag> Hungyi Li </tag>
            
            <tag> Machine Learning </tag>
            
            <tag> Neural Network </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æå®æ¯…ML2021 Spring homeworks: hw0 -- æ¦‚è¿°</title>
      <link href="/2021/12/11/li-hong-yi-ml2021-spring-hw0-gai-shu/"/>
      <url>/2021/12/11/li-hong-yi-ml2021-spring-hw0-gai-shu/</url>
      
        <content type="html"><![CDATA[<blockquote><p>æœ¬æ–‡è®²è§£æå®æ¯…ML2021 Spring homeworksç³»åˆ—æ–‡ç« çš„å†™ä½œåŸå› ä»¥åŠç³»åˆ—æ–‡ç« çš„å†™ä½œç›®çš„</p></blockquote><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211207145714311.png" alt="è¯¾ç¨‹å®˜ç½‘"></p><span id="more"></span><h1 id="æå®æ¯…ML2021-Spring-homeworks-hw0-â€“-æ¦‚è¿°"><a href="#æå®æ¯…ML2021-Spring-homeworks-hw0-â€“-æ¦‚è¿°" class="headerlink" title="æå®æ¯…ML2021 Spring homeworks: hw0 â€“ æ¦‚è¿°"></a>æå®æ¯…ML2021 Spring homeworks: hw0 â€“ æ¦‚è¿°</h1><p>æå®æ¯…è€å¸ˆçš„Machine Learning 2021 Springçš„è¯¾ç¨‹æå®æ¯…è€å¸ˆä»¥åŠä¸Šä¼ åˆ°ä»–çš„Youtubeä¸Šäº†ï¼Œå¹¶ä¸”ç³»åˆ—ä½œä¸šä¹Ÿå·²ç»ç»è¿‡æ•´ç†å‘å…¬ä¼—å¼€æ”¾ã€‚ä»Šå¹´çš„MLè¯¾ç¨‹å®Œå…¨å…³æ³¨Deep Learningï¼Œæ­¤å¤–ç»“åˆäº†Kaggleçš„è®¸å¤šå®æˆ˜ã€‚å› æ­¤æœ¬ç³»åˆ—æ–‡ç« è®°å½•äº†æˆ‘åœ¨å®Œæˆä½œä¸šæ—¶å€™çš„å¿ƒå¾—ä¸ä½“ä¼šã€‚</p><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/44fe603d253c2586def6d0e832b5efd6_r.jpg" alt="MLä¸DLçš„å…³ç³»"></p><h2 id="1-å†™ä½œåˆå¿ƒ"><a href="#1-å†™ä½œåˆå¿ƒ" class="headerlink" title="1. å†™ä½œåˆå¿ƒ"></a>1. å†™ä½œåˆå¿ƒ</h2><p>åœ¨2019å¹´æˆ‘åˆšè¿›å…¥å¤§å­¦çš„æ—¶å€™ï¼Œé‚£ä¸ªæ—¶å€™æ·±åº¦å­¦ä¹ å·²ç»ç«çƒ­èµ·æ¥äº†ã€‚åœ¨é‚£ä¸ªæ—¶å€™æˆ‘å°±é€šè¿‡è§‚çœ‹æå®æ¯…è€å¸ˆçš„Machine Learningçš„ç³»åˆ—è¯¾ç¨‹ä»è€Œå¯¹æœºå™¨å­¦ä¹ å’Œæ·±åº¦å­¦ä¹ å…¥é—¨äº†ã€‚</p><p>ç„¶è€Œå¯æƒœçš„æ˜¯ï¼Œç”±äºç§ç§åŸå› ï¼Œåœ¨2019å¹´çš„æ—¶å€™ï¼Œæå®æ¯…è€å¸ˆçš„MLç³»åˆ—è¯¾ç¨‹æˆ‘æœ€ç»ˆæ²¡æœ‰åšæŒä¸‹æ¥å…¨éƒ¨çœ‹å®Œã€‚</p><p>ä¸€æ–¹é¢æ˜¯å—åˆ°äº†å½“æ—¶å­¦è¯†çš„é™åˆ¶ã€‚åœ¨é‚£æ—¶å€™åˆšåˆšè¿›å…¥å¤§å­¦ï¼Œåˆšåˆšå¼€å§‹å­¦ä¹ çº¿æ€§ä»£æ•°ï¼Œå¯¹æ¦‚ç‡è®ºã€å›¾è®ºã€å‡¸ä¼˜åŒ–ã€è®¡ç®—æœºã€å¤šå…ƒé«˜ç­‰æ•°å­¦ç­‰å†…å®¹å®Œå…¨æ²¡æœ‰æ¥è§¦è¿‡ã€‚</p><p>å¦å¤–ä¸€æ–¹é¢å½“æ—¶æ›´åŠ å…³æ³¨ä¸è®¡ç®—æœºåº•å±‚LInuxç­‰å†…å®¹çš„å­¦ä¹ ï¼›æœ€åæ˜¯å¤§ä¸€æ—¶å€™çš„è¯¾æ˜¯çœŸçš„å¤šã€‚</p><p>å› æ­¤æœ€ç»ˆæ²¡æœ‰å¬å®Œ2019å¹´çš„è¯¾ç¨‹ï¼Œéå¸¸çš„å¯æƒœã€‚</p><p>ç°åœ¨å› ä¸ºé™çº§è½¬å…¥è®¡ç®—æœºä¸“ä¸šçš„åŸå› ï¼Œæœ‰äº†å¾ˆå¤šçš„æ—¶é—´ï¼›æ­¤å¤–è‡ªå·±åœ¨ä¸šä½™æ—¶é—´ä¹Ÿå·²ç»æŠŠè®¸å¤šè®¡ç®—æœºçš„è¯¾ç¨‹ã€æ·±åº¦å­¦ä¹ çš„æ•°å­¦åŸç†è¯¾ç¨‹éƒ½å·²ç»å­¦è¿‡äº†ï¼Œç¼–ç¨‹èƒ½åŠ›ä¹Ÿæœ‰äº†éå¸¸å¤§çš„æå‡ã€‚</p><p>åˆæ°é€¢2021å¹´æå®æ¯…è€å¸ˆçš„è¯¾ç¨‹ä¸Šæ¶ã€‚å› æ­¤å†³å®šè¿™ä¸€æ¬¡è¯¦ç»†çš„å­¦å®Œæ‰€æœ‰è¯¾ç¨‹å¹¶å®Œæˆå¯¹åº”çš„ä½œä¸šã€‚</p><p>æ‰€æœ‰çš„ä½œä¸šéƒ½ä»¥åšå®¢çš„å½¢å¼æ¥è®°å½•æˆ‘ç‚¼ä¸¹çš„ç‚¹æ»´ã€‚å¸Œæœ›èƒ½å¤Ÿè§è¯æˆ‘è¿™ä¸€æ®µæ—¶é—´çš„æŠ•å…¥å’Œä»˜å‡ºã€‚</p><h2 id="2-Who-is-Hung-yi-Lee"><a href="#2-Who-is-Hung-yi-Lee" class="headerlink" title="2. Who is Hung-yi Lee"></a>2. Who is Hung-yi Lee</h2><p>As now we are going to have classes of Hung-yi Lee, weâ€™d better have some knowledge of him.</p><p>é¦–å…ˆæ˜¯<code>Wikipedia</code>çš„ä»‹ç»</p><blockquote><p><strong>From wikipedia</strong></p><p>æå®æ¯…ï¼ˆ1985å¹´æˆ–1986å¹´ï¼ï¼‰ï¼Œå°æ¹¾åœ°åŒºè®¡ç®—æœºç§‘å­¦å®¶ï¼Œå›½ç«‹å°æ¹¾å¤§å­¦ç”µæœºå·¥ç¨‹å­¦ç³»å‰¯æ•™æˆï¼Œç ”ç©¶é¢†åŸŸåŒ…æ‹¬è¯­æ„ç†è§£ã€è¯­éŸ³è¾¨è¯†ã€æœºå™¨å­¦ä¹ ã€æ·±åº¦å­¦ä¹ ç­‰ã€‚</p><p>æå®æ¯…åœ¨å¤§å­¦äºŒå¹´çº§æ—¶ï¼Œå› å¯¹ç”µæœºç³»è®¸å¤šè¯¾ç¨‹æ„Ÿåˆ°å›°æƒ‘ï¼Œæ›¾ä¸€åº¦éå¸¸æ²®ä¸§è¿·æƒ˜ï¼Œç”šè‡³èŒç”Ÿäº†é€€å­¦çš„å¿µå¤´ã€‚ä»–å½“æ—¶é€‰äº†ä¸€é—¨â€œæ•°å­—é€šä¿¡å¤„ç†â€è¯¾ç¨‹ï¼Œå‘ç°è‡ªå·±éš¾ä»¥å¬æ‡‚ï¼Œä½†ä»–å¹¶æœªæ”¾å¼ƒï¼Œä¸å¼ƒé€‰ä¸é€€ä¿®ï¼Œæœ€ç»ˆè±ç„¶å¼€æœ—ï¼Œâ€œåŸæ¥ç”¨æ‰‹æœºæ‹¨ç”µè¯ç»™åˆ«äººæ—¶ï¼Œä¸­é—´å‘ç”Ÿçš„äº‹å°±æ˜¯è¿™äº›ä¿¡å·å¤„ç†ã€‚â€æ‰¾åˆ°å­¦ä¹ çš„å…´è¶£åï¼Œæå®æ¯…å¼€å§‹è·Ÿéšä¸­å¤®ç ”ç©¶é™¢æç³å±±é™¢å£«åšé¡¹ç›®ï¼Œéšåäº2010å¹´ä»å›½ç«‹å°æ¹¾å¤§å­¦å–å¾—ç¡•å£«å­¦ä½ï¼Œ2012å¹´å–å¾—åšå£«å­¦ä½ã€‚2012å¹´9æœˆè‡³2013å¹´8æœˆé—´ï¼Œæå®æ¯…äºä¸­å¤®ç ”ç©¶é™¢èµ„è®¯ç§‘æŠ€åˆ›æ–°ç ”ç©¶ä¸­å¿ƒæ‹…ä»»åšå£«åç ”ç©¶å‘˜ã€‚2013å¹´9æœˆä»¥å®¢åº§ç§‘å­¦å®¶èº«ä»½å‰å¾€éº»çœç†å·¥å­¦é™¢è®¡ç®—æœºç§‘å­¦æš¨äººå·¥æ™ºèƒ½å®éªŒå®¤ã€‚2014å¹´è¿”å°ï¼Œæ‹…ä»»å°æ¹¾å¤§å­¦ç”µæœºå·¥ç¨‹å­¦ç³»æ•™å¸ˆè‡³ä»Šã€‚</p><p>2015å¹´ï¼Œæå®æ¯…å¼€å§‹åœ¨å°æ¹¾å¤§å­¦è®²æˆæœºå™¨å­¦ä¹ è¯¾ç¨‹ï¼Œé€‰è¯¾äººæ•°é€šå¸¸çˆ†æ»¡ï¼Œæœ‰400å¤šäººæ¥ä¿®ã€‚äºæ˜¯ï¼Œæå®æ¯…å°†å­¦ç”Ÿåˆ†åœ¨ä¸¤é—´æ•™å®¤ï¼Œä¸€é—´ç°åœºçœ‹è€å¸ˆä¸Šè¯¾ï¼Œå¦ä¸€é—´åŒæ­¥çœ‹ç›´æ’­ã€‚ç”±äºç›´æ’­ä¸Šè¯¾çš„è¯¸å¤šé™åˆ¶ï¼Œæå®æ¯…å…»æˆäº†å½•åˆ¶è¯¾ç¨‹å½±ç‰‡çš„ä¹ æƒ¯ã€‚ä¸€å¼€å§‹æå®æ¯…å°†å½±ç‰‡ä¸Šä¼ è‡³ä¸ªäººä¸»é¡µï¼Œåæ¥ç”±äºè¤å¹•ä¾§å½•è½¯ä»¶çš„åºå·è¿‡æœŸï¼Œæ— æ³•å¯¼å‡ºMP4ï¼Œä½†æœ‰å¯¼å‡ºè‡³YouTubeçš„é€‰é¡¹ï¼Œäºæ˜¯æå®æ¯…å¼€å§‹å°†è¯¾ç¨‹å½±ç‰‡ä¸Šä¼ è‡³YouTubeã€‚æ­¤ä¸¾ä¸ä»…å¸®åŠ©äº†å°æ¹¾å¤§å­¦çš„å­¦ç”Ÿï¼Œè¿˜æ„å¤–å˜‰æƒ å°æ¹¾å¤§å­¦ä»¥å¤–çš„å­¦ç”Ÿã€‚åœ¨å…¶å½±ç‰‡ä¸‹æ–¹ï¼Œè¿˜æœ‰ä¸­å›½å¤§é™†çš„å­¦ç”Ÿç•™è¨€æ„Ÿè°¢ï¼Œè¡¨ç¤ºå·²ç»å¬å®Œå…¨éƒ¨è¯¾ç¨‹ï¼Œå¹¶ç•™ä¸‹ç¬”è®°è¿ç»“ã€‚æˆªè‡³2021å¹´9æœˆ30æ—¥ï¼Œæå®æ¯…çš„YouTubeé¢‘é“æœ‰8.99ä¸‡ä½è®¢é˜…è€…ï¼Œæœ€çƒ­é—¨çš„å½±ç‰‡æœ‰56ä¸‡æ¬¡è§‚çœ‹ã€‚</p><p>æå®æ¯…æ“…é•¿ç”¨æµ…æ˜¾æ˜“æ‡‚çš„è¯­è¨€ï¼Œä»¥å­¦ç”Ÿå–œçˆ±çš„ç²¾çµå®å¯æ¢¦ã€å‡‰å®«æ˜¥æ—¥ç­‰åŠ¨æ¼«æ¥è®²è§£å¤æ‚çš„æœºå™¨å­¦ä¹ æŠ€æœ¯ï¼Œå› æ­¤è¢«äº²åˆ‡åœ°ç§°ä¸ºâ€œç²¾çµå®å¯æ¢¦å¤§å¸ˆâ€ã€‚ä¸­åæ°‘å›½ç”µè„‘å­¦ä¼šç§°æå®æ¯…ä¸ºâ€œç¬¬ä¸€ä¸ªå…¬å¼€æœ‰ç³»ç»Ÿåœ°å®Œæ•´æ·±å…¥è®²è§£æ·±åº¦å­¦ä¹ æŠ€æœ¯çš„å­¦è€…ï¼Œä½¿å¾—åæ–‡çš„æ·±åº¦å­¦ä¹ æ•™å­¦ä¸è‹±æ–‡ä¸–ç•Œå¹¶é©¾é½é©±ã€‚â€</p></blockquote><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211207143939983.png" alt="ç»´åŸºç™¾ç§‘å¯¹è€å¸ˆçš„ä»‹ç»"></p><p>ä»ç»´åŸºç™¾ç§‘çš„ä»‹ç»ä¸­èƒ½å¤Ÿçœ‹å‡ºæ¥ï¼Œæå®æ¯…è€å¸ˆè®²è§£æœºå™¨å­¦ä¹ çš„è¯¾ç¨‹éå¸¸çš„æœ‰è¶£å’Œç”ŸåŠ¨ï¼Œå› æ­¤å¹¿å—æ¬¢è¿ã€‚æˆ‘åœ¨å½“åˆä¹Ÿæ˜¯å—åˆ°äº†æå®æ¯…è€å¸ˆæ—©å¹´çš„è¯¾ç¨‹çš„ç†é™¶ï¼Œæ‰è¿›å…¥äº†ML/DLçš„å¤§é—¨ã€‚</p><h2 id="3-Why-is-Hung-yi-Lee"><a href="#3-Why-is-Hung-yi-Lee" class="headerlink" title="3. Why is Hung-yi Lee"></a>3. Why is Hung-yi Lee</h2><p>ä¸ºä»€ä¹ˆé€‰æ‹©æå®æ¯…è€å¸ˆçš„è¯¾ç¨‹è€Œéå…¶ä»–è€å¸ˆçš„è¯¾ç¨‹ï¼Ÿ</p><p>é¦–å…ˆæ˜¯å› ä¸ºæå®æ¯…è€å¸ˆçš„è¯¾ç¨‹éå¸¸çš„é€šä¿—æ˜“æ‡‚ï¼Œåœ¨è®²è¯¾çš„æ—¶å€™è€å¸ˆä¼šä¸¾å„ç§å„æ ·çš„ä¾‹å­ï¼Œå®å¯æ¢¦ã€å…¨èŒçŒäººã€å‡‰å®«æ˜¥æ—¥ç­‰ç­‰ï¼Œè´´è¿‘ä¸å­¦ç”Ÿçš„è·ç¦»ã€‚</p><p>å…¶æ¬¡æ˜¯å› ä¸ºè€å¸ˆçš„MLçš„è¯¾ç¨‹ä»16å¹´åˆ°ç°åœ¨ä»¥åŠè¿‡å»äº†5å¹´æ—¶é—´äº†ï¼Œåœ¨è¿™äº”å¹´ä¸­è€å¸ˆçš„è¯¾ç¨‹å·²ç»ç»è¿‡äº†é•¿ä¹…çš„æ‰“ç£¨ï¼Œå› æ­¤ä¼šå…·å¤‡ä¸°å¯Œçš„ç»éªŒï¼Œæ‰€ä»¥å­¦èµ·æ¥çš„æ—¶å€™ä½“éªŒä¼šå¥½å¾ˆå¤šã€‚</p><p>æœ€åå°±æ˜¯å…³äºæˆ‘ä¸ªäººçš„åŸå› ï¼Œå› ä¸ºå…ˆå‰æ²¡æœ‰å­¦å®Œè€å¸ˆ2019å¹´çš„è¯¾ç¨‹ï¼Œæ„Ÿåˆ°éå¸¸é—æ†¾ï¼Œæ‰€æƒ³è¦åœ¨2021å¹´å®Œæˆè€å¸ˆçš„è¯¾ç¨‹ï¼Œå¼¥è¡¥å½“å¹´çš„é—æ†¾ã€‚</p><h2 id="4-How-to-learn"><a href="#4-How-to-learn" class="headerlink" title="4. How to learn"></a>4. How to learn</h2><p>æœ¬ç³»åˆ—æ–‡ç« å°†ä¼šè®°å½•æ¯ä¸ªä½œä¸šçš„è¯´æ˜ï¼Œæˆ‘å¯¹æ¯ä¸ªä½œä¸šçš„ç†è§£ä»¥åŠæˆ‘åœ¨å®Œæˆä½œä¸šæ—¶çš„Updateï¼Œåœ¨æœ€åä¼šé™„å¸¦ä¸Šå®Œæ•´çš„é¡¹ç›®ä»£ç ã€‚</p><p>æ‰€ä»¥æ¯ä¸€ä¸ªåšå®¢å¯¹åº”çš„ä¸€ä¸ªä½œä¸šï¼Œå…¶ç»“æ„å¤§æ¦‚ç±»ä¼¼äºä¸‹é¢ï¼š</p><ol><li>ä½œä¸šä»‹ç»</li><li>æˆ‘çš„ä½œä¸šåŠ¨æ€</li><li>æœ€ç»ˆä»£ç </li></ol>]]></content>
      
      
      <categories>
          
          <category> æå®æ¯…ML2021 Spring Homeworks </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Deep Learning </tag>
            
            <tag> Hungyi Li </tag>
            
            <tag> Machine Learning </tag>
            
            <tag> CNN </tag>
            
            <tag> Attention </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åŸºäºhexoçš„ä¸ªäººæŠ€æœ¯åšå®¢æ­å»º Part 4 Markdownç¼–è¾‘å™¨Typoraçš„è®¾ç½®ä»¥åŠè…¾è®¯äº‘å›¾åºŠè®¾ç½®</title>
      <link href="/2021/12/10/ji-yu-hexo-de-ge-ren-ji-zhu-bo-ke-da-jian-part-4-markdown-bian-ji-qi-typora-de-she-zhi-yi-ji-teng-xun-yun-tu-chuang-she-zhi/"/>
      <url>/2021/12/10/ji-yu-hexo-de-ge-ren-ji-zhu-bo-ke-da-jian-part-4-markdown-bian-ji-qi-typora-de-she-zhi-yi-ji-teng-xun-yun-tu-chuang-she-zhi/</url>
      
        <content type="html"><![CDATA[<blockquote><p>å‰é¢æˆ‘ä»¬é€šè¿‡hexoåœ¨æœ¬åœ°æ­å»ºå‡ºäº†é™æ€åšå®¢ç½‘ç«™çš„æ¡†æ¶ï¼Œé‚£ä¹ˆæˆ‘ä»¬è¿˜éœ€è¦ä¸€ä¸ªåˆé€‚çš„Markdownç¼–è¾‘å™¨æ¥å¸®åŠ©æˆ‘ä»¬å¿«ä¹çš„å†™åšå®¢</p></blockquote><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211211015803341.png" alt="æœ€ç»ˆæ•ˆæœå›¾:Nordä¸»é¢˜"></p><span id="more"></span><h1 id="åŸºäºHexoçš„ä¸ªäººæŠ€æœ¯åšå®¢æ­å»º-â€”â€”-Markdownç¼–è¾‘å™¨Typoraçš„è®¾ç½®ä»¥åŠè…¾è®¯äº‘å›¾åºŠè®¾ç½®"><a href="#åŸºäºHexoçš„ä¸ªäººæŠ€æœ¯åšå®¢æ­å»º-â€”â€”-Markdownç¼–è¾‘å™¨Typoraçš„è®¾ç½®ä»¥åŠè…¾è®¯äº‘å›¾åºŠè®¾ç½®" class="headerlink" title="åŸºäºHexoçš„ä¸ªäººæŠ€æœ¯åšå®¢æ­å»º â€”â€”  Markdownç¼–è¾‘å™¨Typoraçš„è®¾ç½®ä»¥åŠè…¾è®¯äº‘å›¾åºŠè®¾ç½®"></a>åŸºäºHexoçš„ä¸ªäººæŠ€æœ¯åšå®¢æ­å»º â€”â€”  Markdownç¼–è¾‘å™¨Typoraçš„è®¾ç½®ä»¥åŠè…¾è®¯äº‘å›¾åºŠè®¾ç½®</h1><p>é€šè¿‡å‰é¢çš„å‡ è®²ï¼Œæˆ‘ä»¬å·²ç»æˆåŠŸçš„åœ¨æœ¬åœ°æ­å»ºå‡ºæ¥äº†ä¸€ä¸ªåšå®¢ç½‘ç«™ï¼Œå¹¶ä¸”è¿›è¡Œäº†ç¾åŒ–ã€‚ç„¶è€Œåšå®¢ç½‘ç«™çš„ç›®çš„åœ¨äºå‘å¸ƒæˆ‘ä»¬è‡ªå·±çš„åšå®¢ï¼Œå› æ­¤æˆ‘ä»¬è¿˜éœ€è¦ä¸€ä¸ªè¶æ‰‹çš„ç¼–è¾‘å™¨æ¥å¸®åŠ©æˆ‘ä»¬ç¼–å†™<code>Markdown</code>æ–‡ç« ã€‚</p><p>ç»è¿‡é‡é‡è€ƒè™‘ï¼Œæˆ‘æœ€ç»ˆçš„åšå®¢å¼€å‘ç¯å¢ƒä¸ºï¼š<code>Typora</code> + è…¾è®¯äº‘å›¾åºŠ + <code>Github</code>æ‰˜ç®¡ç½‘é¡µã€‚</p><p>åœ¨æœ¬ç« å°†è®²è§£Typoraç¼–è¾‘å™¨çš„è®¾ç½®å’Œè…¾è®¯äº‘å›¾åºŠçš„è®¾ç½®ã€‚ä¸‹èŠ‚å°†è®²è§£è…¾è®¯äº‘å›¾åºŠçš„è®¾ç½®ã€‚</p><h2 id="1-What-is-Typora-å›¾åºŠï¼Ÿ"><a href="#1-What-is-Typora-å›¾åºŠï¼Ÿ" class="headerlink" title="1. What is Typora/å›¾åºŠï¼Ÿ"></a>1. What is Typora/å›¾åºŠï¼Ÿ</h2><h3 id="1-Typora"><a href="#1-Typora" class="headerlink" title="1. Typora"></a>1. Typora</h3><p>é¦–å…ˆæ˜¯<code>ç»´åŸºç™¾ç§‘</code>çš„ä»‹ç»</p><blockquote><p><strong>From Wikipidia</strong></p><p>Typoraæ˜¯ä¸€æ¬¾ç”±Abner Leeå¼€å‘çš„è½»é‡çº§Markdownç¼–è¾‘å™¨ï¼Œé€‚ç”¨äºOS Xã€Windowså’ŒLinuxä¸‰ç§æ“ä½œç³»ç»Ÿã€‚ä¸å…¶ä»–Markdownç¼–è¾‘å™¨ä¸åŒçš„æ˜¯ï¼ŒTyporaæ²¡æœ‰é‡‡ç”¨æºä»£ç å’Œé¢„è§ˆåŒæ æ˜¾ç¤ºçš„æ–¹å¼ï¼Œè€Œæ˜¯é‡‡ç”¨æ‰€è§å³æ‰€å¾—çš„ç¼–è¾‘æ–¹å¼ï¼Œå®ç°äº†å³æ—¶é¢„è§ˆçš„åŠŸèƒ½ï¼Œä½†ä¹Ÿå¯åˆ‡æ¢è‡³æºä»£ç ç¼–è¾‘æ¨¡å¼ã€‚</p></blockquote><p>å…¶å®è¯´ç™½äº†ï¼Œ<code>Typora</code>å’Œè®°äº‹æœ¬æ²¡æœ‰ä»»ä½•çš„åŒºåˆ«ï¼Œéƒ½æ˜¯æ‹¿æ¥å†™æ–‡æœ¬æ–‡ä»¶çš„ã€‚åªä¸è¿‡Typoraæ˜¯ä¸“é—¨æ‹¿æ¥å†™Markdownæ–‡ä»¶çš„ã€‚é’ˆå¯¹<code>Markdown</code>æ–‡ä»¶çš„ç¼–å†™ï¼ŒTyporaçš„ä½“éªŒä¼šéå¸¸å¥½ã€‚</p><p>æ­¤å¤–Typoraæ˜¯ä¸€ä¸ªä¸‰å¹³å°é€šç”¨çš„ç¼–è¾‘å™¨ï¼Œè€Œä¸”éå¸¸è½»é‡ï¼Œå› æ­¤å¯¹äºå¤§å‹çš„IDEè€Œè¨€æ‰“å¼€é€Ÿåº¦ä¼šå¿«å¾ˆå¤š</p><h3 id="2-å›¾åºŠ"><a href="#2-å›¾åºŠ" class="headerlink" title="2. å›¾åºŠ"></a>2. å›¾åºŠ</h3><p><code>ç™¾åº¦ç™¾ç§‘</code>çš„ä»‹ç»</p><blockquote><p><strong>From BaiduBaike</strong></p><p>å›¾åºŠä¸€èˆ¬æ˜¯æŒ‡å‚¨å­˜å›¾ç‰‡çš„æœåŠ¡å™¨ï¼Œæœ‰å›½å†…å’Œå›½å¤–ä¹‹åˆ†ã€‚å›½å¤–çš„å›¾åºŠç”±äºæœ‰ç©ºé—´è·ç¦»ç­‰å› ç´ å†³å®šè®¿é—®é€Ÿåº¦å¾ˆæ…¢å½±å“å›¾ç‰‡æ˜¾ç¤ºé€Ÿåº¦ã€‚å›½å†…ä¹Ÿåˆ†ä¸ºå•çº¿ç©ºé—´ã€å¤šçº¿ç©ºé—´å’ŒcdnåŠ é€Ÿä¸‰ç§ã€‚</p></blockquote><p>å…¶å®è¯´ç™½äº†ï¼Œå›¾åºŠå°±ç›¸å½“äºä¸€ä¸ªç›¸å†Œï¼Œç±»ä¼¼äºç™¾åº¦äº‘ç­‰äº‘ç›˜çš„ç›¸å†ŒåŠŸèƒ½ã€‚åªä¸è¿‡å›¾åºŠé‡Œçš„å›¾ç‰‡éƒ½ä¼šæœ‰ä¸€ä¸ªé“¾æ¥ï¼Œé€šè¿‡é“¾æ¥å°±èƒ½å¤Ÿè®¿é—®ã€çœ‹åˆ°è¿™å¼ å›¾ç‰‡ã€‚ä¾‹å¦‚ä¸‹é¢çš„è¿™å¼ å›¾ç‰‡</p><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211207132435763.png" alt="æ ¹æ®é“¾æ¥æ˜¾ç¤ºå›¾åƒ"></p><h2 id="2-Why-Typora-å›¾åºŠï¼Ÿ"><a href="#2-Why-Typora-å›¾åºŠï¼Ÿ" class="headerlink" title="2. Why Typora/å›¾åºŠï¼Ÿ"></a>2. Why Typora/å›¾åºŠï¼Ÿ</h2><h3 id="1-Typora-1"><a href="#1-Typora-1" class="headerlink" title="1. Typora"></a>1. Typora</h3><p>å…¶å®é€‰æ‹©Typoraçš„åŸå› æœ‰å¾ˆå¤šï¼Œå…·ä½“æ¥è¯´å¸å¼•æˆ‘çš„åŸå› æœ‰ä¸‹é¢çš„å‡ ä¸ªï¼š</p><ol><li><p><strong>å¥½ç”¨</strong>ï¼šç”¨Typoraæ¥å†™Markdownçš„ä½“éªŒéå¸¸æµç•…ä¸ç›´è§‚ã€‚å› ä¸ºMarkdownæœ¬èº«å°±æ˜¯ä¸€ä¸ª æ ‡è®°è¯­è¨€ï¼Œæ‰€ä»¥ä¼šæœ‰éå¸¸å¤šçš„æ ‡è®°ç”¨æ¥è¯´æ˜ä¸€æ®µæ–‡æœ¬åº”è¯¥è¢«å±•ç¤ºçš„æ ·å­ï¼Œå…·ä½“æ¥è¯´æ•ˆæœå°±æ˜¯ä¸‹é¢çš„å›¾ç‰‡ä¸­æˆ‘æ­£åœ¨å†™çš„è¿™ç¯‡æ–‡ç« çš„Markdownæºç </p><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211210210326416.png" alt="Markdownçš„æºä»£ç "></p><p>ä½†æ˜¯åœ¨Typoraä¸­ï¼Œæºç å½¢å¼çš„Markdownä¼šè¢«ç›´æ¥è§£æå¹¶æ˜¾ç¤ºå‡ºå¯¹åº”çš„æ•ˆæœï¼Œå› æ­¤ä¼šéå¸¸ç›´è§‚ï¼Œæ–¹ä¾¿ä¹¦å†™ã€‚å…·ä½“æ•ˆæœå¦‚ä¸‹</p><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211210210717942.png" alt="Typoraä¸­çš„å³æ—¶æ˜¾ç¤º"></p></li></ol><ol start="2"><li><p><strong>å¤šå¹³å°äº’é€š</strong>ï¼šå› ä¸ºæˆ‘æœ¬èº«æ˜¯éœ€è¦è¿›è¡Œè½¯ä»¶ç¨‹åºå¼€å‘ã€æ·±åº¦å­¦ä¹ æ¨¡å‹è®­ç»ƒçš„ï¼Œå› æ­¤åœ¨Linuxè¿›è¡Œè¿™äº›æ“ä½œå°±ä¼šéå¸¸çš„èˆ’æœã€‚è€Œæœ‰çš„æ—¶å€™éœ€è¦æˆ‘å»å¤„ç†ä¸€äº›Wordæ–‡æœ¬ã€PPTç­‰ç­‰ã€‚è¿™ä¸ªæ—¶å€™å°±è¿˜æ˜¯éœ€è¦Windowsä¸Šçš„å…¨å®¶æ¡¶ã€‚å› æ­¤å¤šä¸ªå¹³å°ä¸ŠTyporaéƒ½å¯ä»¥ä½¿ç”¨ï¼Œç»“åˆTyporaä»¥æ–‡ä»¶çš„å½¢å¼ä¿å­˜é…ç½®ä¿¡æ¯ï¼Œæˆ‘ä»¬å¯ä»¥åšåˆ°ä¸‰ä¸ªå¹³å°ä¸ŠTyporaçš„æ— ç¼åˆ‡æ¢ï¼Œä¸å­˜åœ¨ä»»ä½•ä½“éªŒçš„å‰²è£‚ï¼Œå› æ­¤éå¸¸çš„èˆ’æœ</p></li><li><p><strong>å¥½çœ‹</strong>ï¼šTyporaæ˜¯åŸºäºNode.jsçš„ç¨‹åºï¼Œå› æ­¤æ”¯æŒè‡ªå·±ç¼–å†™cssæ¥å®šä¹‰æ ·å¼ã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥è‡ªå·±è®¾ç½®Typoraçš„å¤–è§‚ã€‚æ­¤å¤–Typoraè¿˜æœ‰ä¸€ä¸ªä¸é”™çš„çš®è‚¤å¸‚åœºï¼Œå› æ­¤æˆ‘ä»¬å…¶å®å¯ä»¥ä»è¿™ä¸ªå¸‚åœºä¸­ä¸‹è½½çš®è‚¤ç„¶åè¿›è¡Œä½¿ç”¨ã€‚</p><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211207134405026.png" alt="Typoraçš„çš®è‚¤å¸‚åœº"></p></li></ol><ol start="4"><li><p><strong>éå¸¸å¥½çš„å›¾åºŠæ”¯æŒ</strong>ï¼šç¨åæˆ‘ä»¬å…¶å®ä¼šè®²åˆ°å›¾åºŠçš„å¥½å¤„å’Œä¸ºä»€ä¹ˆéœ€è¦å›¾åºŠï¼Œè€Œ<code>Typora</code>å†…ç½®äº†<code>PicGo</code>ï¼Œå¯¹å„å¤§ä¸»æµçš„å›¾åºŠçš„æ”¯æŒéƒ½éå¸¸å¥½ï¼Œå› æ­¤å’Œå›¾åºŠæ­é…ä½¿ç”¨æ•ˆæœå¥‡ä½³ã€‚</p><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211210211710899.png" alt="Typoraä¸­çš„å›¾åºŠè®¾ç½®"></p></li><li><p>â€¦â€¦</p></li></ol><p>æ€»ä¹‹ï¼ŒTyporaæœ‰ç€å¤šç§å¤šæ ·çš„ä¼˜ç‚¹å¸å¼•æˆ‘ï¼Œå› æ­¤æˆ‘çš„åšå®¢ä¸­ä¹Ÿæ˜¯ä½¿ç”¨Typoraä½œä¸ºMarkdownçš„ç¼–è¾‘å™¨ã€‚äº‹å®ä¸Šï¼Œæˆ‘ä»2019å¹´å¼€å§‹å°±å·²ç»ä½¿ç”¨Typoraäº†ï¼Œå¯è°“æ˜¯èµ„æ·±ç”¨æˆ·ã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒTyporaåœ¨ä¹‹å‰å…¨éƒ½æ˜¯æµ‹è¯•ç‰ˆï¼Œä»2021å¹´11æœˆ23æ—¥èµ·å‘å¸ƒäº†1.0ç‰ˆæœ¬ï¼Œå¹¶ä¸”ä»1.0ç‰ˆæœ¬ä»¥åæˆä¸ºæ”¶è´¹è½¯ä»¶ï¼Œå”®ä»·14.99ç¾å…ƒï¼Œçº¦åˆ89RMBã€‚</p><p>ä¸è¿‡å®˜æ–¹ä¹Ÿæ‰¿è¯ºè¿‡1.0ç‰ˆæœ¬ä»¥å‰çš„ç‰ˆæœ¬éƒ½å°†ç»§ç»­ä¿æŒå…è´¹ï¼Œè€Œ1.0ç‰ˆæœ¬ä»¥åçš„ç‰ˆæœ¬éƒ½å°†ä¿æŒæ”¶è´¹ã€‚å…¶å®åœ¨ç°åœ¨æœ€æ–°çš„Typoraå…è´¹ç‰ˆï¼ˆå¤§æ¦‚æ˜¯0.11ï¼‰çš„åŠŸèƒ½å’Œ1.0ç‰ˆæœ¬åŸºæœ¬æ²¡æœ‰å·®åˆ«ï¼Œå› æ­¤å†æ²¡æœ‰æ¨å‡ºå¤§çš„æ›´æ–°ä¹‹å‰/è¶³å¤Ÿå¸å¼•æˆ‘çš„åŠŸèƒ½ä¹‹å‰è¿˜æ˜¯ç»§ç»­ä½¿ç”¨å…è´¹ç‰ˆã€‚å…¶å®å…è´¹ç‰ˆä¹Ÿå·²ç»å¤Ÿå¤§å®¶ä½¿ç”¨äº†ã€‚</p><p>ä¸‹é¢ä¹Ÿä¼šè®²è§£å¦‚ä½•ä¸‹è½½å…è´¹ç‰ˆã€‚</p><h3 id="2-å›¾åºŠ-1"><a href="#2-å›¾åºŠ-1" class="headerlink" title="2. å›¾åºŠ"></a>2. å›¾åºŠ</h3><p>æˆ‘ä»¬é€šè¿‡hexoæ­å»ºçš„åšå®¢å…¶å®æ˜¯ä¸€ä¸ªé™æ€åšå®¢ã€‚é™æ€åšå®¢å°±æ„å‘³ç€åšå®¢ä¸­æ‰€æœ‰çš„ç½‘é¡µèµ„æºéƒ½æ˜¯é™æ€çš„ï¼Œåœ¨ç”¨æˆ·ç‚¹å‡»è¯·æ±‚æ–‡ç« çš„æ—¶å€™ï¼Œæ–‡å­—å’Œå›¾ç‰‡åŒæ—¶è¢«å‘é€è¿‡å»ã€‚ç„¶è€Œæˆ‘ä»¬çš„åšå®¢èµ„æºåœ¨ä¼ è¾“çš„è¿‡ç¨‹ä¸­ï¼Œåšå®¢èµ„æºæ‰€åœ¨çš„æœåŠ¡å™¨çš„ä¼ è¾“å¸¦å®½æœ‰é™ï¼Œå› æ­¤æˆ‘ä»¬å¦‚æœæŠŠå›¾ç‰‡å’Œåšå®¢æ”¾åœ¨åŒä¸€ä¸ªæœåŠ¡å™¨ä¸Šï¼Œä¼ è¾“çš„é€Ÿåº¦å°±ä¼šå¾ˆæ…¢ã€‚æ­¤å¤–æˆ‘ä»¬åé¢ä¹Ÿä¼šè®²è§£ç”¨Githubæ‰˜ç®¡åšå®¢èµ„æºï¼Œæ‰€ä»¥æˆ‘ä»¬æ¯æ¬¡è¿›è¡Œæœ¬åœ°æ¨é€å’Œå¼‚åœ°åŒæ­¥å°±ä¼šå¾ˆæµªè´¹æ—¶é—´ã€‚</p><p>è€Œç”±äºå›¾åºŠæ˜¯æˆ‘ä»¬æŠŠå›¾ç‰‡å­˜æ”¾åœ¨å›¾åºŠå•†å®¶çš„æœåŠ¡å™¨ï¼Œé€šè¿‡ä¸€ä¸ªé“¾æ¥å°±å¯ä»¥è®¿é—®ï¼Œå› æ­¤ä½¿ç”¨å›¾åºŠå°±å¯ä»¥ä½¿å¾—ç”¨æˆ·è®¿é—®æ–‡ç« çš„æ—¶å€™ï¼Œå›¾ç‰‡çš„å¸¦å®½éœ€æ±‚ç”±å›¾åºŠæœåŠ¡å™¨æ‰¿æ‹…ã€‚è€Œå›¾åºŠæœåŠ¡å™¨ä¸€èˆ¬å¸¦å®½éƒ½ä¼šéå¸¸å¤§ã€‚å› æ­¤å°±å¯ä»¥åŠ é€Ÿé¡µé¢çš„åŠ è½½é€Ÿåº¦ï¼ŒåŒæ—¶æ–¹ä¾¿æˆ‘ä»¬è¿›è¡Œæ¨é€å’ŒåŒæ­¥ã€‚</p><p>å¯¹äºæˆ‘ä¸ªäººè€Œè¨€ï¼Œæˆ‘ä½¿ç”¨çš„æ˜¯<strong>è…¾è®¯äº‘å­˜å‚¨æ¡¶ä½œä¸ºå›¾åºŠ</strong>ï¼Œè€Œä¸»è¦åŸå› å°±æ˜¯æˆ‘çš„æœåŠ¡å™¨ä¹Ÿæ˜¯è…¾è®¯äº‘çš„ï¼Œæ‰€ä»¥æˆ‘æ‡’å¾—æ¢æ¥æ¢å»ã€‚<strong>å…¶å®ä»»ä½•çš„å›¾åºŠå‚å•†éƒ½æ˜¯å¯ä»¥çš„ã€‚</strong></p><p>ä¸‹é¢æˆ‘ä»¬ä¼šè®²è§£å¦‚ä½•åˆ›å»ºè…¾è®¯äº‘å›¾åºŠï¼Œä»¥åŠåœ¨Typoraä¸­è®¾ç½®å›¾åºŠã€‚å¯¹äºå…¶ä»–çš„å›¾åºŠåœ¨Typoraä¸­çš„è®¾ç½®å…¶å®æŸ¥ä¸€ä¸‹éƒ½ä¼šæœ‰ã€‚</p><h2 id="3-Typoraè®¾ç½®"><a href="#3-Typoraè®¾ç½®" class="headerlink" title="3. Typoraè®¾ç½®"></a>3. Typoraè®¾ç½®</h2><p>å¯¹äºTyporaçš„è®¾ç½®ï¼Œä¸»è¦åŒ…å«å››ä¸ªæ–¹é¢ï¼šä¸‹è½½å…è´¹ç‰ˆï¼Œ æ¢ä¸ªçš®è‚¤ï¼Œè®¾ç½®å¿«æ·é”®ä»¥åŠå›¾åºŠè®¾ç½®ã€‚ä¸è¿‡ç”±äºå›¾åºŠè®¾ç½®æ˜¯å’Œå›¾åºŠæœ‰å…³çš„ï¼Œå› æ­¤æœ€åçš„å›¾åºŠè®¾ç½®åœ¨å›¾åºŠåˆ›å»ºåé¢è®²</p><h3 id="1-ä¸‹è½½å…è´¹ç‰ˆ"><a href="#1-ä¸‹è½½å…è´¹ç‰ˆ" class="headerlink" title="1. ä¸‹è½½å…è´¹ç‰ˆ"></a>1. ä¸‹è½½å…è´¹ç‰ˆ</h3><p>å…è´¹ç‰ˆå…¶å®åœ¨å®˜ç½‘ä¸­å°±æœ‰åˆ—å‡ºæ¥ã€‚<a href="https://typora.io/">å®˜ç½‘</a>ï¼š<a href="https://typora.io/">https://typora.io/</a></p><p>æˆ‘ä»¬ç‚¹è¿›å»å®˜ç½‘ç¿»åˆ°æœ€åº•ä¸‹ï¼Œæœ‰ä¸€ä¸ª<code>æ‰€æœ‰çš„å†å²æ–‡ä»¶</code></p><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211210214453168.png" alt="å†å²æ–‡ä»¶"></p><p>ç‚¹è¿›å»ä¹‹åç‚¹åˆ°å¼€å‘æµ‹è¯•ç‰ˆæœ¬</p><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211210214545807.png" alt="å¼€å‘æµ‹è¯•ç‰ˆæœ¬"></p><p>ç„¶ååŒæ ·åœ¨æœ€ä¸‹é¢çš„old release</p><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211210215003642.png" alt="æ—§ç‰ˆæœ¬"></p><p>ç‚¹è¿›å»ä¹‹åå°±å¯ä»¥ä¸‹è½½</p><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211210215114073.png" alt="ä¸‹è½½æ—§ç‰ˆæœ¬"></p><p>ç‚¹å‡»ä¹‹åä¸‹è½½å³å¯</p><h3 id="2-è®¾ç½®çš®è‚¤"><a href="#2-è®¾ç½®çš®è‚¤" class="headerlink" title="2. è®¾ç½®çš®è‚¤"></a>2. è®¾ç½®çš®è‚¤</h3><p>å®‰è£…ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥å®‰è£…çš®è‚¤ã€‚å‰é¢è¯´è¿‡ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å¸‚åœºä¸Šä¸‹è½½çš®è‚¤ï¼Œå…¶å®çš®è‚¤å°±æ˜¯cssæ–‡ä»¶åŠ ä¸Šèµ„æºæ–‡ä»¶ã€‚æ‰€ä»¥æˆ‘ä»¬å®‰è£…çš®è‚¤å…¶å®å°±æ˜¯æŠŠä¸‹è½½çš„è¿™äº›èµ„æºç²˜è´´åˆ°çš®è‚¤æ–‡ä»¶å¤¹ä¸­ã€‚</p><p>æˆ‘ä»¬é¦–å…ˆæ‰“å¼€èµ„æºæ–‡ä»¶å¤¹ï¼Œåœ¨å·¦ä¸Šè§’çš„<code>file</code>â€“&gt; <code>preference</code>ä¸­é€‰æ‹©<code>Apprence</code>ï¼Œç„¶åé€‰æ‹©æ‰“å¼€<code>Theme Folder</code></p><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211207141743141.png" alt="æ‰“å¼€ä¸»é¢˜æ–‡ä»¶å¤¹"></p><p>ç„¶ååœ¨çš®è‚¤å¸‚åœºä¸­ä¸‹è½½éœ€è¦çš„çš®è‚¤ï¼Œæˆ‘ä¸‹è½½çš„<code>Nord</code>ï¼Œ<code>Dracula</code>å’Œ<code>Mint</code></p><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211207141909886.png" alt="ä¸‹è½½çš®è‚¤"></p><p>ç„¶åæŠŠä¸‹è½½ä¸‹çš„çš®è‚¤å‹ç¼©æ–‡ä»¶è§£å‹ä¹‹åå¤åˆ¶åˆ°æ‰“å¼€çš„ä¸»é¢˜æ–‡ä»¶å¤¹ä¸­å³å¯ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œçš®è‚¤æœ€é‡è¦çš„æ˜¯cssæ–‡ä»¶ï¼Œè€Œçš®è‚¤åçš„æ–‡ä»¶å¤¹ä¸­æ”¾çš„æ˜¯ä¸€äº›èµ„æºï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦æŠŠcssæ”¾åˆ°æ­£ç¡®çš„ä½ç½®</p><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211207142137820.png" alt="å¤åˆ¶çš®è‚¤åˆ°çš®è‚¤æ–‡ä»¶å¤¹ä¸­"></p><p>æœ€åé‡å¯Typoraå°±å¯ä»¥åœ¨å·¦ä¸Šè§’çš„Themesä¸­é€‰æ‹©çš®è‚¤</p><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211207142227515.png" alt="é€‰æ‹©çš®è‚¤"></p><p>é€‰æ‹©<code>Mint</code>ä¸»é¢˜çœ‹çœ‹æ•ˆæœ</p><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211207142620434.png" alt="Mintä¸»é¢˜æ•ˆæœ"></p><h3 id="3-è®¾ç½®å¿«æ·é”®"><a href="#3-è®¾ç½®å¿«æ·é”®" class="headerlink" title="3. è®¾ç½®å¿«æ·é”®"></a>3. è®¾ç½®å¿«æ·é”®</h3><p>Typoraçš„å¿«æ·é”®è®¾ç½®å…¶å®æ˜¯é€šè¿‡ä¸€ä¸ªjsonæ–‡ä»¶å®Œæˆï¼Œå› æ­¤æˆ‘ä»¬åœ¨è¿™ä¸ªJsonæ–‡ä»¶ä¸­ç¼–è¾‘å¿«æ·é”®å³å¯</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæˆ‘ä»¬éœ€è¦é¦–å…ˆåœ¨è‹±æ–‡ç‰ˆä¸­æŸ¥çœ‹éœ€è¦è®¾ç½®å¿«æ·é”®çš„åŠŸèƒ½çš„åç§°ï¼Œä¾‹å¦‚æˆ‘ä»¬éœ€è¦è®¾ç½®å¿«æ·æ’å…¥ä»£ç æ¡†Codeï¼ˆæˆ‘è¿™é‡Œæ˜¯ä»¥åŠè®¾ç½®è¿‡äº†ï¼‰</p><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211207141509346.png" alt="æŸ¥çœ‹åŠŸèƒ½åç§°"></p><p>ç„¶åæˆ‘ä»¬æ‰“å¼€Preferenceä¸­çš„Generalï¼Œç„¶åæ‰“å¼€åœ¨keyBindingä¸­è®¾ç½®åŠŸèƒ½å’Œå¯¹åº”çš„é”®å³å¯ã€‚</p><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211210222113923.png" alt="image-20211210222113923"></p><h2 id="4-è…¾è®¯äº‘å›¾åºŠåˆ›å»ºä»¥åŠTyporaé…ç½®"><a href="#4-è…¾è®¯äº‘å›¾åºŠåˆ›å»ºä»¥åŠTyporaé…ç½®" class="headerlink" title="4. è…¾è®¯äº‘å›¾åºŠåˆ›å»ºä»¥åŠTyporaé…ç½®"></a>4. è…¾è®¯äº‘å›¾åºŠåˆ›å»ºä»¥åŠTyporaé…ç½®</h2><p>å…³äºè…¾è®¯äº‘å›¾åºŠçš„é…ç½®ï¼Œå‚è€ƒè¿™ç¯‡<a href="https://blog.51cto.com/u_15070902/3764737">æ–‡ç« </a>ï¼š<a href="https://blog.51cto.com/u_15070902/3764737">https://blog.51cto.com/u_15070902/3764737</a></p><p>æœ€é€šè¿‡è¿™æ ·çš„é…ç½®ï¼Œæˆ‘ä»¬å°±å®Œæˆäº†Typoraçš„è®¾ç½®ä¸å›¾åºŠçš„æ­é…ï¼Œç°åœ¨å¼€å§‹æˆ‘ä»¬å°±å¯ä»¥å¿«ä¹çš„å¼€å§‹å†™åšå®¢äº† <span class="github-emoji"><span>ğŸ˜†</span><img src="https://github.githubassets.com/images/icons/emoji/unicode/1f606.png?v8" aria-hidden="true" onerror="this.parent.classList.add('github-emoji-fallback')"></span></p>]]></content>
      
      
      <categories>
          
          <category> Hexoåšå®¢æ­å»º </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ROSæ‚ç¯‡ Melodicä¸‹Python3ä¸­ä½¿ç”¨CV_Bridgeä¸TF</title>
      <link href="/2021/11/23/ros-za-pian-melodic-xia-python3-zhong-shi-yong-cv-bridge-yu-tf/"/>
      <url>/2021/11/23/ros-za-pian-melodic-xia-python3-zhong-shi-yong-cv-bridge-yu-tf/</url>
      
        <content type="html"><![CDATA[<blockquote><p>TFä¸CV_Bridgeæ˜¯ROSä¸­éå¸¸å¥½ç”¨çš„å·¥å…·ï¼Œå‰è€…ç”¨äºå¸®åŠ©æˆ‘ä»¬è¿›è¡Œåæ ‡è½¬æ¢ï¼Œåè€…å¸®åŠ©æˆ‘ä»¬åœ¨ROSä¸­ä½¿ç”¨OpenCVã€‚ç„¶è€Œåœ¨Melodicç‰ˆæœ¬ä¸­Python3ä¸‹ä½¿ç”¨è¿™ä¸¤ä¸ªåŒ…å´ä¼šæŠ¥é”™ï¼Œæœ¬æ–‡å°†è§£å†³è¿™Python3CV_Bridgeä¸TFçš„ä½¿ç”¨é—®é¢˜ã€‚</p></blockquote><span id="more"></span><h1 id="ROSæ‚ç¯‡-Melodicä¸‹Python3ä¸­ä½¿ç”¨CV-Bridgeä¸TF"><a href="#ROSæ‚ç¯‡-Melodicä¸‹Python3ä¸­ä½¿ç”¨CV-Bridgeä¸TF" class="headerlink" title="ROSæ‚ç¯‡ Melodicä¸‹Python3ä¸­ä½¿ç”¨CV_Bridgeä¸TF"></a>ROSæ‚ç¯‡ Melodicä¸‹Python3ä¸­ä½¿ç”¨CV_Bridgeä¸TF</h1><blockquote><p>å‰è¨€ï¼šä¸ºä»€ä¹ˆè¦å†™è¿™ç¯‡åšå®¢</p></blockquote><p>åœ¨ä½¿ç”¨ROSé©±åŠ¨æœºå™¨äººçš„æ—¶å€™ï¼Œç»å¸¸é‡åˆ°çš„ä¸€ä¸ªé—®é¢˜å°±æ˜¯æˆ‘ä»¬éœ€è¦ä½¿ç”¨æ‘„åƒå¤´æ¥è·å¾—è§†è§‰ä¿¡æ¯ï¼Œå¹¶ä¸”åœ¨æ­¤åŸºç¡€ä¸Šï¼ŒæŒ‡å¯¼æœºå™¨äººè¿›è¡Œæ“ä½œã€‚</p><h2 id="Updates"><a href="#Updates" class="headerlink" title="Updates ! ! !"></a>Updates ! ! !</h2><p>ç”±äºæœ€è¿‘ä¸€ä¸ªå‘¨æˆ‘çš„å·¥ä½œå˜åŠ¨ï¼Œç›®å‰éœ€è¦åœ¨Ubuntu 20.04 LTSè¿›è¡ŒROSå¼€å‘ï¼Œ20.04ä¸­TFå’ŒCV_Bridgeé»˜è®¤éƒ½æ”¯æŒPython3ï¼Œå› æ­¤ç›®å‰æˆ‘ä¸éœ€è¦è§£å†³è¿™ä¸ªé—®é¢˜ã€‚è¿™ç¯‡æ–‡ç« ä»¥åæ›´å®Œ</p>]]></content>
      
      
      <categories>
          
          <category> ROSæ‚ç¯‡ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ROS </tag>
            
            <tag> cv_bridge </tag>
            
            <tag> Ubuntu </tag>
            
            <tag> melodic </tag>
            
            <tag> OpenCv </tag>
            
            <tag> tf2 </tag>
            
            <tag> sensor_msgs </tag>
            
            <tag> roslaunch </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ROSæ‚ç¯‡ ROSä¸­ä½¿ç”¨Kinect V2 Part2ï¼šiai-kinectä½¿ç”¨</title>
      <link href="/2021/11/19/ros-za-pian-ros-zhong-shi-yong-kinect-v2-iai-kinect-shi-yong/"/>
      <url>/2021/11/19/ros-za-pian-ros-zhong-shi-yong-kinect-v2-iai-kinect-shi-yong/</url>
      
        <content type="html"><![CDATA[<blockquote><p>æœ¬ç¯‡è¯¦ç»†ä»‹ç»äº†iai-kinect2åŠŸèƒ½åŒ…ï¼Œåœ¨æ­¤åŸºç¡€ä¸Šé€šè¿‡iai-kinect2è·å–æ·±åº¦å›¾åƒï¼Œä»è€Œè¿›è¡ŒROSä¸­çš„å¼€å‘ã€‚</p></blockquote><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211121155602208.png" alt="ä½¿ç”¨Kinect V2è·å–å¾—åˆ°å›¾åƒç»è¿‡YOLOæ£€æµ‹å¹¶ä¸æ·±åº¦é…å‡†"></p><span id="more"></span><h1 id="ROSæ‚ç¯‡-ROSä¸­ä½¿ç”¨Kinect-V2-Part2ï¼šiai-kinect2ä½¿ç”¨"><a href="#ROSæ‚ç¯‡-ROSä¸­ä½¿ç”¨Kinect-V2-Part2ï¼šiai-kinect2ä½¿ç”¨" class="headerlink" title="ROSæ‚ç¯‡ ROSä¸­ä½¿ç”¨Kinect V2 Part2ï¼šiai-kinect2ä½¿ç”¨"></a>ROSæ‚ç¯‡ ROSä¸­ä½¿ç”¨Kinect V2 Part2ï¼šiai-kinect2ä½¿ç”¨</h1><blockquote><p>å‰è¨€ï¼šä¸ºä»€ä¹ˆè¦å†™è¿™ç¯‡åšå®¢</p></blockquote><p>åœ¨ä¸Šä¸€ç¯‡ä¸­ï¼Œæˆ‘ä»¬ä»‹ç»äº†å¦‚ä½•åœ¨<code>Ubuntu</code>ä¸Šå®‰è£…<code>Kinect V2</code>çš„å¼€åŸé©±åŠ¨ï¼š<code>libfrenect2</code>ï¼Œä»¥åŠå¦‚ä½•å®‰è£…åœ¨<code>ROS</code>ä¸­ä½¿ç”¨<code>libfrenect2</code>è·å–æ·±åº¦å›¾åƒçš„åŠŸèƒ½åŒ…<code>iai-kinect2</code>ã€‚ç„¶è€Œåœ¨ä¸Šä¸€ç¯‡æ–‡ç« çš„æœ€åï¼Œæˆ‘ä»¬åªæ˜¯ç®€å•çš„ä½¿ç”¨äº†ä¸€ä¸‹<code>iai-kinect2</code>åŠŸèƒ½åŒ…ã€‚ä½†æ˜¯æˆ‘ä»¬é€šè¿‡<code>rostopic list</code>å´çœ‹åˆ°äº†éå¸¸å¤šçš„è¯é¢˜ï¼Œé‚£ä¹ˆè¿™äº›è¯é¢˜ä¹‹é—´åˆ°åº•æ˜¯ä»€ä¹ˆå…³ç³»å‘¢ï¼Ÿåˆè¯¥å¦‚ä½•åŸºäº<code>iai-kinect2</code>è¿›è¡Œæ·±åº¦å¼€å‘å‘¢ï¼Ÿ</p><p>æœ¬èŠ‚å°±å°†åœ¨ä¸Šä¸€ç¯‡çš„åŸºç¡€ä¸Šï¼Œåœ¨ä»‹ç»<code>iai-kinect2</code>çš„åŸºç¡€ä¸Šï¼Œåˆ©ç”¨<code>iai-kinect2</code>è¿›è¡Œå¼€å‘ã€‚å¦‚æœæ²¡æœ‰çœ‹è¿‡ç¬¬ä¸€ç¯‡æ–‡ç« ã€æ²¡æœ‰é…ç½®å¥½ç¯å¢ƒï¼Œå…ˆæŒ‰ç…§<a href="http://jackwang.cafe/2021/11/18/ros-za-pian-an-zhuang-kinect-v2-qu-dong/">ç¬¬ä¸€ç¯‡æ–‡ç« ä¸­çš„æ•™ç¨‹</a>è·Ÿç€æ¥ã€‚</p><p>åºŸè¯ä¸å¤šè¯´ï¼Œä¸‹é¢å°±å¼€å§‹å§ã€‚</p><h2 id="1-ä»€ä¹ˆæ˜¯iai-kinect2ï¼Ÿ"><a href="#1-ä»€ä¹ˆæ˜¯iai-kinect2ï¼Ÿ" class="headerlink" title="1. ä»€ä¹ˆæ˜¯iai-kinect2ï¼Ÿ"></a>1. ä»€ä¹ˆæ˜¯iai-kinect2ï¼Ÿ</h2><blockquote><p>æˆ‘è®¤ä¸ºåˆç†çš„å­¦ä¹ æ–¹æ³•ï¼šå­¦ä»€ä¹ˆå‰ï¼Œå…ˆé—®æ˜¯ä»€ä¹ˆï¼Œå†é—®ä¸ºä»€ä¹ˆå­¦ï¼ˆå­¦ä¹ è¿™ä¸ªä¸œè¥¿çš„ç›®çš„ï¼‰ï¼Œææ‡‚å­¦äº†èƒ½ä¸ºæˆ‘ä»¬å¸¦æ¥é‚£äº›å¸®åŠ©ï¼Œæœ€åå†å¼€å§‹å­¦</p></blockquote><p>å¦‚æœä½ æœ‰çœ‹è¿‡æˆ‘çš„ä¸Šä¸€ç¯‡åšå®¢çš„è¯ï¼Œä½ åº”è¯¥å°±ä¼šçŸ¥é“ï¼Œ<code>iai-kinect2</code>æ˜¯<code>ROS</code>çš„ä¸€ä¸ªåŠŸèƒ½åŒ…ï¼Œä»–çš„ä½œç”¨åœ¨äºè°ƒç”¨äº†<code>libfreenect2</code>é©±åŠ¨æ¥è·å¾—<code>Kinect V2</code>ç›¸æœºå¾—åˆ°çš„æ·±åº¦å›¾åƒä»¥åŠé€šè¿‡<code>OpenGL</code>ã€<code>CUDA</code>ã€<code>CPU</code>ç­‰å¹³å°æå¤§åœ°æå‡äº†æ¸²æŸ“é€Ÿåº¦å’Œé€‚åº”æ€§ã€‚æœ€ç»ˆå®ç°äº†å¤šå¹³å°ä¸‹æ·±åº¦å›¾åƒ30 FPSçš„æ€§èƒ½ã€‚</p><p>ä¸‹é¢æ˜¯å¯¹<code>iai-kinect2</code>çš„æ›´åŠ è¯¦ç»†çš„ä»‹ç»</p><h3 id="A-è°å¼€å‘çš„iai-kinect2"><a href="#A-è°å¼€å‘çš„iai-kinect2" class="headerlink" title="A. è°å¼€å‘çš„iai-kinect2?"></a>A. è°å¼€å‘çš„iai-kinect2?</h3><p>iai-kinect2æ˜¯ç”±å¾·å›½ä¸è±æ¢…å¤§å­¦ï¼ˆUniversity of Bremenï¼‰çš„åšå£«ç”ŸThiemo Wiedemeyerã€‚ä»–åœ¨2013å¹´çš„æ—¶å€™å»ä¸è±æ¢…å¤§å­¦çš„äººå·¥æ™ºèƒ½ç ”ç©¶æ‰€è¯»åšçš„æ—¶å€™å¼€å‘å‡ºäº†<code>iai-kinect2</code>ã€‚åœ¨2014å¹´çš„æ—¶å€™ï¼Œç»è¿‡å‡ ä¸ªæœˆçš„å¼€å‘ï¼Œä»–å’Œä»–ç»„é‡Œçš„å¦å¤–ä¸€ä¸ªè´Ÿè´£ä¸²å£ç›¸å…³éƒ¨åˆ†çš„åšå£«ç”Ÿåˆä½œï¼Œæœ€ç»ˆå®Œæˆäº†è¿™ä¸ªéå¸¸å¥½ç”¨çš„åº“ï¼Œå¹¶åœ¨ROSçš„è®ºå›ä¸Šå‘å¸ƒäº†è¿™ä¸€æ¶ˆæ¯ã€‚</p><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211120010505103.png" alt="Thiemo Wiedemeyeråœ¨ROSè®ºå›ä¸Šå‘å¸ƒè¿™ä¸ªåŠŸèƒ½åŒ…çš„å¸–å­"></p><h3 id="B-iai-kinect2çš„ç»„æˆ"><a href="#B-iai-kinect2çš„ç»„æˆ" class="headerlink" title="B. iai-kinect2çš„ç»„æˆ"></a>B. iai-kinect2çš„ç»„æˆ</h3><p>å‰é¢æˆ‘ä»¬åªæ˜¯ä»å¤§ä½“ä¸Šç›´åˆ°äº†<code>iai-kinect2</code>æ˜¯ä¸€ä¸ª<code>ROS</code>çš„åŠŸèƒ½åŒ…ï¼Œä»–è°ƒç”¨äº†<code>libfreenect2</code>æ¥è·å–æ·±åº¦å›¾åƒã€‚å…¶å®æ›´å‡†ç¡®çš„è¯´ï¼Œ<code>iai-kinect2</code>æ˜¯<code>ROS</code>çš„ä¸€ä¸ª<strong>å…ƒåŠŸèƒ½åŒ…</strong>ã€‚</p><blockquote><p><strong>ä»€ä¹ˆæ˜¯å…ƒåŠŸèƒ½åŒ…ï¼Ÿ</strong></p><p><code>ROS</code>ä¸­æœ‰ä¸€äº›åŸºç¡€çš„æ¦‚å¿µï¼šå·¥ä½œç©ºé—´ã€æºç ç©ºé—´ã€ç¼–è¯‘ç©ºé—´ã€å¼€å‘ç©ºé—´ã€åŠŸèƒ½åŒ…ã€å…ƒåŠŸèƒ½åŒ…ã€å‘è¡Œç‰ˆç­‰ç­‰ã€‚</p><p>é€šå¸¸æˆ‘ä»¬å·¥ä½œæ˜¯åœ¨ä¸€ä¸ªå·¥ä½œç©ºé—´ä¸­ï¼Œè¿™ä¸ªå·¥ä½œç©ºé—´ä¸­åŒ…å«äº†æˆ‘ä»¬å¼€å‘çš„ä¸€åˆ‡ï¼šæˆ‘ä»¬çš„æºä»£ç ã€ç”Ÿæˆçš„åº“æ–‡ä»¶ã€ç”Ÿæˆçš„å¤´æ–‡ä»¶ã€å¾—åˆ°çš„å¯æ‰§è¡Œæ–‡ä»¶â€¦â€¦è€Œæˆ‘ä»¬å†™çš„ä»£ç éƒ½ä»¥åŠŸèƒ½åŒ…çš„å½¢å¼ç»„ç»‡èµ·æ¥ï¼Œæˆ‘ä»¬åœ¨å‘å¸ƒä»£ç çš„æ—¶å€™å°±æ˜¯ä»¥åŠŸèƒ½åŒ…çš„å½¢å¼è¿›è¡Œå‘å¸ƒã€‚è€Œé€šå¸¸å‡ ä¸ªå…·æœ‰ç›¸å…³åŠŸèƒ½çš„åŠŸèƒ½åŒ…ç»„åˆåœ¨ä¸€èµ·å°±æ˜¯ä¸€ä¸ªå…ƒåŠŸèƒ½åŒ…ï¼Œæˆ‘ä»¬é€šè¿‡å…ƒåŠŸèƒ½åŒ…å°†å‡ ä¸ªåŠŸèƒ½åŒ…ç»„åˆèµ·æ¥ï¼Œä½¿å¾—ä»–ä»¬æˆä¸ºä¸€ä¸ªæ•´ä½“æ¥è¿›è¡Œå‘å¸ƒã€‚</p><p>åœ¨ä¸‹å›¾ä¸­ï¼Œæˆ‘ä»¬æ‰€æœ‰çš„ä»£ç éƒ½åœ¨catkin_workspaceè¿™ä¸ªå·¥ä½œç©ºé—´ä¸­ï¼ˆæŒ–ä¸ªå‘ï¼Œä»¥åå†™å†™æ–‡ç« è®²è®²ä»€ä¹ˆæ˜¯<code>catkin</code>ï¼‰ã€‚è€Œå…·ä½“æ¥è¯´ï¼Œæˆ‘ä»¬çš„æºä»£ç å­˜æ”¾åœ¨<code>src</code>æºç ç©ºé—´ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡<code>catkin_make</code>ä¼šå¯¹æˆ‘ä»¬æ‰€æœ‰çš„æºä»£ç è¿›è¡Œç¼–è¯‘ï¼Œç¼–è¯‘è¿‡ç¨‹ä¸­äº§ç”Ÿçš„ä¸­é—´æ–‡ä»¶ï¼Œä¾‹å¦‚<code>Cmake</code>çš„<code>module</code>ä»¥åŠ<code>Makefile</code>ç­‰ç­‰éƒ½åœ¨<code>build</code>ç¼–è¯‘ç©ºé—´ä¸­ã€‚æˆ‘ä»¬æœ€åçš„å¯æ‰§è¡Œæ–‡ä»¶å’Œæˆ‘ä»¬è‡ªå·±å†™çš„åº“æ–‡ä»¶éƒ½åœ¨<code>devel</code>å¼€å‘ç©ºé—´ä¸­ã€‚å¯¹äºæºç ç©ºé—´ä¸­ï¼Œä¸€ä¸ªpackageå°±è´Ÿè´£å®ç°ä¸€ä¸ªå…·ä½“çš„åŠŸèƒ½ï¼Œä¾‹å¦‚è¯»å–æ‘„åƒå¤´ã€æŠ“å–ç‰©ä½“ç­‰ç­‰ã€‚å¦‚æœpackage1å’Œpackage2æœ‰æ‰€å…³è”ï¼Œä¾‹å¦‚package1æ˜¯è¯»å–æ‘„åƒå¤´çš„åŠŸèƒ½åŒ…ï¼Œè€Œpackage2æ˜¯é©±åŠ¨æœºæ¢°è‡‚çš„åŠŸèƒ½åŒ…ï¼Œé‚£ä¹ˆä»–ä»¬ä¸¤ä¸ªåœ¨ä¸€èµ·å¯ä»¥å®Œæˆæœºå™¨äººæŠ“å–ç‰©ä½“è¿™ä¸ªåŠŸèƒ½ï¼Œé‚£ä¹ˆè¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬å°±å¯ä»¥æ–°å»ºä¸€ä¸ªåŠŸèƒ½åŒ…ï¼Œè¿™ä¸ªåŠŸèƒ½åŒ…ä»€ä¹ˆéƒ½æ²¡æœ‰ï¼Œåªæœ‰è¡¨æ˜è¿™ä¸¤ä¸ªåŠŸèƒ½åŒ…åœ¨ä¸€èµ·ç»„æˆä¸€ä¸ªå…ƒåŠŸèƒ½åŒ…çš„é…ç½®ä¿¡æ¯ï¼Œå³æè¿°å…ƒåŠŸèƒ½åŒ…æ¶æ„çš„åŠŸèƒ½åŒ…ã€‚åœ¨ä¸‹é¢å°±æ˜¯iai-kinect2è¿™ä¸ªåŠŸèƒ½åŒ…</p><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F.jpg" alt="ROSä¸­çš„åŸºç¡€æ¦‚å¿µ/æ–‡ä»¶ç³»ç»Ÿ"></p></blockquote><p>å…·ä½“æ¥è¯´ï¼Œ<code>iai-kinect2</code>è¿™ä¸ªå…ƒåŠŸèƒ½åŒ…ç”±å‡ ä¸ªåŠŸèƒ½åŒ…ç»„æˆï¼š<code>iai-kinect2</code>ï¼ˆå…ƒåŠŸèƒ½åŒ…æè¿°åŠŸèƒ½åŒ…ï¼‰ã€<code>kinect2_bridge</code>ï¼ˆè´Ÿè´£è°ƒç”¨libfreenect2ã€OpenGLè·å–å›¾åƒçš„åŠŸèƒ½åŒ…ï¼‰ã€<code>kinect_calibration</code>ï¼ˆæä¾›äº†Kinect V2ç›¸æœºGUIæ ¡å‡†çš„åŠŸèƒ½åŒ…ï¼‰ã€<code>kinect_registration</code>ï¼ˆè´Ÿè´£ç‚¹äº‘å’Œæ·±åº¦å›¾åƒé…å‡†çš„åŠŸèƒ½åŒ…ï¼‰ä»¥åŠ<code>kinect_viewer</code>ï¼ˆæä¾›äº†ç®€å•çš„å¯è§†åŒ–åŠŸèƒ½çš„åŠŸèƒ½åŒ…ï¼‰ã€‚</p><p>å…·ä½“åŠŸèƒ½åŒ…çš„æ¶æ„å¯ä»¥çœ‹ä¸‹å›¾</p><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211120012913705.png" alt="iai-kinect2å…ƒåŠŸèƒ½åŒ…çš„æ¶æ„"></p><h3 id="C-iai-kinect2çš„åŠŸèƒ½"><a href="#C-iai-kinect2çš„åŠŸèƒ½" class="headerlink" title="C. iai-kinect2çš„åŠŸèƒ½"></a>C. iai-kinect2çš„åŠŸèƒ½</h3><p>å…³äº<code>iai-kinect2</code>çš„åŠŸèƒ½ï¼Œæˆ‘ä»¬å‰é¢å…¶å®å·²ç»ä½“éªŒè¿‡äº†ä»–çš„å¯è§†åŒ–å’Œè·å–æ·±åº¦å›¾åƒä»¥åŠç‚¹äº‘å’Œå½©è‰²å›¾åƒçš„é…å‡†ã€‚å› æ­¤è¿™é‡Œä¸»è¦å…³æ³¨<code>iai-kinect2</code>ä¸­çš„æ ‡å®šåŠŸèƒ½ã€‚</p><blockquote><p>ä¼—æ‰€å‘¨çŸ¥ï¼Œæˆ‘ä»¬åˆ©ç”¨ç›¸æœºé™¤äº†æ‹ç…§ä»¥å¤–ï¼Œè¿˜æœ‰ä¸€ä¸ªé‡è¦çš„åŠŸèƒ½å°±æ˜¯ä»ç›¸æœºè·å–çš„å›¾åƒä¿¡æ¯å‡ºå‘è®¡ç®—ä¸‰ç»´ç©ºé—´ä¸­ç‰©ä½“çš„å‡ ä½•ä¿¡æ¯å¹¶ç”±æ­¤é‡å»ºå’Œè¯†åˆ«ç‰©ä½“ã€‚è¿™ä¹Ÿæ˜¯è®¡ç®—æœºè§†è§‰çš„åŸºæœ¬ä»»åŠ¡ä¹‹ä¸€ã€‚é‚£ä¹ˆæˆ‘ä»¬åœ¨è¿›è¡Œæ¨æ–­çš„æ—¶å€™å°±å­˜åœ¨ä¸€äº›é—®é¢˜ï¼Œå…¶ä¸­æœ€ä¸»è¦çš„ä¸€ä¸ªé—®é¢˜å°±æ˜¯ç›¸æœºçš„é•œå¤´ç•¸å˜ï¼Œå³ç”±äºç›¸æœºçš„é•œå¤´æ˜¯ä¸€ä¸ªå‡¹é€é•œå¯¼è‡´ç‰©ä½“é—´çœŸå®çš„è·ç¦»è¢«æ‰­æ›²ã€‚å› æ­¤æˆ‘ä»¬éœ€è¦é€šè¿‡ä¸€äº›æ‰‹æ®µæ¥è¿›è¡Œä¿®æ­£ã€‚è¿›è¡Œä¿®æ­£ä¹‹åä¼šå¾—åˆ°ä¸€äº›å‚æ•°ï¼Œåˆ©ç”¨è¿™äº›å‚æ•°æˆ‘ä»¬å°±å¯ä»¥å¯¹ç•¸å˜çš„å›¾åƒè¿›è¡Œä¿®æ­£ï¼Œä»¥å®ç°è·å¾—ç‰©ä½“é—´ç²¾å‡†çš„ä½ç½®ã€‚ç”±äºè¿™ä¸ªå‚æ•°å’Œç›¸æœºçš„é•œå¤´ã€è§’åº¦æœ‰å…³ï¼Œå› æ­¤ä»–ä»¬åˆå«åšç›¸æœºå‚æ•°ã€‚é€šè¿‡æ ‡å®šæˆ‘ä»¬å°±èƒ½å¤Ÿè·å¾—è¿™äº›å‚æ•°ã€‚</p><p>ä¾‹å¦‚åœ¨ä¸‹å›¾ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ç›´åˆ°æœºå™¨äººå’Œåœ°æ¿çš„çº¿éƒ½åº”è¯¥æ˜¯ç›´çº¿ï¼Œä½†æ˜¯ç”±äºç•¸å˜å¯¼è‡´åŸæœ¬ç›´çš„çº¿æ­ªæ›²ï¼Œè¿™ä¸ªç°è±¡åœ¨å›¾åƒè¾¹ç¼˜å¤„å°¤ä¸ºæ˜æ˜¾ã€‚</p><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211120021326327.png" alt="ç›¸æœºç•¸å˜ä¿®æ­£çš„ä¾‹å­"></p><p>å½“ç„¶é™¤äº†ç•¸å˜ä»¥å¤–è¿˜æœ‰ä¸–ç•Œåæ ‡è½¬ç›¸æœºåæ ‡ç­‰ç­‰é—®é¢˜ï¼Œä»–ä»¬ç»Ÿç§°ä¸ºç›¸æœºå‚æ•°ã€‚</p><p>å…³äºç›¸æœºæ ‡å®šçš„æ›´å¤šå†…å®¹ï¼Œæ¨èå‚è€ƒæœç‹ä¸Šçš„åšå®¢ï¼š<a href="https://www.sohu.com/a/336803765_120071391">https://www.sohu.com/a/336803765_120071391</a></p></blockquote><p><code>iai-kinect2</code>ä¸­ç›´æ¥æä¾›äº†ç”¨äºç›¸æœºæ ‡å®šçš„ç¨‹åºï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨å‘½ä»¤è¡Œä¸­è¿›è¡Œè°ƒç”¨å³å¯ã€‚å…³äºå¦‚ä½•è¿›è¡Œæ ¡å‡†ï¼Œå‚è€ƒ<a href="https://github.com/code-iai/iai_kinect2/tree/master/kinect2_calibration#calibrating-the-kinect-one">githubä¸Šçš„readme</a></p><p>æœ€ç»ˆé€šè¿‡æ ‡å®šï¼Œå¯ä»¥å®ç°çš„æ•ˆæœå¦‚ä¸‹ã€‚å¯ä»¥çœ‹å‡ºæ¥ï¼ŒåŸæœ¬å€¾æ–œçš„å›¾åƒè¢«æ ¡å‡†äº†ã€‚</p><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/68747470733a2f2f61692e756e692d6272656d656e2e64652f5f6d656469612f6b696e656374325f636c6f75645f6e6f63616c69622e706e67" alt="æœªæ ¡å‡†å‰çš„ç‚¹äº‘å›¾åƒ"></p><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/68747470733a2f2f61692e756e692d6272656d656e2e64652f5f6d656469612f6b696e656374325f636c6f75645f63616c69622e706e67" alt="æ ¡å‡†åçš„ç‚¹äº‘å›¾åƒ"></p><h2 id="2-iai-kinect2çš„ä½¿ç”¨"><a href="#2-iai-kinect2çš„ä½¿ç”¨" class="headerlink" title="2. iai-kinect2çš„ä½¿ç”¨"></a>2. iai-kinect2çš„ä½¿ç”¨</h2><p>æˆ‘ä»¬åœ¨ä¸‹é¢å°†å¯¹<code>iai-kinect2</code>çš„ä½¿ç”¨è¿›è¡Œä»‹ç»ï¼Œä¸è¿‡éœ€è¦è¯´æ˜çš„æ˜¯ï¼šç”±äº<code>iai-kinect2</code>çš„ä»£ç éå¸¸å¥½ï¼Œå°†è‡ªå·±å°½å¯èƒ½çš„ä½è€¦åˆï¼Œå› æ­¤å…¶æ‰€æœ‰çš„ä¾èµ–éƒ½æ˜¯<code>ROS</code>çš„æ ‡å‡†æ¶ˆæ¯ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å­¦ä¹ iai-kinect2çš„ä½¿ç”¨ä¸»è¦æ˜¯ä»ä¸‹é¢ä¸¤ä¸ªæ–¹é¢å»å­¦ä¹ </p><ul><li><code>iai-kinect2</code>ä¸­ä½¿ç”¨çš„<code>ROS</code>çš„æ ‡å‡†æ¶ˆæ¯ï¼š<code>Image</code>å’Œ<code>CompressedImage</code></li><li><code>iai-kinect2</code>ä¸­æ¯ä¸ªè¯é¢˜çš„å«ä¹‰å’Œä½œç”¨</li></ul><h3 id="A-ROSä¸­Imageå’ŒCompressedImage"><a href="#A-ROSä¸­Imageå’ŒCompressedImage" class="headerlink" title="A. ROSä¸­Imageå’ŒCompressedImage"></a>A. ROSä¸­Imageå’ŒCompressedImage</h3><p><code>ROS</code>ä¸­ä¸ºå›¾åƒæ•°æ®æä¾›äº†ä¸¤ä¸ªå®˜æ–¹çš„æ¶ˆæ¯ç±»å‹ï¼š<code>Image</code>å’Œ<code>CompressedImage</code>ã€‚å…¶ä¸­<code>Image</code>æ˜¯æ²¡æœ‰ç»è¿‡å‹ç¼©çš„å›¾ç‰‡è€Œ<code>CompressedImage</code>åˆ™æ˜¯ç»è¿‡å‹ç¼©çš„å›¾ç‰‡ã€‚ç”±ä¸<code>ROS</code>ä¸­çš„æ‰€æœ‰çš„æ¶ˆæ¯å…¶å®éƒ½æ˜¯åŸºäº<code>std_msgs</code>æä¾›çš„åŸºç¡€æ•°æ®ç±»å‹ä¸Šå®šä¹‰çš„ï¼Œå› æ­¤<code>Image</code>å’Œ<code>CompressedImage</code>ä¹Ÿä¸ä¾‹å¤–ã€‚å…·ä½“æ¥è¯´ï¼Œå›¾ç‰‡æœ¬èº«æ˜¯ç”¨ä¸€ä¸ªè£…ç€å­—èŠ‚æµçš„æ•°ç»„ä¿å­˜çš„ï¼Œè€Œå›¾ç‰‡çš„<code>frame_id</code>å’Œå¯¹åº”çš„ç›¸æœºä¿¡æ¯ç­‰ç­‰éƒ½æ˜¯æœ‰å¯¹åº”çš„é¡¹ã€‚</p><h4 id="æ¶ˆæ¯å®šä¹‰"><a href="#æ¶ˆæ¯å®šä¹‰" class="headerlink" title="æ¶ˆæ¯å®šä¹‰"></a>æ¶ˆæ¯å®šä¹‰</h4><p>é¦–å…ˆæ˜¯<code>Image</code>æ¶ˆæ¯çš„å®šä¹‰ï¼Œå¯ä»¥çœ‹åˆ°<code>header</code>ä¸­æä¾›æ—¶é—´æˆ³ç­‰ä¿¡æ¯ï¼Œè€Œå›¾åƒçš„é•¿å®½ã€å­—èŠ‚åºã€ç¼–ç æ–¹å¼ç­‰ç­‰å†…å®¹éƒ½æ˜¯ç”¨äºå¸®åŠ©è§£ç <code>data</code>å­—èŠ‚æµçš„ã€‚æ­¤å¤–ä¹Ÿèƒ½å¤Ÿçœ‹åˆ°ï¼Œ<code>ROS</code>ä¸­çš„å›¾åƒæ¯ä¸€ä¸ªåƒç´ éƒ½æ˜¯ç”¨ä¸€ä¸ª8ä½æ— ç¬¦å·æ•´æ•°æè¿°çš„ã€‚</p><pre class="line-numbers language-msg"><code class="language-msg"># This message contains an uncompressed image# (0, 0) is at top-left corner of image#Header header        # Header timestamp should be acquisition time of image                     # Header frame_id should be optical frame of camera                     # origin of frame should be optical center of camera                     # +x should point to the right in the image                     # +y should point down in the image                     # +z should point into to plane of the image                     # If the frame_id here and the frame_id of the CameraInfo                     # message associated with the image conflict                     # the behavior is undefineduint32 height         # image height, that is, number of rowsuint32 width          # image width, that is, number of columns# The legal values for encoding are in file src/image_encodings.cpp# If you want to standardize a new string format, join# ros-users@lists.sourceforge.net and send an email proposing a new encoding.string encoding       # Encoding of pixels -- channel meaning, ordering, size                      # taken from the list of strings in include/sensor_msgs/image_encodings.huint8 is_bigendian    # is this data bigendian?uint32 step           # Full row length in bytesuint8[] data          # actual matrix data, size is (step * rows)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç±»ä¼¼çš„ï¼Œ<code>CompressedImage</code>åˆ™æ˜¯ç»è¿‡å‹ç¼©çš„å›¾åƒï¼Œå…·ä½“çš„å‹ç¼©æ–¹å¼å°±æ˜¯ä½¿ç”¨<code>jpg</code>ã€<code>png</code>ç­‰ç¼–ç æ ¼å¼ï¼Œå› æ­¤å›¾åƒçš„ç¼–ç æ–¹å¼æ˜¯å›ºå®šçš„</p><pre class="line-numbers language-tmsg"><code class="language-tmsg">Header header        # Header timestamp should be acquisition time of image                     # Header frame_id should be optical frame of camera                     # origin of frame should be optical center of camera                     # +x should point to the right in the image                     # +y should point down in the image                     # +z should point into to plane of the imagestring format        # Specifies the format of the data                     #   Acceptable values:                     #     jpeg, pnguint8[] data         # Compressed image buffer<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æœ€åéœ€è¦æ³¨æ„çš„æ˜¯<code>iai-kinect2</code>ä¸­è¿˜ç”¨åˆ°äº†<code>camerainfo</code>è¿™ä¸ª<code>ROS</code>çš„å®˜æ–¹æ¶ˆæ¯ï¼Œå…¶å†…å®¹å¦‚ä¸‹ï¼Œä¸»è¦å®šä¹‰äº†ç›¸æœºçš„å†…å¤–å‚æ•°ï¼Œè·å–å›¾åƒçš„åˆ†è¾¨ç‡ç­‰ä¿¡æ¯</p><pre class="line-numbers language-msg"><code class="language-msg"># This message defines meta information for a camera. It should be in a# camera namespace on topic "camera_info" and accompanied by up to five# image topics named:##   image_raw - raw data from the camera driver, possibly Bayer encoded#   image            - monochrome, distorted#   image_color      - color, distorted#   image_rect       - monochrome, rectified#   image_rect_color - color, rectified## The image_pipeline contains packages (image_proc, stereo_image_proc)# for producing the four processed image topics from image_raw and# camera_info. The meaning of the camera parameters are described in# detail at http://www.ros.org/wiki/image_pipeline/CameraInfo.## The image_geometry package provides a user-friendly interface to# common operations using this meta information. If you want to, e.g.,# project a 3d point into image coordinates, we strongly recommend# using image_geometry.## If the camera is uncalibrated, the matrices D, K, R, P should be left# zeroed out. In particular, clients may assume that K[0] == 0.0# indicates an uncalibrated camera.########################################################################                     Image acquisition info                          ######################################################################### Time of image acquisition, camera coordinate frame IDHeader header    # Header timestamp should be acquisition time of image                 # Header frame_id should be optical frame of camera                 # origin of frame should be optical center of camera                 # +x should point to the right in the image                 # +y should point down in the image                 # +z should point into the plane of the image########################################################################                      Calibration Parameters                         ######################################################################### These are fixed during camera calibration. Their values will be the ## same in all messages until the camera is recalibrated. Note that    ## self-calibrating systems may "recalibrate" frequently.              ##                                                                     ## The internal parameters can be used to warp a raw (distorted) image ## to:                                                                 ##   1. An undistorted image (requires D and K)                        ##   2. A rectified image (requires D, K, R)                           ## The projection matrix P projects 3D points into the rectified image.######################################################################### The image dimensions with which the camera was calibrated. Normally# this will be the full camera resolution in pixels.uint32 heightuint32 width# The distortion model used. Supported models are listed in# sensor_msgs/distortion_models.h. For most cameras, "plumb_bob" - a# simple model of radial and tangential distortion - is sufficient.string distortion_model# The distortion parameters, size depending on the distortion model.# For "plumb_bob", the 5 parameters are: (k1, k2, t1, t2, k3).float64[] D# Intrinsic camera matrix for the raw (distorted) images.#     [fx  0 cx]# K = [ 0 fy cy]#     [ 0  0  1]# Projects 3D points in the camera coordinate frame to 2D pixel# coordinates using the focal lengths (fx, fy) and principal point# (cx, cy).float64[9]  K # 3x3 row-major matrix# Rectification matrix (stereo cameras only)# A rotation matrix aligning the camera coordinate system to the ideal# stereo image plane so that epipolar lines in both stereo images are# parallel.float64[9]  R # 3x3 row-major matrix# Projection/camera matrix#     [fx'  0  cx' Tx]# P = [ 0  fy' cy' Ty]#     [ 0   0   1   0]# By convention, this matrix specifies the intrinsic (camera) matrix#  of the processed (rectified) image. That is, the left 3x3 portion#  is the normal camera intrinsic matrix for the rectified image.# It projects 3D points in the camera coordinate frame to 2D pixel#  coordinates using the focal lengths (fx', fy') and principal point#  (cx', cy') - these may differ from the values in K.# For monocular cameras, Tx = Ty = 0. Normally, monocular cameras will#  also have R = the identity and P[1:3,1:3] = K.# For a stereo pair, the fourth column [Tx Ty 0]' is related to the#  position of the optical center of the second camera in the first#  camera's frame. We assume Tz = 0 so both cameras are in the same#  stereo image plane. The first camera always has Tx = Ty = 0. For#  the right (second) camera of a horizontal stereo pair, Ty = 0 and#  Tx = -fx' * B, where B is the baseline between the cameras.# Given a 3D point [X Y Z]', the projection (x, y) of the point onto#  the rectified image is given by:#  [u v w]' = P * [X Y Z 1]'#         x = u / w#         y = v / w#  This holds for both images of a stereo pair.float64[12] P # 3x4 row-major matrix########################################################################                      Operational Parameters                         ######################################################################### These define the image region actually captured by the camera       ## driver. Although they affect the geometry of the output image, they ## may be changed freely without recalibrating the camera.             ######################################################################### Binning refers here to any camera setting which combines rectangular#  neighborhoods of pixels into larger "super-pixels." It reduces the#  resolution of the output image to#  (width / binning_x) x (height / binning_y).# The default values binning_x = binning_y = 0 is considered the same#  as binning_x = binning_y = 1 (no subsampling).uint32 binning_xuint32 binning_y# Region of interest (subwindow of full camera resolution), given in#  full resolution (unbinned) image coordinates. A particular ROI#  always denotes the same window of pixels on the camera sensor,#  regardless of binning settings.# The default setting of roi (all values 0) is considered the same as#  full resolution (roi.width = width, roi.height = height).RegionOfInterest roi<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å…³äºå…¶ä»–ä¼ æ„Ÿå™¨æ¶ˆæ¯ï¼Œå‚è€ƒ<code>roswiki</code>çš„æ–‡ç« ï¼š<a href="http://wiki.ros.org/sensor_msgs">http://wiki.ros.org/sensor_msgs</a></p><p>å…³äºå…¨éƒ¨çš„å®˜æ–¹æ¶ˆæ¯ï¼Œå‚è€ƒ<code>roswiki</code>æ–‡ç« ï¼š<a href="http://wiki.ros.org/common_msgs?distro=noetic">http://wiki.ros.org/common_msgs?distro=noetic</a></p><h4 id="ä½¿ç”¨cv-bridgeè½¬æ¥ç»™OpenCV"><a href="#ä½¿ç”¨cv-bridgeè½¬æ¥ç»™OpenCV" class="headerlink" title="ä½¿ç”¨cv_bridgeè½¬æ¥ç»™OpenCV"></a>ä½¿ç”¨cv_bridgeè½¬æ¥ç»™OpenCV</h4><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸Šé¢çš„æ–¹å¼çš„åˆ°çš„å›¾åƒéƒ½æ˜¯<code>ROS</code>ä¸­å®šä¹‰çš„å›¾åƒçš„æ¶ˆæ¯ï¼Œè€Œ<code>ROS</code>ä¸­çš„å›¾åƒçš„æ¶ˆæ¯å’Œ<code>OpenCV</code>çš„å¹¶ä¸ä¸€æ ·ï¼Œå› æ­¤å¦‚æœæˆ‘ä»¬åç»­è¿˜è¦å¯¹å›¾åƒè¿›è¡Œå¤„ç†çš„è¯ï¼Œå°±éœ€è¦å°†<code>ROS</code>ä¸­çš„å›¾åƒè½¬å˜ä¸º<code>OpenCV</code>çš„å›¾åƒã€‚ä¸ºæ­¤æˆ‘ä»¬å°±éœ€è¦ä½¿ç”¨<code>CV_bridge</code>ã€‚</p><p>ROSä¸­çš„å›¾åƒå’ŒOpenCVä¸­çš„å›¾åƒä¸ä¸€æ ·çš„åœ°æ–¹åœ¨äºï¼Œ<code>ROS</code>æ˜¯é€šè¿‡å­—èŠ‚æµä»¥åŠè¾…åŠ©çš„è§£ç ä¿¡æ¯æ¥è¡¨ç¤ºä¸€å¼ å›¾åƒï¼Œè€ŒOpenCVåˆ™æ˜¯é€šè¿‡å…¶æ ¸å¿ƒçš„<code>lplImage</code>æ•°æ®ç»“æ„æ¥è¡¨ç¤ºä¸€å¼ å›¾åƒï¼ˆ<code>lpl</code>è¡¨ç¤º <code>Intel Image Processing Library</code>ï¼‰ã€‚<code>lplImage</code>çš„å®šä¹‰å¦‚ä¸‹ï¼Œå½“ç„¶æˆ‘ä»¬æ²¡å¿…è¦å…¨éƒ¨ææ‡‚ï¼Œçœ‹çœ‹å®šä¹‰çŸ¥é“ä¸åŒå³å¯ã€‚</p><p>æ­¤å¤–<code>Python</code>ä¸­<code>OpenCV</code>çš„å›¾åƒçš„è¡¨ç¤ºæ˜¯åŸºäº<code>Num Py</code>çš„ï¼Œå› æ­¤è¿˜ä¼šå­˜åœ¨ä¸ä¸€æ ·çš„åœ°æ–¹ã€‚</p><pre class="line-numbers language-c++"><code class="language-c++">typedef struct _IplImage      {          int  nSize;         /* IplImageå¤§å° */          int  ID;            /* ç‰ˆæœ¬ (=0)*/          int  nChannels;     /* å¤§å¤šæ•°OPENCVå‡½æ•°æ”¯æŒ1,2,3 æˆ– 4 ä¸ªé€šé“ */          int  alphaChannel;  /* è¢«OpenCVå¿½ç•¥ */          int  depth;         /* åƒç´ çš„ä½æ·±åº¦: IPL_DEPTH_8U, IPL_DEPTH_8S, IPL_DEPTH_16U,                                IPL_DEPTH_16S, IPL_DEPTH_32S, IPL_DEPTH_32F and IPL_DEPTH_64F å¯æ”¯æŒ */          char colorModel[4]; /* è¢«OpenCVå¿½ç•¥ */          char channelSeq[4]; /* åŒä¸Š */          int  dataOrder;     /* 0 - äº¤å‰å­˜å–é¢œè‰²é€šé“, 1 - åˆ†å¼€çš„é¢œè‰²é€šé“.                                cvCreateImageåªèƒ½åˆ›å»ºäº¤å‰å­˜å–å›¾åƒ */          int  origin;        /* 0 - é¡¶â€”å·¦ç»“æ„,                                1 - åº•â€”å·¦ç»“æ„ (Windows bitmaps é£æ ¼) */          int  align;         /* å›¾åƒè¡Œæ’åˆ— (4 or 8). OpenCV å¿½ç•¥å®ƒï¼Œä½¿ç”¨ widthStep ä»£æ›¿ */          int  width;         /* å›¾åƒå®½åƒç´ æ•° */          int  height;        /* å›¾åƒé«˜åƒç´ æ•°*/          struct _IplROI *roi;/* å›¾åƒæ„Ÿå…´è¶£åŒºåŸŸ. å½“è¯¥å€¼éç©ºåªå¯¹è¯¥åŒºåŸŸè¿›è¡Œå¤„ç† */          struct _IplImage *maskROI; /* åœ¨ OpenCVä¸­å¿…é¡»ç½®NULL */          void  *imageId;     /* åŒä¸Š*/          struct _IplTileInfo *tileInfo; /*åŒä¸Š*/          int  imageSize;     /* å›¾åƒæ•°æ®å¤§å°(åœ¨äº¤å‰å­˜å–æ ¼å¼ä¸‹imageSize=image->height*image->widthStepï¼‰ï¼Œå•ä½å­—èŠ‚*/          char *imageData;  /* æŒ‡å‘æ’åˆ—çš„å›¾åƒæ•°æ® */          int  widthStep;   /* æ’åˆ—çš„å›¾åƒè¡Œå¤§å°ï¼Œä»¥å­—èŠ‚ä¸ºå•ä½ */          int  BorderMode[4]; /* è¾¹é™…ç»“æŸæ¨¡å¼, è¢«OpenCVå¿½ç•¥ */          int  BorderConst[4]; /* åŒä¸Š */          char *imageDataOrigin; /* æŒ‡é’ˆæŒ‡å‘ä¸€ä¸ªä¸åŒçš„å›¾åƒæ•°æ®ç»“æ„ï¼ˆä¸æ˜¯å¿…é¡»æ’åˆ—çš„ï¼‰ï¼Œæ˜¯ä¸ºäº†çº æ­£å›¾åƒå†…å­˜åˆ†é…å‡†å¤‡çš„ */      }      IplImage;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ‰€ä»¥<code>cv_bridge</code>çš„åŠŸèƒ½å°±æ˜¯ä¸‹é¢è¿™å¼ å›¾ä¸­æ‰€è¡¨è¿°çš„</p><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/cv_bridge" alt="cv_bridgeçš„ä½œç”¨"></p><p>æ›´å¤šå…³äº<code>cv_bridge</code>çš„é—®é¢˜ï¼Œå‚è€ƒ<code>roswiki</code>ï¼š<a href="https://wiki.ros.org/cv_bridge">https://wiki.ros.org/cv_bridge</a></p><p>æ­¤å¤–ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨<code>Melodic</code>ä¸‹åœ¨<code>Python</code>ä¸­ä½¿ç”¨cv_bridgeä¼šæŠ¥é”™æ— æ³•åŠ è½½ä¸€ä¸ªso/dynamicå•¥å•¥å•¥ï¼Œå…³äºè¿™ä¸ªé—®é¢˜çš„è§£å†³ï¼Œå…ˆæŒ–ä¸ªå‘ï¼Œä»¥åå†è¡¥ã€‚</p><h3 id="B-iai-kinect2ä¸­æ¯ä¸ªè¯é¢˜çš„å«ä¹‰å’Œä½œç”¨"><a href="#B-iai-kinect2ä¸­æ¯ä¸ªè¯é¢˜çš„å«ä¹‰å’Œä½œç”¨" class="headerlink" title="B. iai-kinect2ä¸­æ¯ä¸ªè¯é¢˜çš„å«ä¹‰å’Œä½œç”¨"></a>B. iai-kinect2ä¸­æ¯ä¸ªè¯é¢˜çš„å«ä¹‰å’Œä½œç”¨</h3><p>å½“æˆ‘ä»¬ä»¥<code>launch</code>æ–‡ä»¶çš„å½¢å¼è¿è¡Œ<code>iai-kinect2</code>åï¼Œæˆ‘ä»¬ä¼šçœ‹åˆ°å¾ˆå¤šçš„è¯é¢˜ï¼Œè¿™äº›è¯é¢˜å…¶å®åˆ†æˆä¸‰ç»„ï¼š<code>hd</code>ã€<code>qhd</code>å’Œ<code>sd</code>ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæ¯ç»„è¯é¢˜ä¸‹çš„<code>points</code>è¯é¢˜éƒ½åªæ˜¯åªæœ‰é€šè¿‡<code>launch</code>æ–‡ä»¶è¿è¡Œæ‰ä¼šçœ‹åˆ°çš„ã€‚</p><h4 id="HDè¯é¢˜"><a href="#HDè¯é¢˜" class="headerlink" title="HDè¯é¢˜"></a>HDè¯é¢˜</h4><p>HDè¯é¢˜å…¶å®æŒ‡çš„æ˜¯é«˜åˆ†è¾¨ç‡çš„å›¾åƒï¼Œç”±äº<code>Kinect V2</code>ç›¸æ¯”<code>Kinect V1</code>ï¼Œå…¶å›¾åƒæé™åˆ†è¾¨ç‡1920x1080ï¼Œå› æ­¤HDè¯é¢˜ä¸­æ‰€æœ‰çš„å›¾åƒéƒ½æ˜¯æé™åˆ†è¾¨ç‡1920x1080çš„å›¾åƒ</p><p>æ­¤å¤–ï¼ŒHDè¯é¢˜ä¸‹å‘å¸ƒçš„colorè¡¨ç¤ºæ˜¯RGBå½©è‰²å›¾åƒã€<code>color_rect</code>åˆ™æ˜¯ç»è¿‡ç•¸å˜å¤„ç†ï¼ˆrectifiedï¼‰çš„å›¾åƒï¼Œ<code>compressed</code>çš„åˆ™æ˜¯ç»è¿‡å‹ç¼©çš„å›¾åƒã€‚depthåˆ™æ˜¯æ·±åº¦å›¾ï¼Œ<code>mono</code>åˆ™æ˜¯å•è‰²ç°åº¦å›¾ã€‚</p><pre class="line-numbers language-text"><code class="language-text">/kinect2/hd/camera_info/kinect2/hd/image_color/kinect2/hd/image_color/compressed/kinect2/hd/image_color_rect/kinect2/hd/image_color_rect/compressed/kinect2/hd/image_depth_rect/kinect2/hd/image_depth_rect/compressed/kinect2/hd/image_mono/kinect2/hd/image_mono/compressed/kinect2/hd/image_mono_rect/kinect2/hd/image_mono_rect/compressed/kinect2/hd/points<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="QHDè¯é¢˜"><a href="#QHDè¯é¢˜" class="headerlink" title="QHDè¯é¢˜"></a>QHDè¯é¢˜</h4><p>QHDè¯é¢˜çš„å…¨ç§°æ˜¯Quater HDï¼Œå³è¯¥è¯é¢˜æ˜¯HDè¯é¢˜çš„1/4ã€‚åŸå› åœ¨äºHDè¯é¢˜ä¸‹çš„å›¾ç‰‡å®åœ¨æ˜¯å¤ªå¤§äº†ï¼Œå› æ­¤æ— è®ºæ˜¯æ•°æ®çš„ä¼ è¾“è¿˜æ˜¯å¤„ç†éƒ½å¾ˆæ…¢ã€‚æ‰€ä»¥QHDä¸­çš„å›¾åƒæ˜¯å¯¹HDçš„å›¾åƒè¿›è¡Œé™é‡‡æ ·ä¹‹åçš„å›¾åƒï¼Œé•¿å®½å„è‡ªé™é‡‡æ ·ä¸€åŠï¼Œæ‰€ä»¥æ˜¯512x424çš„å›¾ç‰‡ã€‚å› æ­¤å›¾åƒå¤„ç†èµ·æ¥é€Ÿåº¦å¾ˆå¿«</p><pre class="line-numbers language-text"><code class="language-text">/kinect2/qhd/camera_info/kinect2/qhd/image_color/kinect2/qhd/image_color/compressed/kinect2/qhd/image_color_rect/kinect2/qhd/image_color_rect/compressed/kinect2/qhd/image_depth_rect/kinect2/qhd/image_depth_rect/compressed/kinect2/qhd/image_mono/kinect2/qhd/image_mono/compressed/kinect2/qhd/image_mono_rect/kinect2/qhd/image_mono_rect/compressed/kinect2/qhd/points<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="SDè¯é¢˜"><a href="#SDè¯é¢˜" class="headerlink" title="SDè¯é¢˜"></a>SDè¯é¢˜</h4><p>SDè¯é¢˜ä¸­çš„å›¾åƒéƒ½æ˜¯ä»ç›¸æœºè·å¾—çš„çº¢å¤–å’Œæ·±åº¦å›¾åƒï¼Œå› æ­¤å¤§å°éƒ½æ˜¯åŸæœ¬çš„å¤§å°ï¼š512x424ï¼Œå¤„ç†èµ·æ¥é€Ÿåº¦è¿˜æ˜¯æ¯”è¾ƒå¿«çš„ã€‚</p><pre class="line-numbers language-text"><code class="language-text">/kinect2/sd/camera_info/kinect2/sd/image_color_rect/kinect2/sd/image_color_rect/compressed/kinect2/sd/image_depth/kinect2/sd/image_depth/compressed/kinect2/sd/image_depth_rect/kinect2/sd/image_depth_rect/compressed/kinect2/sd/image_ir/kinect2/sd/image_ir/compressed/kinect2/sd/image_ir_rect/kinect2/sd/image_ir_rect/compressed/kinect2/sd/points<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="C-launchå¯åŠ¨èŠ‚ç‚¹æ—¶å€™æŒ‡å®šå‚æ•°"><a href="#C-launchå¯åŠ¨èŠ‚ç‚¹æ—¶å€™æŒ‡å®šå‚æ•°" class="headerlink" title="C. launchå¯åŠ¨èŠ‚ç‚¹æ—¶å€™æŒ‡å®šå‚æ•°"></a>C. launchå¯åŠ¨èŠ‚ç‚¹æ—¶å€™æŒ‡å®šå‚æ•°</h3><p>ç”±äºiai-kinect2è‡ªæˆä¸€å¥—ç³»ç»Ÿï¼Œå› æ­¤æˆ‘ä»¬æ²¡æœ‰å¿…è¦ä¹Ÿå¾ˆéš¾ä¿®æ”¹ä»–çš„ä»£ç æ¥å®Œæˆæˆ‘ä»¬éœ€è¦çš„åŠŸèƒ½ã€‚ä¸ºæ­¤<code>iai-kinect2</code>çš„<code>launch</code>æ–‡ä»¶æ”¯æŒåœ¨å¯åŠ¨çš„æ—¶å€™æŒ‡å®šå‚æ•°ï¼Œæ¥å®ç°ä¸åŒçš„åŠŸèƒ½ï¼Œå…·ä½“æ‰€æœ‰çš„å‚æ•°å¦‚ä¸‹</p><pre class="line-numbers language-bash"><code class="language-bash">roslaunch kinect2_bridge kinect2_bridge.launch <span class="token punctuation">[</span>options:<span class="token operator">=</span>value<span class="token punctuation">]</span>base_name:<span class="token operator">=</span><span class="token operator">&lt;</span>string<span class="token operator">></span>    default: kinect2    info:    <span class="token keyword">set</span> base name <span class="token keyword">for</span> all topicssensor:<span class="token operator">=</span><span class="token operator">&lt;</span>string<span class="token operator">></span>    default:    info:    serial of the sensor to usefps_limit:<span class="token operator">=</span><span class="token operator">&lt;</span>double<span class="token operator">></span>    default: -1.0    info:    limit the frames per secondcalib_path:<span class="token operator">=</span><span class="token operator">&lt;</span>string<span class="token operator">></span>    default: /home/wiedemeyer/work/src/iai_kinect2/kinect2_bridge/data/    info:    path to the calibration filesuse_png:<span class="token operator">=</span><span class="token operator">&lt;</span>bool<span class="token operator">></span>    default: <span class="token boolean">false</span>    info:    Use PNG compression instead of TIFFjpeg_quality:<span class="token operator">=</span><span class="token operator">&lt;</span>int<span class="token operator">></span>    default: 90    info:    JPEG quality level from 0 to 100png_level:<span class="token operator">=</span><span class="token operator">&lt;</span>int<span class="token operator">></span>    default: 1    info:    PNG compression level from 0 to 9depth_method:<span class="token operator">=</span><span class="token operator">&lt;</span>string<span class="token operator">></span>    default: cuda    info:    Use specific depth processing: default, cpu, opengl, opencl, cuda, clkde, cudakdedepth_device:<span class="token operator">=</span><span class="token operator">&lt;</span>int<span class="token operator">></span>    default: -1    info:    openCL device to use <span class="token keyword">for</span> depth processingreg_method:<span class="token operator">=</span><span class="token operator">&lt;</span>string<span class="token operator">></span>    default: opencl    info:    Use specific depth registration: default, cpu, openclreg_device:<span class="token operator">=</span><span class="token operator">&lt;</span>int<span class="token operator">></span>    default: -1    info:    openCL device to use <span class="token keyword">for</span> depth registrationmax_depth:<span class="token operator">=</span><span class="token operator">&lt;</span>double<span class="token operator">></span>    default: 12.0    info:    max depth valuemin_depth:<span class="token operator">=</span><span class="token operator">&lt;</span>double<span class="token operator">></span>    default: 0.1    info:    min depth valuequeue_size:<span class="token operator">=</span><span class="token operator">&lt;</span>int<span class="token operator">></span>    default: 2    info:    queue size of publisherbilateral_filter:<span class="token operator">=</span><span class="token operator">&lt;</span>bool<span class="token operator">></span>    default: <span class="token boolean">true</span>    info:    <span class="token function">enable</span> bilateral filtering of depth imagesedge_aware_filter:<span class="token operator">=</span><span class="token operator">&lt;</span>bool<span class="token operator">></span>    default: <span class="token boolean">true</span>    info:    <span class="token function">enable</span> edge aware filtering of depth imagespublish_tf:<span class="token operator">=</span><span class="token operator">&lt;</span>bool<span class="token operator">></span>    default: <span class="token boolean">false</span>    info:    publish static tf transforms <span class="token keyword">for</span> camerabase_name_tf:<span class="token operator">=</span><span class="token operator">&lt;</span>string<span class="token operator">></span>    default: as base_name    info:    base name <span class="token keyword">for</span> the tf framesworker_threads:<span class="token operator">=</span><span class="token operator">&lt;</span>int<span class="token operator">></span>    default: 4    info:    number of threads used <span class="token keyword">for</span> processing the images<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="3-iai-kinect2ä½¿ç”¨ç¤ºä¾‹"><a href="#3-iai-kinect2ä½¿ç”¨ç¤ºä¾‹" class="headerlink" title="3. iai-kinect2ä½¿ç”¨ç¤ºä¾‹"></a>3. iai-kinect2ä½¿ç”¨ç¤ºä¾‹</h2><p>ç»è¿‡ä¸Šé¢çš„ä»‹ç»ï¼Œæˆ‘ä»¬å¯¹äºå¦‚ä½•ä½¿ç”¨iai-kinect2æ¥è·å¾—æ·±åº¦å›¾åƒå’Œç‚¹äº‘åº”è¯¥æœ‰äº†è®¤è¯†ï¼Œä¸‹é¢æˆ‘ä»¬å°±ç»™å‡ºå‡ ä¸ªä½¿ç”¨çš„ä¾‹å­ã€‚</p><p>å…¶å®ä½¿ç”¨çš„å…·ä½“æµç¨‹å¾ˆç®€å•ï¼Œå°±æ˜¯å»è®¢é˜…HDã€QHDã€SDè¯é¢˜ä¸­çš„æ¶ˆæ¯ï¼Œç„¶åä½¿ç”¨CV_Bridgeè½¬æ¢æˆOpenCVçš„å›¾åƒï¼Œç„¶åå†ä½¿ç”¨OpenCVè¿›è¡Œè§†é¢‘å›¾åƒçš„å¤„ç†ã€‚</p><h3 id="A-å›¾åƒæ˜¾ç¤º"><a href="#A-å›¾åƒæ˜¾ç¤º" class="headerlink" title="A. å›¾åƒæ˜¾ç¤º"></a>A. å›¾åƒæ˜¾ç¤º</h3><p>ä¸‹é¢çš„è¿™ä¸ªç¨‹åºæ˜¯é€šè¿‡æ¥å—å‘½ä»¤è¡Œå‚æ•°æ¥å®ç°æ˜¾ç¤ºçš„èŠ‚ç‚¹ï¼Œåˆ©ç”¨è¿™ä¸ªç¨‹åºå¯ä»¥æ˜¾ç¤ºæ¯ä¸ªè¯é¢˜ä¸‹çš„å›¾åƒã€‚ä¸è¿‡æœ‰ä¸€ä¸ªå°é—®é¢˜æ˜¯æˆ‘æœ¬æ¥æƒ³åšçš„æ˜¯å¯ä»¥åŒä¸€æ—¶é—´å¤šä¸ªçª—å£æ˜¾ç¤ºå¤šä¸ªå›¾åƒï¼Œè¿™æ ·æ•ˆæœä¼šå¥½å¾ˆå¤šã€‚ä½†æ˜¯ç”±äºæˆ‘ç”µè„‘æ€§èƒ½çš„é—®é¢˜è·‘èµ·æ¥å¾ˆå¡ï¼Œä½†æ˜¯æ˜¾ç¤ºå•ç‹¬çš„è¯é¢˜å€’æ˜¯å¾ˆä¸é”™</p><pre class="line-numbers language-python"><code class="language-python"><span class="token comment" spellcheck="true">#! /home/jack/anaconda3/envs/ros/bin/python</span><span class="token triple-quoted-string string">""" å‘½ä»¤è¡Œå¿«æ·æŸ¥çœ‹iai-kinect2å›¾åƒçš„èŠ‚ç‚¹ """</span><span class="token triple-quoted-string string">"""@author: Jack Wang@copyright: Jack Wang@date: 2021-11-20"""</span><span class="token keyword">from</span> os <span class="token keyword">import</span> read<span class="token keyword">import</span> sys<span class="token keyword">import</span> argparse<span class="token keyword">from</span> typing <span class="token keyword">import</span> List<span class="token keyword">import</span> cv2<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np<span class="token keyword">for</span> path_idx <span class="token keyword">in</span> range<span class="token punctuation">(</span>len<span class="token punctuation">(</span>sys<span class="token punctuation">.</span>path<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">if</span> <span class="token string">"2.7"</span> <span class="token keyword">in</span> sys<span class="token punctuation">.</span>path<span class="token punctuation">[</span>path_idx<span class="token punctuation">]</span><span class="token punctuation">:</span>        temp <span class="token operator">=</span> sys<span class="token punctuation">.</span>path<span class="token punctuation">.</span>pop<span class="token punctuation">(</span>path_idx<span class="token punctuation">)</span>        <span class="token keyword">break</span>sys<span class="token punctuation">.</span>path<span class="token punctuation">.</span>append<span class="token punctuation">(</span>temp<span class="token punctuation">)</span><span class="token keyword">import</span> rospy<span class="token keyword">from</span> cv_bridge <span class="token keyword">import</span> CvBridge<span class="token keyword">from</span> sensor_msgs<span class="token punctuation">.</span>msg <span class="token keyword">import</span> Image<span class="token punctuation">,</span> CompressedImage<span class="token keyword">class</span> <span class="token class-name">iaiKinect2Viewer</span><span class="token punctuation">(</span>object<span class="token punctuation">)</span><span class="token punctuation">:</span>    bridge <span class="token operator">=</span> CvBridge<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> args<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> None<span class="token punctuation">:</span>        super<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>subcribers<span class="token punctuation">:</span> List<span class="token punctuation">[</span>rospy<span class="token punctuation">.</span>Subscriber<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>        self<span class="token punctuation">.</span>windows_idx <span class="token operator">=</span> <span class="token number">0</span>        <span class="token keyword">assert</span> len<span class="token punctuation">(</span>args<span class="token punctuation">.</span>topic<span class="token punctuation">)</span> <span class="token operator">%</span> len<span class="token punctuation">(</span>args<span class="token punctuation">.</span>quality<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">,</span> f<span class="token string">"è¯é¢˜æ•°ä¸åŒ¹é…"</span>        group_num <span class="token operator">=</span> len<span class="token punctuation">(</span>args<span class="token punctuation">.</span>topic<span class="token punctuation">)</span> <span class="token operator">//</span> len<span class="token punctuation">(</span>args<span class="token punctuation">.</span>quality<span class="token punctuation">)</span>        <span class="token keyword">for</span> quality <span class="token keyword">in</span> args<span class="token punctuation">.</span>quality<span class="token punctuation">:</span>            <span class="token keyword">for</span> i <span class="token keyword">in</span> range<span class="token punctuation">(</span>group_num<span class="token punctuation">)</span><span class="token punctuation">:</span>                temp_topic <span class="token operator">=</span> args<span class="token punctuation">.</span>topic<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>                self<span class="token punctuation">.</span>add_subscriber<span class="token punctuation">(</span>quality<span class="token punctuation">,</span> temp_topic<span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">add_subscriber</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> quality<span class="token punctuation">:</span> str<span class="token punctuation">,</span> topic<span class="token punctuation">:</span> str<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">assert</span> quality <span class="token keyword">in</span> <span class="token punctuation">[</span><span class="token string">"sd"</span><span class="token punctuation">,</span> <span class="token string">"qhd"</span><span class="token punctuation">,</span><span class="token string">"hd"</span><span class="token punctuation">]</span><span class="token punctuation">,</span> f<span class="token string">"æ— æ•ˆçš„è¯é¢˜ç»„"</span>        <span class="token keyword">print</span><span class="token punctuation">(</span>quality<span class="token punctuation">,</span> topic<span class="token punctuation">)</span>        topic <span class="token operator">=</span> topic<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">"_"</span><span class="token punctuation">)</span>        prefix <span class="token operator">=</span> <span class="token string">"/kinect2"</span>        <span class="token keyword">if</span> <span class="token string">"color"</span> <span class="token keyword">in</span> topic <span class="token operator">and</span> <span class="token string">"rect"</span> <span class="token keyword">in</span> topic <span class="token operator">and</span> <span class="token string">"compressed"</span> <span class="token operator">not</span> <span class="token keyword">in</span> topic<span class="token punctuation">:</span>            self<span class="token punctuation">.</span>subcribers<span class="token punctuation">.</span>append<span class="token punctuation">(</span>rospy<span class="token punctuation">.</span>Subscriber<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">"/"</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span><span class="token punctuation">[</span>prefix<span class="token punctuation">,</span> quality<span class="token punctuation">,</span> <span class="token string">"image_color_rect"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> data_class<span class="token operator">=</span>Image<span class="token punctuation">,</span> callback<span class="token operator">=</span>self<span class="token punctuation">.</span>show_images<span class="token punctuation">,</span> queue_size<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">,</span> callback_args<span class="token operator">=</span>self<span class="token punctuation">.</span>windows_idx<span class="token punctuation">)</span><span class="token punctuation">)</span>            self<span class="token punctuation">.</span>windows_idx <span class="token operator">+=</span> <span class="token number">1</span>        <span class="token keyword">elif</span> <span class="token string">"color"</span> <span class="token keyword">in</span> topic <span class="token operator">and</span> <span class="token string">"rect"</span> <span class="token keyword">in</span> topic <span class="token operator">and</span> <span class="token string">"compressed"</span> <span class="token keyword">in</span> topic<span class="token punctuation">:</span>            self<span class="token punctuation">.</span>subcribers<span class="token punctuation">.</span>append<span class="token punctuation">(</span>rospy<span class="token punctuation">.</span>Subscriber<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">"/"</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span><span class="token punctuation">[</span>prefix<span class="token punctuation">,</span> quality<span class="token punctuation">,</span> <span class="token string">"image_color_rect"</span><span class="token punctuation">,</span><span class="token string">"compressed"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> data_class<span class="token operator">=</span>CompressedImage<span class="token punctuation">,</span> callback<span class="token operator">=</span>self<span class="token punctuation">.</span>show_compressed_image<span class="token punctuation">,</span> queue_size<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">,</span> callback_args<span class="token operator">=</span>self<span class="token punctuation">.</span>windows_idx<span class="token punctuation">)</span><span class="token punctuation">)</span>            self<span class="token punctuation">.</span>windows_idx <span class="token operator">+=</span> <span class="token number">1</span>        <span class="token keyword">elif</span> <span class="token string">"color"</span> <span class="token keyword">in</span> topic <span class="token operator">and</span> <span class="token string">"rect"</span> <span class="token operator">not</span> <span class="token keyword">in</span>  topic <span class="token operator">and</span> <span class="token string">"compressed"</span> <span class="token operator">not</span> <span class="token keyword">in</span> topic<span class="token punctuation">:</span>            self<span class="token punctuation">.</span>subcribers<span class="token punctuation">.</span>append<span class="token punctuation">(</span>rospy<span class="token punctuation">.</span>Subscriber<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">"/"</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span><span class="token punctuation">[</span>prefix<span class="token punctuation">,</span> quality<span class="token punctuation">,</span> <span class="token string">"image_color"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> data_class<span class="token operator">=</span>Image<span class="token punctuation">,</span> callback<span class="token operator">=</span>self<span class="token punctuation">.</span>show_images<span class="token punctuation">,</span> queue_size<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">,</span> callback_args<span class="token operator">=</span>self<span class="token punctuation">.</span>windows_idx<span class="token punctuation">)</span><span class="token punctuation">)</span>            self<span class="token punctuation">.</span>windows_idx <span class="token operator">+=</span> <span class="token number">1</span>        <span class="token keyword">elif</span> <span class="token string">"color"</span> <span class="token keyword">in</span> topic <span class="token operator">and</span> <span class="token string">"rect"</span> <span class="token operator">not</span> <span class="token keyword">in</span>  topic <span class="token operator">and</span> <span class="token string">"compressed"</span> <span class="token keyword">in</span> topic<span class="token punctuation">:</span>            self<span class="token punctuation">.</span>subcribers<span class="token punctuation">.</span>append<span class="token punctuation">(</span>rospy<span class="token punctuation">.</span>Subscriber<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">"/"</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span><span class="token punctuation">[</span>prefix<span class="token punctuation">,</span> quality<span class="token punctuation">,</span> <span class="token string">"image_color"</span><span class="token punctuation">,</span> <span class="token string">"compressed"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> data_class<span class="token operator">=</span>CompressedImage<span class="token punctuation">,</span> callback<span class="token operator">=</span>self<span class="token punctuation">.</span>show_compressed_image<span class="token punctuation">,</span> queue_size<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">,</span> callback_args<span class="token operator">=</span>self<span class="token punctuation">.</span>windows_idx<span class="token punctuation">)</span><span class="token punctuation">)</span>            self<span class="token punctuation">.</span>windows_idx <span class="token operator">+=</span> <span class="token number">1</span>        <span class="token keyword">elif</span> <span class="token string">"depth"</span> <span class="token keyword">in</span> topic <span class="token operator">and</span> <span class="token string">"compressed"</span> <span class="token operator">not</span> <span class="token keyword">in</span> topic<span class="token punctuation">:</span>            self<span class="token punctuation">.</span>subcribers<span class="token punctuation">.</span>append<span class="token punctuation">(</span>rospy<span class="token punctuation">.</span>Subscriber<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">"/"</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span><span class="token punctuation">[</span>prefix<span class="token punctuation">,</span> quality<span class="token punctuation">,</span> <span class="token string">"image_depth_rect"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> data_class<span class="token operator">=</span>Image<span class="token punctuation">,</span> callback<span class="token operator">=</span>self<span class="token punctuation">.</span>show_images<span class="token punctuation">,</span> queue_size<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">,</span> callback_args<span class="token operator">=</span>self<span class="token punctuation">.</span>windows_idx<span class="token punctuation">)</span><span class="token punctuation">)</span>            self<span class="token punctuation">.</span>windows_idx <span class="token operator">+=</span> <span class="token number">1</span>        <span class="token keyword">elif</span> <span class="token string">"depth"</span> <span class="token keyword">in</span> topic <span class="token operator">and</span> <span class="token string">"compressed"</span> <span class="token keyword">in</span> topic<span class="token punctuation">:</span>            self<span class="token punctuation">.</span>subcribers<span class="token punctuation">.</span>append<span class="token punctuation">(</span>rospy<span class="token punctuation">.</span>Subscriber<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">"/"</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span><span class="token punctuation">[</span>prefix<span class="token punctuation">,</span> quality<span class="token punctuation">,</span> <span class="token string">"image_depth_rect"</span><span class="token punctuation">,</span> <span class="token string">"compressed"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> data_class<span class="token operator">=</span>CompressedImage<span class="token punctuation">,</span> callback<span class="token operator">=</span>self<span class="token punctuation">.</span>show_compressed_image<span class="token punctuation">,</span> queue_size<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">,</span> callback_args<span class="token operator">=</span>self<span class="token punctuation">.</span>windows_idx<span class="token punctuation">)</span><span class="token punctuation">)</span>            self<span class="token punctuation">.</span>windows_idx <span class="token operator">+=</span> <span class="token number">1</span>        <span class="token keyword">elif</span> <span class="token string">"mono"</span> <span class="token keyword">in</span> topic <span class="token operator">and</span> <span class="token string">"rect"</span> <span class="token keyword">in</span> topic <span class="token operator">and</span> <span class="token string">"compressed"</span> <span class="token operator">not</span> <span class="token keyword">in</span> topic<span class="token punctuation">:</span>            self<span class="token punctuation">.</span>subcribers<span class="token punctuation">.</span>append<span class="token punctuation">(</span>rospy<span class="token punctuation">.</span>Subscriber<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">"/"</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span><span class="token punctuation">[</span>prefix<span class="token punctuation">,</span> quality<span class="token punctuation">,</span> <span class="token string">"image_mono_rect"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> data_class<span class="token operator">=</span>Image<span class="token punctuation">,</span> callback<span class="token operator">=</span>self<span class="token punctuation">.</span>show_images<span class="token punctuation">,</span> queue_size<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">,</span> callback_args<span class="token operator">=</span>self<span class="token punctuation">.</span>windows_idx<span class="token punctuation">)</span><span class="token punctuation">)</span>            self<span class="token punctuation">.</span>windows_idx <span class="token operator">+=</span> <span class="token number">1</span>        <span class="token keyword">elif</span> <span class="token string">"mono"</span> <span class="token keyword">in</span> topic <span class="token operator">and</span> <span class="token string">"rect"</span> <span class="token keyword">in</span> topic <span class="token operator">and</span> <span class="token string">"compressed"</span> <span class="token keyword">in</span> topic<span class="token punctuation">:</span>            self<span class="token punctuation">.</span>subcribers<span class="token punctuation">.</span>append<span class="token punctuation">(</span>rospy<span class="token punctuation">.</span>Subscriber<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">"/"</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span><span class="token punctuation">[</span>prefix<span class="token punctuation">,</span> quality<span class="token punctuation">,</span> <span class="token string">"image_mono_rect"</span><span class="token punctuation">,</span><span class="token string">"compressed"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> data_class<span class="token operator">=</span>CompressedImage<span class="token punctuation">,</span> callback<span class="token operator">=</span>self<span class="token punctuation">.</span>show_compressed_image<span class="token punctuation">,</span> queue_size<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">,</span> callback_args<span class="token operator">=</span>self<span class="token punctuation">.</span>windows_idx<span class="token punctuation">)</span><span class="token punctuation">)</span>            self<span class="token punctuation">.</span>windows_idx <span class="token operator">+=</span> <span class="token number">1</span>        <span class="token keyword">elif</span> <span class="token string">"mono"</span> <span class="token keyword">in</span> topic <span class="token operator">and</span> <span class="token string">"rect"</span> <span class="token operator">not</span> <span class="token keyword">in</span>  topic <span class="token operator">and</span> <span class="token string">"compressed"</span> <span class="token operator">not</span> <span class="token keyword">in</span> topic<span class="token punctuation">:</span>            self<span class="token punctuation">.</span>subcribers<span class="token punctuation">.</span>append<span class="token punctuation">(</span>rospy<span class="token punctuation">.</span>Subscriber<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">"/"</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span><span class="token punctuation">[</span>prefix<span class="token punctuation">,</span> quality<span class="token punctuation">,</span> <span class="token string">"image_mono"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> data_class<span class="token operator">=</span>Image<span class="token punctuation">,</span> callback<span class="token operator">=</span>self<span class="token punctuation">.</span>show_images<span class="token punctuation">,</span> queue_size<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">,</span> callback_args<span class="token operator">=</span>self<span class="token punctuation">.</span>windows_idx<span class="token punctuation">)</span><span class="token punctuation">)</span>            self<span class="token punctuation">.</span>windows_idx <span class="token operator">+=</span> <span class="token number">1</span>        <span class="token keyword">elif</span> <span class="token string">"mono"</span> <span class="token keyword">in</span> topic <span class="token operator">and</span> <span class="token string">"rect"</span> <span class="token operator">not</span> <span class="token keyword">in</span>  topic <span class="token operator">and</span> <span class="token string">"compressed"</span> <span class="token keyword">in</span> topic<span class="token punctuation">:</span>            self<span class="token punctuation">.</span>subcribers<span class="token punctuation">.</span>append<span class="token punctuation">(</span>rospy<span class="token punctuation">.</span>Subscriber<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">"/"</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span><span class="token punctuation">[</span>prefix<span class="token punctuation">,</span> quality<span class="token punctuation">,</span> <span class="token string">"image_mono"</span><span class="token punctuation">,</span> <span class="token string">"compressed"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> data_class<span class="token operator">=</span>CompressedImage<span class="token punctuation">,</span> callback<span class="token operator">=</span>self<span class="token punctuation">.</span>show_compressed_image<span class="token punctuation">,</span> queue_size<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">,</span> callback_args<span class="token operator">=</span>self<span class="token punctuation">.</span>windows_idx<span class="token punctuation">)</span><span class="token punctuation">)</span>            self<span class="token punctuation">.</span>windows_idx <span class="token operator">+=</span> <span class="token number">1</span>        <span class="token keyword">elif</span> <span class="token string">"ir"</span> <span class="token keyword">in</span> topic <span class="token operator">and</span> <span class="token string">"rect"</span> <span class="token keyword">in</span> topic <span class="token operator">and</span> <span class="token string">"compressed"</span> <span class="token operator">not</span> <span class="token keyword">in</span> topic<span class="token punctuation">:</span>            self<span class="token punctuation">.</span>subcribers<span class="token punctuation">.</span>append<span class="token punctuation">(</span>rospy<span class="token punctuation">.</span>Subscriber<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">"/"</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span><span class="token punctuation">[</span>prefix<span class="token punctuation">,</span> quality<span class="token punctuation">,</span> <span class="token string">"image_ir_rect"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> data_class<span class="token operator">=</span>Image<span class="token punctuation">,</span> callback<span class="token operator">=</span>self<span class="token punctuation">.</span>show_images<span class="token punctuation">,</span> queue_size<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">,</span> callback_args<span class="token operator">=</span>self<span class="token punctuation">.</span>windows_idx<span class="token punctuation">)</span><span class="token punctuation">)</span>            self<span class="token punctuation">.</span>windows_idx <span class="token operator">+=</span> <span class="token number">1</span>        <span class="token keyword">elif</span> <span class="token string">"ir"</span> <span class="token keyword">in</span> topic <span class="token operator">and</span> <span class="token string">"rect"</span> <span class="token keyword">in</span> topic <span class="token operator">and</span> <span class="token string">"compressed"</span> <span class="token keyword">in</span> topic<span class="token punctuation">:</span>            self<span class="token punctuation">.</span>subcribers<span class="token punctuation">.</span>append<span class="token punctuation">(</span>rospy<span class="token punctuation">.</span>Subscriber<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">"/"</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span><span class="token punctuation">[</span>prefix<span class="token punctuation">,</span> quality<span class="token punctuation">,</span> <span class="token string">"image_ir_rect"</span><span class="token punctuation">,</span><span class="token string">"compressed"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> data_class<span class="token operator">=</span>CompressedImage<span class="token punctuation">,</span> callback<span class="token operator">=</span>self<span class="token punctuation">.</span>show_compressed_image<span class="token punctuation">,</span> queue_size<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">,</span> callback_args<span class="token operator">=</span>self<span class="token punctuation">.</span>windows_idx<span class="token punctuation">)</span><span class="token punctuation">)</span>            self<span class="token punctuation">.</span>windows_idx <span class="token operator">+=</span> <span class="token number">1</span>        <span class="token keyword">elif</span> <span class="token string">"ir"</span> <span class="token keyword">in</span> topic <span class="token operator">and</span> <span class="token string">"rect"</span> <span class="token operator">not</span> <span class="token keyword">in</span>  topic <span class="token operator">and</span> <span class="token string">"compressed"</span> <span class="token operator">not</span> <span class="token keyword">in</span> topic<span class="token punctuation">:</span>            self<span class="token punctuation">.</span>subcribers<span class="token punctuation">.</span>append<span class="token punctuation">(</span>rospy<span class="token punctuation">.</span>Subscriber<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">"/"</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span><span class="token punctuation">[</span>prefix<span class="token punctuation">,</span> quality<span class="token punctuation">,</span> <span class="token string">"image_ir"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> data_class<span class="token operator">=</span>Image<span class="token punctuation">,</span> callback<span class="token operator">=</span>self<span class="token punctuation">.</span>show_images<span class="token punctuation">,</span> queue_size<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">,</span> callback_args<span class="token operator">=</span>self<span class="token punctuation">.</span>windows_idx<span class="token punctuation">)</span><span class="token punctuation">)</span>            self<span class="token punctuation">.</span>windows_idx <span class="token operator">+=</span> <span class="token number">1</span>        <span class="token keyword">elif</span> <span class="token string">"ir"</span> <span class="token keyword">in</span> topic <span class="token operator">and</span> <span class="token string">"rect"</span> <span class="token operator">not</span> <span class="token keyword">in</span>  topic <span class="token operator">and</span> <span class="token string">"compressed"</span> <span class="token keyword">in</span> topic<span class="token punctuation">:</span>            self<span class="token punctuation">.</span>subcribers<span class="token punctuation">.</span>append<span class="token punctuation">(</span>rospy<span class="token punctuation">.</span>Subscriber<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">"/"</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span><span class="token punctuation">[</span>prefix<span class="token punctuation">,</span> quality<span class="token punctuation">,</span> <span class="token string">"image_ir"</span><span class="token punctuation">,</span> <span class="token string">"compressed"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> data_class<span class="token operator">=</span>CompressedImage<span class="token punctuation">,</span> callback<span class="token operator">=</span>self<span class="token punctuation">.</span>show_compressed_image<span class="token punctuation">,</span> queue_size<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">,</span> callback_args<span class="token operator">=</span>self<span class="token punctuation">.</span>windows_idx<span class="token punctuation">)</span><span class="token punctuation">)</span>            self<span class="token punctuation">.</span>windows_idx <span class="token operator">+=</span> <span class="token number">1</span>        <span class="token keyword">else</span><span class="token punctuation">:</span>            <span class="token keyword">assert</span> <span class="token boolean">False</span><span class="token punctuation">,</span> f<span class="token string">"æ— æ•ˆçš„å‚æ•°ï¼šqualitt={quality}, topic={topic}"</span>    <span class="token keyword">def</span> <span class="token function">show_images</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> img<span class="token punctuation">,</span> window_idx<span class="token punctuation">)</span><span class="token punctuation">:</span>        cv_img <span class="token operator">=</span> self<span class="token punctuation">.</span>bridge<span class="token punctuation">.</span>imgmsg_to_cv2<span class="token punctuation">(</span>img_msg<span class="token operator">=</span>img<span class="token punctuation">)</span>        cv2<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span>f<span class="token string">"viewer_{window_idx}"</span><span class="token punctuation">,</span> cv_img<span class="token punctuation">)</span>        <span class="token keyword">if</span> cv2<span class="token punctuation">.</span>waitKey<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">27</span><span class="token punctuation">:</span>            cv2<span class="token punctuation">.</span>destroyAllWindows<span class="token punctuation">(</span><span class="token punctuation">)</span>            rospy<span class="token punctuation">.</span>signal_shutdown<span class="token punctuation">(</span>reason<span class="token operator">=</span><span class="token string">"pressed esc"</span><span class="token punctuation">)</span>        <span class="token keyword">def</span> <span class="token function">show_compressed_image</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> img<span class="token punctuation">:</span> CompressedImage<span class="token punctuation">,</span> windows_idx<span class="token punctuation">)</span><span class="token punctuation">:</span>        cv_img <span class="token operator">=</span> self<span class="token punctuation">.</span>bridge<span class="token punctuation">.</span>compressed_imgmsg_to_cv2<span class="token punctuation">(</span>cmprs_img_msg<span class="token operator">=</span>img<span class="token punctuation">)</span>        cv2<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span>f<span class="token string">"viewer_{windows_idx}"</span><span class="token punctuation">,</span> cv_img<span class="token punctuation">)</span>        <span class="token keyword">if</span> cv2<span class="token punctuation">.</span>waitKey<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">27</span><span class="token punctuation">:</span>            cv2<span class="token punctuation">.</span>destroyAllWindows<span class="token punctuation">(</span><span class="token punctuation">)</span>            rospy<span class="token punctuation">.</span>signal_shutdown<span class="token punctuation">(</span>reason<span class="token operator">=</span><span class="token string">"pressed esc"</span><span class="token punctuation">)</span><span class="token keyword">def</span> <span class="token function">arg_parser</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> argparse<span class="token punctuation">.</span>Namespace<span class="token punctuation">:</span>    parser <span class="token operator">=</span> argparse<span class="token punctuation">.</span>ArgumentParser<span class="token punctuation">(</span>description<span class="token operator">=</span><span class="token string">"æœ¬ç¨‹åºç”¨äºå¯è§†åŒ–æ˜¾ç¤ºiai-kinect2çš„ä¸åŒè¯é¢˜ä¸­çš„å›¾ç‰‡ï¼Œä»¥å¯¹æ¯”ä»–ä»¬çš„ä¸åŒ"</span><span class="token punctuation">)</span>    parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">"-q"</span><span class="token punctuation">,</span> <span class="token string">"--quality"</span><span class="token punctuation">,</span> dest<span class="token operator">=</span><span class="token string">"quality"</span><span class="token punctuation">,</span> nargs<span class="token operator">=</span><span class="token string">"*"</span><span class="token punctuation">,</span> type<span class="token operator">=</span>str<span class="token punctuation">,</span> help<span class="token operator">=</span><span class="token string">"æŒ‡å®šéœ€è¦æ˜¾ç¤ºå›¾åƒçš„è¯é¢˜ç»„"</span><span class="token punctuation">)</span>    parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">"-t"</span><span class="token punctuation">,</span> <span class="token string">"--topic"</span><span class="token punctuation">,</span> dest<span class="token operator">=</span><span class="token string">"topic"</span><span class="token punctuation">,</span> nargs<span class="token operator">=</span><span class="token string">"+"</span><span class="token punctuation">,</span> type<span class="token operator">=</span>str<span class="token punctuation">,</span> help<span class="token operator">=</span><span class="token string">"æŒ‡å®šéœ€è¦æ˜¾ç¤ºå›¾åƒçš„è¯é¢˜"</span><span class="token punctuation">)</span>    <span class="token keyword">return</span> parser<span class="token punctuation">.</span>parse_args<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>    args <span class="token operator">=</span> arg_parser<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>args<span class="token punctuation">.</span>quality<span class="token punctuation">,</span> args<span class="token punctuation">.</span>topic<span class="token punctuation">)</span>    rospy<span class="token punctuation">.</span>init_node<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">"ini_kinect2_viewer"</span><span class="token punctuation">)</span>    viewer <span class="token operator">=</span> iaiKinect2Viewer<span class="token punctuation">(</span>args<span class="token operator">=</span>args<span class="token punctuation">)</span>    rospy<span class="token punctuation">.</span>spin<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä½¿ç”¨çš„è¯åˆ™åœ¨å‘½ä»¤è¡Œä¸­åŠ ä¸Šå‚æ•°ï¼Œ<code>-q</code>è¡¨ç¤ºå›¾åƒçš„è´¨é‡ï¼Œå³<code>qhd</code>ã€<code>sd</code>è¿˜æ˜¯<code>hd</code>ï¼Œ<code>-t</code>è¡¨ç¤ºæ˜¾ç¤ºçš„è¯é¢˜ã€‚å†™çš„æ—¶å€™æ˜¯æ”¯æŒå¤šä¸ªè¯é¢˜åŒæ—¶æ˜¾ç¤ºçš„ï¼Œä½†æ˜¯ä¸çŸ¥é“å“ªé‡Œå‡ºé—®é¢˜äº†æ˜¾ç¤ºä¸å‡ºæ¥</p><pre class="line-numbers language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># æ˜¾ç¤ºå•ä¸ªè¯é¢˜çš„å›¾åƒï¼š1/4 å¤§å°çš„ç°åº¦å›¾</span><span class="token punctuation">(</span>ros<span class="token punctuation">)</span> jack@jack-Alienware-m15-R3:~/project/install_iai_kinect2$ rosrun look_kenect2 look_images.py -q qhd -t mono<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211120152240529.png" alt="qhdä¸­monoé‡Œçš„é»‘ç™½å›¾åƒ"></p><pre class="line-numbers language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># æ˜¾ç¤ºå•ä¸ªè¯é¢˜çš„å›¾åƒï¼š1/4 å¤§å°çš„å½©è‰²å›¾</span><span class="token punctuation">(</span>ros<span class="token punctuation">)</span> jack@jack-Alienware-m15-R3:~/project/install_iai_kinect2$ rosrun look_kenect2 look_images.py -q qhd -t color<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211120152424998.png" alt="qhdä¸­coloré‡Œçš„å½©è‰²å›¾åƒ"></p><pre class="line-numbers language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># æ˜¾ç¤ºå•ä¸ªè¯é¢˜çš„å›¾åƒï¼š1/4 å¤§å°çš„æ·±åº¦å›¾</span><span class="token punctuation">(</span>ros<span class="token punctuation">)</span> jack@jack-Alienware-m15-R3:~/project/install_iai_kinect2$ rosrun look_kenect2 look_images.py -q qhd -t depth_compressed<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>éœ€è¦è¯´æ˜çš„æ˜¯ï¼Œqhdå’Œhdä¸­çš„æ·±åº¦å›¾åƒå¦‚æœä¸ç”¨compressedï¼Œå³ç›´æ¥ç”¨çš„kinecté‡‡é›†åˆ°çš„çš„ç‚¹çš„è¯ï¼Œé‚£ä¹ˆæ˜¾ç¤ºçš„éå¸¸å¡ï¼Œå› ä¸ºç‚¹äº‘çš„æ•°æ®å®åœ¨æ˜¯å¤ªå¤§äº†ï¼Œç”¨è€Œcompressedä¸­çš„æ•°æ®åˆ™æ˜¯iai-kinect2ç»è¿‡OpenCLã€CUDAåŠ é€Ÿæ¸²æŸ“ä¹‹åå¾—åˆ°çš„ï¼Œå› æ­¤å¸§ç‡æ¯”è¾ƒé«˜ã€‚æ­¤å¤–è·å–åˆ°çš„æ·±åº¦å›¾æ¯ä¸ªåƒç´ éƒ½æ˜¯ä¸€ä¸ªä»¥æ¯«ç±³ä¸ºå•ä½çš„è·ç¦»å€¼ï¼Œå› æ­¤ä½¿ç”¨OpenCVç›´æ¥æ˜¾ç¤ºçš„è¯è¢«åšäº†å½’ä¸€åŒ–ï¼Œæ‰€ä»¥è¶Šè¿‘çš„åœ°æ–¹è¶Šé»‘ï¼Œè¶Šè¿œçš„åœ°æ–¹è¶Šç™½ï¼Œä¸€äº›å¼‚å¸¸ç‚¹ï¼Œå³æ²¡æœ‰åå°„çš„ç‚¹è·ç¦»è¢«è®¤ä¸ºæ˜¯æ‘„åƒå¤´è·å–è·ç¦»çš„æé™å€¼ï¼ˆ&gt;1200ï¼Œå³è¶…è¿‡12ç±³ï¼‰ï¼Œå› æ­¤è¿™äº›å¼‚å¸¸ç‚¹ä½¿å¾—å½’ä¸€åŒ–ä¹‹ååŸºæœ¬éƒ½æ˜¯é»‘çš„ï¼Œæˆ‘ä»¬è‡ªå·±ä½¿ç”¨çš„æ—¶å€™ä¸€å®šè¦å…ˆå¤„ç†å¼‚å¸¸ç‚¹ç„¶åå†å½’ä¸€åŒ–ï¼Œæœ€åå†æ˜¾ç¤º</p><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211120153143101.png" alt="qhdé‡Œçš„æ·±åº¦å›¾"></p><pre class="line-numbers language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># æ˜¾ç¤ºå•ä¸ªè¯é¢˜çš„å›¾åƒï¼šsdå¤§å°çš„çº¢å¤–å›¾åƒ</span><span class="token punctuation">(</span>ros<span class="token punctuation">)</span> jack@jack-Alienware-m15-R3:~/project/install_iai_kinect2$ rosrun look_kenect2 look_images.py -q sd -t ir_rect<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>éœ€è¦è¯´æ˜çš„æ˜¯ï¼ŒKinect V2ç›¸æœºæœ‰ä¸€ä¸ªçº¢å¤–å‘å°„å™¨ï¼Œä¸€ä¸ªçº¢å¤–æ¥æ”¶å™¨ï¼Œå› æ­¤è·ç¦»è¶Šè¿‘ï¼Œè¡¨é¢è¶Šå…‰æ»‘ï¼Œæ¥æ”¶å™¨æ¥æ”¶åˆ°åå°„çš„çº¢å¤–çº¿è¶Šå¼ºï¼Œæ•°å€¼è¶Šé«˜ï¼Œå¯¹åº”å°±è¶Šç™½</p><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211120154330718.png" alt="sdé‡Œçš„çº¢å¤–å›¾"></p><pre class="line-numbers language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># æ˜¾ç¤ºå•ä¸ªè¯é¢˜çš„å›¾åƒï¼šsdå¤§å°çš„è‰²å½©å›¾</span>^<span class="token punctuation">(</span>ros<span class="token punctuation">)</span> jack@jack-Alienware-m15-R3:~/project/install_iai_kinect2$ rosrun look_kenect2 look_images.py -q sd -t color_rect<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>ç†è®ºä¸Šæ¥è¯´ï¼Œsdè¯é¢˜é‡Œæ˜¾ç¤ºçš„éƒ½æ˜¯çº¢å¤–ç›¸æœºæ‹æ‘„å¾—åˆ°çš„å›¾ç‰‡ï¼Œå› æ­¤ä¸ä¼šå­˜åœ¨é¢œè‰²ï¼Œæ‰€ä»¥è¿™é‡Œå…¶å®æ˜¯æŠŠRGBç›¸æœºæ‹åˆ°çš„å›¾ç‰‡å’Œçº¢å¤–ç›¸æœºå›¾ç‰‡é…å‡†ä¹‹åçš„ç»“æœ</p><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211120154705830.png" alt="sdé‡Œçš„color_rect"></p><h3 id="B-YOLO-V5è¿›è¡Œç‰©ä½“æ£€æµ‹"><a href="#B-YOLO-V5è¿›è¡Œç‰©ä½“æ£€æµ‹" class="headerlink" title="B. YOLO V5è¿›è¡Œç‰©ä½“æ£€æµ‹"></a>B. YOLO V5è¿›è¡Œç‰©ä½“æ£€æµ‹</h3><p>åˆ©ç”¨ä¹‹å‰å†™å¥½çš„YOLO V5ï¼Œå¯ä»¥å®ç°ç‰©ä½“æ£€æµ‹ï¼Œç„¶åæ ¹æ®æ·±åº¦å›¾åƒæ¥æ ‡æ³¨å‡ºç‰©ä½“çš„è·ç¦»</p><p>YOLO V5çš„ä»£ç åé¢æ•´ç†å‡ºæ¥ä¼šæ”¾å‡ºæ¥ï¼Œè¿™é‡Œå…ˆç”¨ä¸€ç”¨ï¼Œä¸‹é¢çš„ä»£ç éœ€è¦æ³¨æ„çš„æ˜¯rospyä¸­çš„message_filterå¦‚æœæ¶ˆæ¯é¢‘ç‡é€Ÿåº¦è¿‡å¿«ï¼Œç”šè‡³å¿«è¿‡äº†message_filterå¤„ç†çš„é€Ÿåº¦ï¼Œé‚£ä¹ˆå°±ä¼šå¯¼è‡´ä¸¤ä¸ªæ¶ˆæ¯æ— æ³•å¯¹åº”èµ·æ¥ï¼Œå› æ­¤å°±æ°¸è¿œä¸ä¼šè°ƒç”¨å›è°ƒå‡½æ•°ï¼Œå› æ­¤cv2.waitkeyéœ€è¦ç­‰10æ¯«ç§’å·¦å³</p><pre class="line-numbers language-python"><code class="language-python"><span class="token comment" spellcheck="true">#! /home/jack/anaconda3/envs/ros/bin/python</span><span class="token keyword">import</span> sys<span class="token keyword">import</span> time<span class="token keyword">from</span> pathlib <span class="token keyword">import</span> Path<span class="token keyword">import</span> cv2<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np<span class="token keyword">from</span> colorama <span class="token keyword">import</span> Fore<span class="token punctuation">,</span> Style<span class="token keyword">from</span> libyolo <span class="token keyword">import</span> YoloV5stemp_path <span class="token operator">=</span> None<span class="token keyword">for</span> path_idx <span class="token keyword">in</span> range<span class="token punctuation">(</span>len<span class="token punctuation">(</span>sys<span class="token punctuation">.</span>path<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">if</span> <span class="token string">"2.7"</span> <span class="token keyword">in</span> sys<span class="token punctuation">.</span>path<span class="token punctuation">[</span>path_idx<span class="token punctuation">]</span><span class="token punctuation">:</span>        temp_path <span class="token operator">=</span> sys<span class="token punctuation">.</span>path<span class="token punctuation">.</span>pop<span class="token punctuation">(</span>path_idx<span class="token punctuation">)</span>        <span class="token keyword">break</span><span class="token keyword">if</span> temp_path <span class="token keyword">is</span> <span class="token operator">not</span> None<span class="token punctuation">:</span>    sys<span class="token punctuation">.</span>path<span class="token punctuation">.</span>append<span class="token punctuation">(</span>temp_path<span class="token punctuation">)</span><span class="token keyword">import</span> rospy<span class="token keyword">import</span> message_filters<span class="token keyword">from</span> sensor_msgs<span class="token punctuation">.</span>msg <span class="token keyword">import</span> CompressedImage<span class="token keyword">from</span> cv_bridge <span class="token keyword">import</span> CvBridge<span class="token keyword">class</span> <span class="token class-name">DetectYoloKinect</span><span class="token punctuation">(</span>object<span class="token punctuation">)</span><span class="token punctuation">:</span>    yolo <span class="token operator">=</span> YoloV5s<span class="token punctuation">(</span>weight_path<span class="token operator">=</span>Path<span class="token punctuation">(</span>__file__<span class="token punctuation">)</span><span class="token punctuation">.</span>resolve<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>parent<span class="token punctuation">.</span>parent<span class="token punctuation">.</span>joinpath<span class="token punctuation">(</span><span class="token string">"models"</span><span class="token punctuation">,</span> <span class="token string">"yolov5s.pt"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    bridge <span class="token operator">=</span> CvBridge<span class="token punctuation">(</span><span class="token punctuation">)</span>    font <span class="token operator">=</span> cv2<span class="token punctuation">.</span>FONT_HERSHEY_DUPLEX    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> rgb_img_topic<span class="token punctuation">:</span> str<span class="token punctuation">,</span> depth_img_topic<span class="token punctuation">:</span> str<span class="token punctuation">,</span> if_detection_only<span class="token punctuation">:</span> bool <span class="token operator">=</span> <span class="token boolean">False</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> None<span class="token punctuation">:</span>        super<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span><span class="token punctuation">)</span>        rospy<span class="token punctuation">.</span>loginfo<span class="token punctuation">(</span>msg<span class="token operator">=</span>f<span class="token string">"{Fore.GREEN}å¯åŠ¨ç‰©ä½“æ£€æµ‹èŠ‚ç‚¹ï¼{Style.RESET_ALL}"</span><span class="token punctuation">)</span>        <span class="token keyword">if</span> if_detection_only<span class="token punctuation">:</span>            rospy<span class="token punctuation">.</span>Subscriber<span class="token punctuation">(</span>name<span class="token operator">=</span>rgb_img_topic<span class="token punctuation">,</span> data_class<span class="token operator">=</span>CompressedImage<span class="token punctuation">,</span> callback<span class="token operator">=</span>self<span class="token punctuation">.</span>_detect_only_cb<span class="token punctuation">,</span>                             queue_size<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">)</span>        <span class="token keyword">else</span><span class="token punctuation">:</span>            rgb_subscriber <span class="token operator">=</span> message_filters<span class="token punctuation">.</span>Subscriber<span class="token punctuation">(</span>rgb_img_topic<span class="token punctuation">,</span> CompressedImage<span class="token punctuation">)</span>            depth_subscriber <span class="token operator">=</span> message_filters<span class="token punctuation">.</span>Subscriber<span class="token punctuation">(</span>depth_img_topic<span class="token punctuation">,</span> CompressedImage<span class="token punctuation">)</span>            sync <span class="token operator">=</span> message_filters<span class="token punctuation">.</span>ApproximateTimeSynchronizer<span class="token punctuation">(</span>fs<span class="token operator">=</span><span class="token punctuation">[</span>rgb_subscriber<span class="token punctuation">,</span> depth_subscriber<span class="token punctuation">]</span><span class="token punctuation">,</span> queue_size<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">,</span>                                                               slop<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>            sync<span class="token punctuation">.</span>registerCallback<span class="token punctuation">(</span>self<span class="token punctuation">.</span>_multi_cb<span class="token punctuation">)</span>        self<span class="token punctuation">.</span>last_time_rgb <span class="token operator">=</span> time<span class="token punctuation">.</span>time<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">_detect_only_cb</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> img<span class="token punctuation">:</span> CompressedImage<span class="token punctuation">)</span><span class="token punctuation">:</span>        cv_image<span class="token punctuation">:</span> np<span class="token punctuation">.</span>ndarray <span class="token operator">=</span> self<span class="token punctuation">.</span>bridge<span class="token punctuation">.</span>compressed_imgmsg_to_cv2<span class="token punctuation">(</span>cmprs_img_msg<span class="token operator">=</span>img<span class="token punctuation">)</span>        result_dict<span class="token punctuation">,</span> draw_img <span class="token operator">=</span> self<span class="token punctuation">.</span>yolo<span class="token punctuation">.</span>inference<span class="token punctuation">(</span>cv_image<span class="token punctuation">,</span> if_absolute<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> if_show<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>        t2 <span class="token operator">=</span> time<span class="token punctuation">.</span>time<span class="token punctuation">(</span><span class="token punctuation">)</span>        draw_img <span class="token operator">=</span> cv2<span class="token punctuation">.</span>putText<span class="token punctuation">(</span>draw_img<span class="token punctuation">,</span> f<span class="token string">"fps: {1 / (t2 - self.last_time_rgb):>5.2f}, seq_id: {img.header.seq}"</span><span class="token punctuation">,</span>                               <span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span> self<span class="token punctuation">.</span>font<span class="token punctuation">,</span> <span class="token number">0.8</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>last_time_rgb <span class="token operator">=</span> t2        cv2<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span><span class="token string">"color_detections"</span><span class="token punctuation">,</span> draw_img<span class="token punctuation">)</span>        <span class="token keyword">if</span> cv2<span class="token punctuation">.</span>waitKey<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">27</span><span class="token punctuation">:</span>            cv2<span class="token punctuation">.</span>destroyAllWindows<span class="token punctuation">(</span><span class="token punctuation">)</span>            rospy<span class="token punctuation">.</span>logwarn<span class="token punctuation">(</span><span class="token string">"æŒ‰ä¸‹äº†ESCé”®ï¼Œç»ˆæ­¢èŠ‚ç‚¹..."</span><span class="token punctuation">)</span>            rospy<span class="token punctuation">.</span>signal_shutdown<span class="token punctuation">(</span>reason<span class="token operator">=</span><span class="token string">"pressed esc"</span><span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">_multi_cb</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> rgb_img<span class="token punctuation">:</span> CompressedImage<span class="token punctuation">,</span> depth_img<span class="token punctuation">:</span> CompressedImage<span class="token punctuation">)</span><span class="token punctuation">:</span>        rospy<span class="token punctuation">.</span>loginfo<span class="token punctuation">(</span><span class="token string">"Getting into _multi_cb"</span><span class="token punctuation">)</span>        cv_rgb<span class="token punctuation">:</span> np<span class="token punctuation">.</span>ndarray <span class="token operator">=</span> self<span class="token punctuation">.</span>bridge<span class="token punctuation">.</span>compressed_imgmsg_to_cv2<span class="token punctuation">(</span>cmprs_img_msg<span class="token operator">=</span>rgb_img<span class="token punctuation">)</span>        cv_depth<span class="token punctuation">:</span> np<span class="token punctuation">.</span>ndarray <span class="token operator">=</span> self<span class="token punctuation">.</span>bridge<span class="token punctuation">.</span>compressed_imgmsg_to_cv2<span class="token punctuation">(</span>cmprs_img_msg<span class="token operator">=</span>depth_img<span class="token punctuation">)</span>        cv_depth_draw<span class="token punctuation">:</span> np<span class="token punctuation">.</span>ndarray <span class="token operator">=</span> np<span class="token punctuation">.</span>stack<span class="token punctuation">(</span><span class="token punctuation">[</span>cv_depth<span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token number">3</span><span class="token punctuation">,</span> axis<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span>  <span class="token comment" spellcheck="true"># to BGR</span>        cv_depth_draw <span class="token operator">=</span> <span class="token punctuation">(</span>cv_depth_draw <span class="token operator">-</span> cv_depth_draw<span class="token punctuation">.</span>min<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token punctuation">(</span>cv_depth_draw<span class="token punctuation">.</span>max<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> cv_depth_draw<span class="token punctuation">.</span>min<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token comment" spellcheck="true"># inference</span>        result_dict<span class="token punctuation">,</span> cv_rgb_draw <span class="token operator">=</span> self<span class="token punctuation">.</span>yolo<span class="token punctuation">.</span>inference<span class="token punctuation">(</span>cv_rgb<span class="token punctuation">,</span> if_absolute<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> if_show<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>        <span class="token comment" spellcheck="true"># log time</span>        t <span class="token operator">=</span> time<span class="token punctuation">.</span>time<span class="token punctuation">(</span><span class="token punctuation">)</span>        fps <span class="token operator">=</span> round<span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">/</span> <span class="token punctuation">(</span>t <span class="token operator">-</span> self<span class="token punctuation">.</span>last_time_rgb<span class="token punctuation">)</span><span class="token punctuation">,</span> ndigits<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span>        self<span class="token punctuation">.</span>last_time_rgb <span class="token operator">=</span> t        rospy<span class="token punctuation">.</span>loginfo<span class="token punctuation">(</span>msg<span class="token operator">=</span><span class="token string">"Done inference, start to draw"</span><span class="token punctuation">)</span>        <span class="token comment" spellcheck="true"># draw basic info</span>        cv_rgb_draw <span class="token operator">=</span> cv2<span class="token punctuation">.</span>putText<span class="token punctuation">(</span>cv_rgb_draw<span class="token punctuation">,</span> f<span class="token string">"FPS:{fps}, seq:{depth_img.header.seq}"</span><span class="token punctuation">,</span>                                  org<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span> fontFace<span class="token operator">=</span>self<span class="token punctuation">.</span>font<span class="token punctuation">,</span> fontScale<span class="token operator">=</span><span class="token number">0.8</span><span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> thickness<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span>        cv_depth_draw <span class="token operator">=</span> cv2<span class="token punctuation">.</span>putText<span class="token punctuation">(</span>cv_depth_draw<span class="token punctuation">,</span> f<span class="token string">"FPS:{fps}, seq:{depth_img.header.seq}"</span><span class="token punctuation">,</span>                                    org<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span> fontFace<span class="token operator">=</span>self<span class="token punctuation">.</span>font<span class="token punctuation">,</span> fontScale<span class="token operator">=</span><span class="token number">0.8</span><span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> thickness<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span>        <span class="token comment" spellcheck="true"># draw depth</span>        rospy<span class="token punctuation">.</span>loginfo<span class="token punctuation">(</span>msg<span class="token operator">=</span><span class="token string">"Done draw basic, start draw depth"</span><span class="token punctuation">)</span>        <span class="token keyword">for</span> d_type<span class="token punctuation">,</span> items <span class="token keyword">in</span> result_dict<span class="token punctuation">.</span>items<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>            <span class="token keyword">for</span> item <span class="token keyword">in</span> items<span class="token punctuation">:</span>                <span class="token comment" spellcheck="true"># å‘¨å›´100ä¸ªç‚¹çš„å¹³å‡ï¼Œyoloçš„ç»“æœå·²ç»ç¡®ä¿ç‚¹åœ¨å›¾åƒå†…</span>                depth <span class="token operator">=</span> self<span class="token punctuation">.</span>__get_depth<span class="token punctuation">(</span><span class="token punctuation">(</span>x <span class="token punctuation">:</span><span class="token operator">=</span> item<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>y <span class="token punctuation">:</span><span class="token operator">=</span> item<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> depth_image<span class="token operator">=</span>cv_depth<span class="token punctuation">,</span> area_size<span class="token operator">=</span><span class="token number">20</span><span class="token punctuation">)</span>                x<span class="token punctuation">,</span> y <span class="token operator">=</span> int<span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">,</span> int<span class="token punctuation">(</span>y<span class="token punctuation">)</span>                cv_depth_draw <span class="token operator">=</span> cv2<span class="token punctuation">.</span>putText<span class="token punctuation">(</span>cv_depth_draw<span class="token punctuation">,</span> text<span class="token operator">=</span>f<span class="token string">"{d_type}, {depth / 10:>.2f}m"</span><span class="token punctuation">,</span> org<span class="token operator">=</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token number">-5</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                                            fontFace<span class="token operator">=</span>self<span class="token punctuation">.</span>font<span class="token punctuation">,</span> fontScale<span class="token operator">=</span><span class="token number">0.8</span><span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> lineType<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span>                cv_depth_draw <span class="token operator">=</span> cv2<span class="token punctuation">.</span>circle<span class="token punctuation">(</span>cv_depth_draw<span class="token punctuation">,</span> center<span class="token operator">=</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">,</span> radius<span class="token operator">=</span><span class="token number">5</span><span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                                           thickness<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">,</span> lineType<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span>        rospy<span class="token punctuation">.</span>loginfo<span class="token punctuation">(</span>msg<span class="token operator">=</span>f<span class="token string">"Done Drawing"</span><span class="token punctuation">)</span>        cv2<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span><span class="token string">"detection_result"</span><span class="token punctuation">,</span> cv_rgb_draw<span class="token punctuation">)</span>        cv2<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span><span class="token string">"depth_result"</span><span class="token punctuation">,</span> cv_depth_draw<span class="token punctuation">)</span>        <span class="token keyword">if</span> cv2<span class="token punctuation">.</span>waitKey<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">27</span><span class="token punctuation">:</span>            cv2<span class="token punctuation">.</span>destroyAllWindows<span class="token punctuation">(</span><span class="token punctuation">)</span>            rospy<span class="token punctuation">.</span>logwarn<span class="token punctuation">(</span>msg<span class="token operator">=</span>f<span class="token string">"æŒ‰ä¸‹äº†ESCé”®ï¼Œæ‰‹åŠ¨å…³é—­äº†èŠ‚ç‚¹"</span><span class="token punctuation">)</span>            rospy<span class="token punctuation">.</span>signal_shutdown<span class="token punctuation">(</span>reason<span class="token operator">=</span><span class="token string">"pressed esc"</span><span class="token punctuation">)</span>    @staticmethod    <span class="token keyword">def</span> <span class="token function">__get_depth</span><span class="token punctuation">(</span>x<span class="token punctuation">:</span> float<span class="token punctuation">,</span> y<span class="token punctuation">:</span> float<span class="token punctuation">,</span> depth_image<span class="token punctuation">:</span> np<span class="token punctuation">.</span>ndarray<span class="token punctuation">,</span> area_size<span class="token punctuation">:</span> int <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> float<span class="token punctuation">:</span>        boundary <span class="token operator">=</span> <span class="token punctuation">[</span>int<span class="token punctuation">(</span>position<span class="token punctuation">)</span> <span class="token keyword">for</span> position <span class="token keyword">in</span>                    <span class="token punctuation">[</span>y <span class="token operator">-</span> area_size <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> y <span class="token operator">+</span> area_size <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> x <span class="token operator">-</span> area_size <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> x <span class="token operator">+</span> area_size <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">]</span>        <span class="token keyword">return</span> depth_image<span class="token punctuation">[</span>boundary<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">:</span>boundary<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> boundary<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">:</span>boundary<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span>mean<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>    rospy<span class="token punctuation">.</span>init_node<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">"detect_yolo_kinect2"</span><span class="token punctuation">,</span> anonymous<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>    dyk <span class="token operator">=</span> DetectYoloKinect<span class="token punctuation">(</span>rgb_img_topic<span class="token operator">=</span><span class="token string">"/kinect2/qhd/image_color/compressed"</span><span class="token punctuation">,</span>                           depth_img_topic<span class="token operator">=</span><span class="token string">"/kinect2/qhd/image_depth_rect/compressed"</span><span class="token punctuation">,</span> if_detection_only<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>    rospy<span class="token punctuation">.</span>spin<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æœ€åå¾—åˆ°çš„æ•ˆæœå¦‚ä¸‹ï¼Œå¯ä»¥çœ‹åˆ°YOLOè¿˜æ˜¯å¯ä»¥çš„ï¼Œä¸è¿‡æœ‰çš„æ—¶å€™ä¼šè¯†åˆ«é”™è¯¯ï¼Œä¾‹å¦‚æŠŠçº¸æ¿è¯†åˆ«æˆäº†æ²™å‘ã€‚è€Œä¸”åœ¨æ·±åº¦å›¾ä¸­ï¼Œè¶Šé è¿‘è¾¹ç¼˜å®é™…ä¸Šè¶Šä¸å‡†ç¡®ï¼Œå¦‚æœæ²¡æœ‰åå°„å›æ¥çš„è¯è·ç¦»å°±è¢«è®°ä¸º0ã€‚</p><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211121155602208.png" alt="YOLOå’Œæ·±åº¦å›¾é…å‡†"></p>]]></content>
      
      
      <categories>
          
          <category> ROSæ‚ç¯‡ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ROS </tag>
            
            <tag> cv_bridge </tag>
            
            <tag> Ubuntu </tag>
            
            <tag> melodic </tag>
            
            <tag> OpenCv </tag>
            
            <tag> sensor_msgs </tag>
            
            <tag> roslaunch </tag>
            
            <tag> Kinect V2 </tag>
            
            <tag> iai-kinect2 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ROSæ‚ç¯‡ ROSä¸­ä½¿ç”¨Kinect V2 Part1ï¼šå®‰è£…+ä½¿ç”¨</title>
      <link href="/2021/11/18/ros-za-pian-an-zhuang-kinect-v2-qu-dong/"/>
      <url>/2021/11/18/ros-za-pian-an-zhuang-kinect-v2-qu-dong/</url>
      
        <content type="html"><![CDATA[<blockquote><p>Kinectæ˜¯éå¸¸æµè¡Œçš„è·å–æ·±åº¦ã€å½©è‰²ã€ç‚¹äº‘çš„ç›¸æœºã€‚æœ¬æ–‡ä»‹ç»äº†Kinectç›¸æœºçš„å…·ä½“æ€§èƒ½ï¼Œä»¥åŠå¦‚ä½•åœ¨ROSè°ƒç”¨Kinectç›¸æœºã€‚</p></blockquote><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211118214830894.png" alt="æœ€ç»ˆæ•ˆæœå›¾"></p><span id="more"></span><h1 id="ROSæ‚ç¯‡-ROSä¸­ä½¿ç”¨Kinect-V2-Part1ï¼šå®‰è£…-ä½¿ç”¨"><a href="#ROSæ‚ç¯‡-ROSä¸­ä½¿ç”¨Kinect-V2-Part1ï¼šå®‰è£…-ä½¿ç”¨" class="headerlink" title="ROSæ‚ç¯‡ ROSä¸­ä½¿ç”¨Kinect V2 Part1ï¼šå®‰è£…+ä½¿ç”¨"></a>ROSæ‚ç¯‡ ROSä¸­ä½¿ç”¨Kinect V2 Part1ï¼šå®‰è£…+ä½¿ç”¨</h1><blockquote><p>å‰è¨€ï¼šä¸ºä»€ä¹ˆè¦å†™è¿™ç¯‡åšå®¢</p></blockquote><p>ç”±äºæˆ‘ç›®å‰çš„å·¥ä½œéœ€è¦æˆ‘ç¼–å†™æœåŠ¡æœºå™¨äººçš„ä»£ç ï¼Œè€ŒæœåŠ¡æœºå™¨äººå°±å…ä¸äº†éœ€è¦è§†è§‰ä¿¡æ¯æ¥æŒ‡å¯¼æœºå™¨äººå®ŒæˆæœåŠ¡ã€‚åŒ…æ‹¬RGBå½©è‰²ç›¸æœºè·å¾—çš„å½©è‰²å›¾åƒã€æ·±åº¦ç›¸æœºè·å¾—çš„æ·±åº¦å›¾åƒç­‰ç­‰å„ç§è§†è§‰ä¼ æ„Ÿå™¨ã€‚å¯¹äºç®€å•çš„RGBç›¸æœºæ‹æ‘„åˆ°çš„RGBå½©è‰²å›¾åƒï¼Œç”±äºå…¨çƒç»Ÿä¸€çš„æ¥å£ï¼Œå› æ­¤æœ‰å¾ˆå¤šå·¥å…·éƒ½å¯ä»¥å¸®åŠ©æˆ‘ä»¬ä»<code>/dev/video*</code>ä¸­è¯»å–åˆ°å½©è‰²å›¾åƒã€‚é€šè¿‡OpenCVçš„<code>VideoCapture</code>å°±å¯ä»¥è¯»åˆ°ã€‚ç„¶è€Œé—®é¢˜çš„å…³é”®åœ¨äºï¼Œé’ˆå¯¹ä¸€äº›ç‰¹å®šçš„è®¾å¤‡ï¼Œä¾‹å¦‚æ·±åº¦ç›¸æœºï¼Œç›®å‰å…¨çƒå°šæ— ç»Ÿä¸€çš„æ ‡å‡†ï¼Œå› æ­¤åœ¨æ•°æ®æµä¸­å›¾åƒçš„æ ¼å¼å„ä¸ªå‚å®¶éƒ½æ˜¯ä¸ä¸€æ ·çš„ã€‚å› æ­¤è¿™ä¸ªæ—¶å€™æƒ³è¦è¯»å–åˆ°è¿™äº›ç‰¹æ®Šç›¸æœºçš„å›¾åƒå°±éœ€è¦èŠ±ä¸€ç•ªåŠŸå¤«äº†ã€‚å°¤å…¶æ˜¯åœ¨ç¡¬ä»¶å‚å•†ä¸æä¾›Linuxçš„é©±åŠ¨çš„æ—¶å€™æ›´éš¾å—ã€‚</p><p>ç”±äºæˆ‘å…·ä½“çš„å¼€å‘å¹³å°é…ç½®å°±æ˜¯ <code>Ubuntu 18.04</code> + <code>ROS Melodic</code> + <code>Kinect V2</code>ç›¸æœºã€‚<strong>æ‰€ä»¥ç‰¹åœ°å†™è¿™ç¯‡åšå®¢è®°å½•ä¸€ä¸‹ROSä¸­å¦‚ä½•é…ç½®Kinect V2ç›¸æœº</strong></p><p><strong>ä¸‹æ–‡é’ˆå¯¹Ubutnu 18.04 + ROS Melodic éªŒè¯å¯è¡Œ</strong></p><h2 id="1-ä»€ä¹ˆæ˜¯-Kinect-ç›¸æœºï¼Ÿ"><a href="#1-ä»€ä¹ˆæ˜¯-Kinect-ç›¸æœºï¼Ÿ" class="headerlink" title="1. ä»€ä¹ˆæ˜¯ Kinect ç›¸æœºï¼Ÿ"></a>1. ä»€ä¹ˆæ˜¯ Kinect ç›¸æœºï¼Ÿ</h2><blockquote><p>æ­£å¦‚æˆ‘ä¸€å‘çš„æ€åº¦ï¼Œå­¦ä»€ä¹ˆã€åšä»€ä¹ˆå‰å…ˆé—®é—®ä¸ºä»€ä¹ˆè¦å­¦/åšï¼Œå†é—®é—®è‡ªå·±å­¦/åšçš„æ˜¯ä»€ä¹ˆã€‚ä¸ºä»€ä¹ˆè¦åšä¸Šé¢å·²ç»å›ç­”äº†ï¼Œå› ä¸ºæˆ‘éœ€è¦ç”¨å®ƒã€‚é‚£æ¥ä¸‹æ¥å°±æ˜¯è¦åšçš„æ˜¯ä»€ä¹ˆï¼Ÿ</p></blockquote><p>ä¸ªäººçš„è§’åº¦æ¥è¯´ï¼Œ<code>Kinect</code> ç›¸æœºå°±æ˜¯ä¸€æ¬¾ç‰¹æ®Šçš„ç›¸æœºï¼Œä»–å¯ä»¥è¯»å–åˆ°RGBå½©è‰²å›¾åƒå’Œæ·±åº¦å›¾åƒï¼Œé€šè¿‡<code>Kinect</code>ç›¸æœºé‡‡é›†åˆ°çš„å›¾åƒå’Œæ·±åº¦ä¿¡æ¯ï¼Œæˆ‘ä»¬å°±èƒ½å¤Ÿå¿«ä¹çš„è¿›è¡Œå¼€å‘~</p><p>è™½ç„¶<code>Kinect V2</code>åœ¨2017å¹´ç”±äº<code>Xbox</code>å–æ¶ˆäº†<code>Kinect</code>çš„æ¥å£è€Œåœäº§ï¼Œä½†æ˜¯å‘ç°åˆ°<code>Kinect</code>ç›¸æœºä»·å€¼çš„å¾®è½¯éšåæ¨å‡ºçš„ <code>Kinect V3</code> å’Œ <code>Kinect DK</code> éƒ½æ˜¯ä¸“é—¨ä¸ºç§‘ç ”æ¨å‡ºçš„è®¾å¤‡ã€‚ï¼ˆæˆ‘æœ‰å¹¸ç”¨è¿‡ <code>Kinect DK</code>ï¼Œä¸Šé¢éƒ¨ç½²äº†ç°æˆçš„ <code>Human Motion Estimation</code> çš„æ¨¡å‹ï¼Œå¯ä»¥ç›´æ¥è·å¾—äººä½“çš„å…³é”®ç‚¹ï¼Œéå¸¸å¥½ç”¨ï¼‰</p><blockquote><p>æ‘˜è‡ª<code>ç»´åŸºç™¾ç§‘</code></p><p><strong>Kinect</strong>æ˜¯ç”±<a href="https://zh.wikipedia.org/wiki/%E5%BE%AE%E8%BB%9F">å¾®è½¯</a>å¼€å‘ï¼Œåº”ç”¨äº<a href="https://zh.wikipedia.org/wiki/Xbox_360">Xbox 360</a>å’Œ<a href="https://zh.wikipedia.org/wiki/Xbox_One">Xbox One</a>ä¸»æœºçš„å‘¨è¾¹è®¾å¤‡ã€‚å®ƒè®©ç©å®¶ä¸éœ€è¦æ‰‹æŒæˆ–è¸©è¸<a href="https://zh.wikipedia.org/wiki/%E6%8E%A7%E5%88%B6%E5%99%A8">æ§åˆ¶å™¨</a>ï¼Œè€Œæ˜¯ä½¿ç”¨<a href="https://zh.wikipedia.org/wiki/%E8%AF%AD%E9%9F%B3%E6%8C%87%E4%BB%A4">è¯­éŸ³æŒ‡ä»¤</a>æˆ–<a href="https://zh.wikipedia.org/wiki/%E6%89%8B%E5%8A%BF">æ‰‹åŠ¿</a>æ¥æ“ä½œXbox 360å’ŒXbox Oneçš„ç³»ç»Ÿç•Œé¢ã€‚å®ƒä¹Ÿèƒ½æ•æ‰ç©å®¶å…¨èº«ä¸Šä¸‹çš„åŠ¨ä½œï¼Œç”¨èº«ä½“æ¥è¿›è¡Œæ¸¸æˆï¼Œå¸¦ç»™ç©å®¶â€œå…æ§åˆ¶å™¨çš„æ¸¸æˆä¸å¨±ä¹ä½“éªŒâ€ã€‚æ­¤è®¾å¤‡æ˜¯<a href="https://zh.wikipedia.org/wiki/%E5%BE%AE%E8%BB%9F%E7%A0%94%E7%A9%B6%E9%99%A2">å¾®è½¯ç ”ç©¶é™¢</a>çš„ç ”ç©¶æˆæœä¹‹ä¸€ã€‚</p><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211118142428272.png" alt="ç»´åŸºç™¾ç§‘ä¸Šå¯¹Kinectç›¸æœºçš„ä»‹ç»"></p></blockquote><p>å¯ä»¥çœ‹å¾—å‡ºæ¥ï¼Œ<code>Kinect</code>ç›¸æœºæœ€åˆå…¶å®æ˜¯ç”±Windowsä¸º<code>Xbox</code>æ¸¸æˆæœºå‡†å¤‡çš„å¤–è®¾ï¼Œé€šè¿‡Kinectç›¸æœºå¯ä»¥ç©ä¸€äº›ä½“æ„Ÿæ¸¸æˆã€‚ä¸è¿‡å¤šå¥½çš„è®¾å¤‡å½“ç„¶æ˜¯è¦æˆ‘ä»¬æ¥æŠ˜è…¾çš„ï¼Œæ‹¿æ¥å•çº¯ç©æ¸¸æˆå°±æœ‰ç‚¹å¤ªå¥¢ä¾ˆäº†ã€‚</p><p>ä¸è¿‡æ­£å¼ç”¨äºKinectç›¸æœºæ˜¯å¾®è½¯å®¶çš„äº§å“ï¼ŒæŒ‰ç…§å¾®è½¯çš„å°¿æ€§å¤§æ¦‚æ˜¯ä¸ä¼šç»™å¼€æºé©±åŠ¨çš„ï¼ˆè™½ç„¶è¿™å‡ å¹´å¾®è½¯é€æ¸åœ¨æ‹¥æŠ±å¼€æºï¼Œå¯æ˜¯KinectV1ã€V2éƒ½æ˜¯2010å¹´çš„äº§å“å•Šï¼‰ï¼Œäº‹å®ä¹Ÿçš„ç¡®å¦‚æ­¤ã€‚Kinectç›®å‰å¾®è½¯å®˜æ–¹çš„é©±åŠ¨åªæœ‰åœ¨Windowsä¸Šæ‰æœ‰ã€‚è¿™ä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬ç¨åç­‰ä¸‹éœ€è¦å®‰è£…<code>Kinect V2</code>çš„é©±åŠ¨ã€‚</p><h2 id="2-Kinect-ç›¸æœºä»‹ç»"><a href="#2-Kinect-ç›¸æœºä»‹ç»" class="headerlink" title="2. Kinect ç›¸æœºä»‹ç»"></a>2. Kinect ç›¸æœºä»‹ç»</h2><blockquote><p>ä»¥ä¸‹å†…å®¹å‚è€ƒåšå®¢ï¼š<a href="https://www.cnblogs.com/traceplus/p/4136297.html">https://www.cnblogs.com/traceplus/p/4136297.html</a></p></blockquote><h3 id="A-Kinect-V1"><a href="#A-Kinect-V1" class="headerlink" title="A. Kinect V1"></a>A. Kinect V1</h3><p>2012å¹´ç¾å›½å¾®è½¯å‘å”®çš„<code>Kinect V1</code>ï¼Œå› ä¸ºå¯ä»¥å¾ˆæ–¹ä¾¿å°±èƒ½å–å¾—Depthï¼ˆæ·±åº¦ï¼‰å’Œ skeletonï¼ˆäººç‰©å§¿åŠ¿ï¼‰ç­‰ä¿¡æ¯ï¼Œè¢«å…¨ä¸–ç•Œçš„å¼€å‘è€…å’Œç ”ç©¶äººå‘˜å…³æ³¨ã€‚</p><p><code>Kinect V1</code>çš„Depthä¼ æ„Ÿå™¨ï¼Œé‡‡ç”¨äº†<code>Light Coding</code>çš„æ–¹å¼ï¼Œè¯»å–æŠ•å°„çš„çº¢å¤–çº¿çš„<code>pattern</code>ï¼Œé€šè¿‡<code>pattern</code>çš„å˜å½¢æ¥å–å¾—Depthçš„ä¿¡æ¯ã€‚ä¸ºæ­¤ï¼ŒDepthä¼ æ„Ÿå™¨åˆ†ä¸ºæŠ•å°„çº¢å¤–çº¿çš„IR Projectorï¼ˆå·¦ï¼‰å’Œè¯»å–çš„IR Cameraï¼ˆå³ï¼‰ã€‚æ­¤å¤–è¿˜æœ‰<code>Kinect V1</code>ä¸­é—´è¿˜æ­è½½äº†RGBç›¸æœºã€‚</p><p><code>Light Coding</code>æ˜¯ä»¥è‰²åˆ—çš„<code>PrimeSense</code>å…¬å¸çš„Depthä¼ æ„Ÿå™¨æŠ€æœ¯ï¼Œäº2013å¹´è¢«ç¾å›½è‹¹æœå…¬å¸æ”¶è´­ã€‚</p><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/012317367015237.jpg" alt="Kinect V1çš„å›¾ç‰‡"></p><h3 id="B-Kinect-V2"><a href="#B-Kinect-V2" class="headerlink" title="B. Kinect V2"></a>B. Kinect V2</h3><p><code>Kinect V2</code>è·å¾—Depthä¿¡æ¯é‡‡ç”¨çš„åˆ™æ˜¯<code>Time of Flight(TOF)</code>çš„æ–¹å¼ï¼Œé€šè¿‡ä»æŠ•å°„çš„çº¢å¤–çº¿åå°„åè¿”å›çš„æ—¶é—´æ¥å–å¾—Depthä¿¡æ¯ã€‚çº¢å¤–å‘å°„å™¨å’Œæ¥æ”¶å™¨åœ¨é¢æ¿åº•éƒ¨ï¼Œå› æ­¤çœ‹ä¸åˆ°å¤–è§‚ï¼Œä¸è¿‡<code>Color Camera</code>æ—è¾¹æ˜¯çº¢å¤–çº¿<code>Camera</code>(å·¦)å’ŒæŠ•å°„è„‰å†²å˜è°ƒçº¢å¤–çº¿çš„<code>Porjector</code>ï¼ˆå³ï¼‰ã€‚</p><p>å¾®è½¯è¿‡å»æ”¶è´­è¿‡åŸºäº<code>TOF</code>æ–¹å¼çš„æ·±åº¦ä¼ æ„Ÿå™¨æŠ€æœ¯çš„å…¬å¸ï¼ˆæ³¨ï¼šåº”è¯¥æ˜¯æŒ‡çš„3DVï¼‰ï¼Œå·²ç»åœ¨ä½¿ç”¨è¿™ä¸ªæŠ€æœ¯ï¼Œä¸è¿‡æ²¡æœ‰è¯¦ç»†çš„å…¬å¸ƒã€‚</p><p>ï¼ˆé¢å¤–æ’ä¸€å¥ï¼ŒTOFæ˜¯ç›®å‰å¤§å¤šæ•°ç‚¹äº‘æ•°æ®è·å–çš„æ–¹å¼ï¼‰</p><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/012317384052450.jpg" alt="Kinect V2"></p><h3 id="C-ä¸¤è€…å¯¹æ¯”"><a href="#C-ä¸¤è€…å¯¹æ¯”" class="headerlink" title="C.ä¸¤è€…å¯¹æ¯”"></a>C.ä¸¤è€…å¯¹æ¯”</h3><p><strong>é¦–å…ˆæ˜¯ä¸¤è€…çš„å‚æ•°</strong></p><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211118144936589.png" alt="Kinect V1 å’Œ V2 æ€§èƒ½å¯¹æ¯”"></p><p><strong>ç„¶åéœ€è¦æ³¨æ„çš„æ˜¯ä¸¤è€…çš„æ¥å£</strong></p><ul><li>V1çš„è¦æ±‚æ˜¯USB2.0ç†è®ºä¼ è¾“é€Ÿç‡æ˜¯60MB/sï¼Œv2æ˜¯USB3.0ç†è®ºä¼ è¾“é€Ÿç‡æ˜¯500MB/sã€‚</li><li>å¯¹äº<code>Kinect V1</code>ï¼Œå¯¹XRGBå››é€šé“å›¾åƒï¼Œ30fpsçš„å¸§ç‡ä¸‹æ¯ç§’æ‰€éœ€ä¼ è¾“çš„æ•°æ®å¤§å°ä¸º640 x 480 x 4 x 30çº¦ä¸º35Mï¼›å†åŠ ä¸ŠUSHORTæ ¼å¼çš„æ·±åº¦å›¾ï¼Œ30fpsï¼Œæ¯ç§’ä¼ è¾“æ•°æ®é‡ä¸º320 x 240 x 2 x 30çº¦ä¸º4Mã€‚æ€»è®¡çº¦ä¸º40MB/sï¼Œå› ä¸ºå¸¦å®½æœ‰é™ï¼Œæ‰€ä»¥åœ¨ä¿è¯ç”»é¢å¸§ç‡ç¨³å®šçš„æƒ…å†µä¸‹ï¼Œåˆ†è¾¨ç‡åªèƒ½å¦‚æ­¤ï¼Œè€Œä¸”åŸºæœ¬ä¸Šå¿…é¡»ç‹¬å ä¸€ä¸ªUSBæ¥å£ã€‚</li><li>å¯¹äº<code>Kinect V2</code>çš„æƒ…å†µï¼Œå½©è‰²å›¾åƒ1920 x 1080 x 4 x 30 çº¦ä¸º237Mï¼Œæ·±åº¦å›¾åƒ512 x 424 x 2 x 30çº¦ä¸º12Mï¼Œæ€»è®¡çº¦ä¸º250M/sã€‚æ‰€ä»¥éUSB3.0ä¸å¯ï¼Œå¦åˆ™ä¼ è¾“ä¸äº†è¿™ä¹ˆå¤§çš„æ•°æ®é‡ã€‚</li></ul><h2 id="3-å®‰è£…Kinecté©±åŠ¨-ROSä¸­é—´ä»¶"><a href="#3-å®‰è£…Kinecté©±åŠ¨-ROSä¸­é—´ä»¶" class="headerlink" title="3. å®‰è£…Kinecté©±åŠ¨+ROSä¸­é—´ä»¶"></a>3. å®‰è£…Kinecté©±åŠ¨+ROSä¸­é—´ä»¶</h2><h3 id="A-æ¦‚è¿°"><a href="#A-æ¦‚è¿°" class="headerlink" title="A. æ¦‚è¿°"></a>A. æ¦‚è¿°</h3><p>é¦–å…ˆéœ€è¦è¯´æ˜çš„æ˜¯å¼€å‘çš„æ–¹å¼ï¼Œå› ä¸ºKinectç›¸æœºæ˜¯ç‰©ç†ç¡¬ä»¶ï¼Œæ‰€ä»¥è·å–åˆ°çš„æ˜¯äºŒè¿›åˆ¶æ•°æ®æµï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦ä½¿ç”¨é©±åŠ¨å°†äºŒè¿›åˆ¶æ•°æ®æµè½¬æ¢ä¸ºæœ‰æ„ä¹‰çš„å›¾åƒï¼Œç„¶ååœ¨æˆ‘ä»¬è‡ªå·±çš„ç¨‹åºé’ˆåœ¨è¿™äº›å›¾åƒçš„åŸºç¡€ä¸Šå»è¿›è¡Œå¼€å‘ã€‚</p><ul><li><strong>å°†äºŒè¿›åˆ¶æ•°æ®æµè½¬æ¢ä¸ºå›¾åƒçš„ç¨‹åºå¯¹åº”ä¸‹å›¾çš„Kinect Driver</strong></li><li><strong>æˆ‘ä»¬è‡ªå·±çš„ç¨‹åºå¯¹åº”ä¸‹å›¾çš„<code>Application</code></strong></li><li><strong>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨ROSä¸­é€šå¸¸åªä¼šæœ‰ä¸€ä¸ªç¨‹åºè°ƒç”¨Kinect Driverï¼Œå› æ­¤ä¸è€ƒè™‘å³è¾¹çš„å·¥ä½œæ¨¡å‹ã€‚å³è¾¹çš„æ¨¡å‹åªæœ‰å¤šäººã€å¤šä»»åŠ¡åŒæ—¶è¦è°ƒç”¨Kinect</strong> <strong>Driveræ—¶å€™æ‰ä¼šæœ‰ç”¨ï¼Œé’ˆå¯¹å•ä»»åŠ¡å…¶å®æ²¡æœ‰å•¥å½±å“</strong></li></ul><p>åœ¨<code>Kinect</code>æ ‡å‡†çš„<code>Windows</code>ä¸Šï¼Œ<code>Kinect</code>çš„é©±åŠ¨æ˜¯Windowsä¸Šç›´æ¥ä¸‹è½½çš„ï¼Œç„¶å<code>Windows</code>è¿˜æä¾›äº†<code>Kinect</code>çš„SDKï¼Œé‡Œé¢æœ‰ç°æˆçš„äººä½“éª¨æ¶è¯†åˆ«çš„<code>API</code>ï¼Œæ‰€ä»¥å¯ä»¥ç›´æ¥ç”¨ã€‚<strong>ä½†æ˜¯åœ¨Linuxçš„ROSä¸Šæƒ³è¦ä½¿ç”¨Kinectç›¸æœºçš„è¯ï¼ŒæŠŠäºŒè¿›åˆ¶æ•°æ®æµè½¬æ¢ä¸ºå›¾åƒçš„é©±åŠ¨éœ€è¦æˆ‘ä»¬è‡ªå·±å†™ï¼Œç„¶åSDK+ç¨‹åºå¾—è‡ªå·±å¼€å‘</strong>ã€‚</p><ul><li>å¹¸è¿çš„æ˜¯ï¼Œå·²ç»æœ‰äººå†™å¥½äº†<code>Kinect</code>çš„é©±åŠ¨ï¼Œå› æ­¤æˆ‘ä»¬ç›´æ¥ä¸‹è½½é©±åŠ¨å³å¯ã€‚ä½†æ˜¯<code>Kinect</code>é©±åŠ¨åªèƒ½å¸®åŠ©æˆ‘ä»¬èƒ½åœ¨<code>Ubuntu</code>ä¸Šè·å¾—Kinectçš„å›¾åƒï¼Œæ‰€ä»¥æ¥ä¸‹æ¥æˆ‘ä»¬éœ€è¦åšçš„ç¬¬äºŒä»¶äº‹å°±æ˜¯ç¼–å†™ä¸€ä¸ª<code>ROS</code>è°ƒç”¨<code>Kinect</code>çš„èŠ‚ç‚¹æ¥è°ƒç”¨<code>Kinect</code>é©±åŠ¨ï¼Œå¹¶å°†è·å¾—çš„å›¾åƒä»¥è¯é¢˜çš„å½¢å¼å‘å¸ƒåˆ°<code>ROS</code>ä¸­å»ã€‚</li><li>æ›´åŠ å¹¸è¿çš„æ˜¯ï¼Œè¿™ä¸€æ­¥ä¹Ÿå·²ç»æœ‰äººå¸®æˆ‘ä»¬åšå¥½äº†ï¼Œæˆ‘ä»¬éœ€è¦éœ€è¦åšçš„ä¸‹è½½ã€ç¼–è¯‘è¿™ä¸ªè°ƒç”¨Kinecté©±åŠ¨è·å¾—å›¾åƒã€å¹¶ä»¥<code>ROS</code>è¯é¢˜å½¢å¼å‘å¸ƒçš„<code>ROS</code>åŠŸèƒ½åŒ…ï¼ˆç›¸å½“äºä¸­é—´ä»¶ï¼‰ã€‚</li></ul><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/012317438589516.png" alt="å¼€å‘æ–¹å¼"></p><p>å› æ­¤ï¼Œæ•´ä¸ªå®‰è£…æµç¨‹åˆ†æˆä¸¤æ­¥ï¼Œ</p><ol><li>å®‰è£… <code>Kinect</code> çš„é©±åŠ¨</li><li>å®‰è£…<code>ROS</code>åŠŸèƒ½åŒ…</li></ol><h3 id="B-å®‰è£…Kinect-V2é©±åŠ¨â€”â€”libfreenect2"><a href="#B-å®‰è£…Kinect-V2é©±åŠ¨â€”â€”libfreenect2" class="headerlink" title="B. å®‰è£…Kinect V2é©±åŠ¨â€”â€”libfreenect2"></a>B. å®‰è£…Kinect V2é©±åŠ¨â€”â€”libfreenect2</h3><p>é¦–å…ˆéœ€è¦å®‰è£…<code>Kinect</code>åœ¨<code>Ubuntu</code>ä¸Šçš„é©±åŠ¨ï¼š<code>libfreenect2</code>ã€‚</p><p>è¿™ä¸ªé©±åŠ¨æ˜¯<code>Github</code>ä¸Šå¼€æºçš„ç”¨<code>C++</code>å’Œ<code>Cmake</code>å†™çš„<code>Kinect V2</code>çš„é©±åŠ¨ï¼Œæ‰€ä»¥æˆ‘ä»¬ç¨åå…‹éš†ä¸‹æ¥ä¹‹åå®‰è£…ä¸€ä¸‹ä¾èµ–ï¼Œç„¶åé…ç½®<code>CMake</code>ç”Ÿæˆ<code>Makefile</code>ã€ç„¶åmakeç¼–è¯‘ï¼Œæœ€åmake installå®‰è£…åº“å³å¯ã€‚</p><h4 id="1-å®‰è£…ä¾èµ–"><a href="#1-å®‰è£…ä¾èµ–" class="headerlink" title="1. å®‰è£…ä¾èµ–"></a>1. å®‰è£…ä¾èµ–</h4><p>å®ç°ç”¨aptåŒ…ç®¡ç†å™¨å®‰è£…ä¸‹ç¨åç¼–è¯‘æ—¶å€™çš„ä¾èµ–</p><pre class="line-numbers language-bash"><code class="language-bash"><span class="token punctuation">(</span>base<span class="token punctuation">)</span> jack@jack-Alienware-m15-R3:~/project$ <span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> build-essential cmake pkg-config libturbojpeg libjpeg-turbo8-dev mesa-common-dev freeglut3-dev libxrandr-dev libxi-dev libglfw3-dev libglfw3-dev libopenni2-dev libusb-dev libturbojpeg0-dev<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ç”±äºæˆ‘å·²ç»å®‰è£…è¿‡äº†ï¼Œæ‰€ä»¥è¿™ä¸€æ­¥æˆ‘ä¸ä¼šå®‰è£…ä»»ä½•ä¸œè¥¿ã€‚</p><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211118172852901.png" alt="å®‰è£…ä¾èµ–"></p><h4 id="2-ä¸‹è½½æºç "><a href="#2-ä¸‹è½½æºç " class="headerlink" title="2. ä¸‹è½½æºç "></a>2. ä¸‹è½½æºç </h4><p><code>git</code>ç›´æ¥ä¸‹è½½æºç å³å¯ï¼Œå¦‚æœä¸‹è½½çš„æ…¢çš„è¯ï¼Œè¦ä¹ˆç§‘å­¦ä¸Šç½‘ï¼Œè¦ä¹ˆå…ˆç”¨å›½å†…çš„ç äº‘giteeå…‹éš†ä¸€ä¸‹ï¼Œç„¶åå†ä¸‹è½½ç äº‘çš„ä»“åº“ã€‚å…³äºå¦‚ä½•ä½¿ç”¨ç äº‘åŠ é€Ÿ<code>github</code>ä¸‹è½½å¯ä»¥å‚è€ƒæˆ‘çš„è¿™ç¯‡æ–‡ç« ï¼ˆæŒ–ä¸ªå‘ï¼Œä»¥åè¡¥ï¼‰</p><pre class="line-numbers language-bash"><code class="language-bash"><span class="token punctuation">(</span>base<span class="token punctuation">)</span> jack@jack-Alienware-m15-R3:~/project$ <span class="token function">git</span> clone https://github.com/OpenKinect/libfreenect2.git<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211118173143020.png" alt="ä¸‹è½½æºç "></p><p>ä¸‹è½½ä¹‹åçš„é¡¹ç›®æ–‡ä»¶ç»“æ„ï¼Œå¯ä»¥çœ‹å‡ºæ¥ï¼Œæ˜¯ä¸€ä¸ªéå¸¸ç»å…¸çš„<code>CMake</code>çš„é¡¹ç›®</p><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211118173557080.png" alt="ä¸‹è½½åçš„é¡¹ç›®ç»“æ„"></p><h4 id="3-é…ç½®-amp-ç¼–è¯‘"><a href="#3-é…ç½®-amp-ç¼–è¯‘" class="headerlink" title="3. é…ç½®&amp;ç¼–è¯‘"></a>3. é…ç½®&amp;ç¼–è¯‘</h4><p>å¯¹äºä¸€ä¸ª<code>CMake</code>å·¥ç¨‹ï¼Œå¾—åˆ°é¡¹ç›®æœ€åçš„æˆæœï¼Œå³æœ€ç»ˆçš„åŠ¨æ€é“¾æ¥åº“/å…±äº«åº“ã€å¯æ‰§è¡Œæ–‡ä»¶ä¸€å…±éœ€è¦ä¸¤æ­¥ã€‚ç¬¬ä¸€æ­¥æ˜¯é…ç½®ï¼ˆ<code>Config</code>ï¼‰ï¼Œç¬¬äºŒæ­¥æ˜¯æ„å»ºï¼ˆ<code>Build</code>ï¼‰ã€‚é…ç½®æŒ‡çš„æ˜¯è®¾ç½®é¡¹ç›®çš„ä¸€äº›é…ç½®ï¼Œæ¯”å¦‚è¯´ç¼–è¯‘å™¨ä½¿ç”¨çš„è¯­æ³•æ ‡å‡†ã€æ˜¯å¦ç¦æ­¢ç¼–è¯‘å™¨åœ¨ç¼–è¯‘é˜¶æ®µä¼˜åŒ–ä»£ç ç­‰ç­‰ã€‚è¿™é‡Œä¸å±•å¼€è®²äº†ï¼Œå…·ä½“å†…å®¹å¯ä»¥å‚è€ƒæˆ‘çš„<code>CMake</code>ç³»åˆ—æ–‡ç« ï¼ˆæŒ–ä¸ªå‘ï¼‰ã€‚</p><p>é¦–å…ˆåˆ›å»ºä¸€ä¸ªç¼–è¯‘ç©ºé—´</p><pre class="line-numbers language-bash"><code class="language-bash"><span class="token punctuation">(</span>base<span class="token punctuation">)</span> jack@jack-Alienware-m15-R3:~/project$ <span class="token function">cd</span> libfreenect2/<span class="token punctuation">(</span>base<span class="token punctuation">)</span> jack@jack-Alienware-m15-R3:~/project/libfreenect2$ <span class="token function">mkdir</span> build<span class="token punctuation">(</span>base<span class="token punctuation">)</span> jack@jack-Alienware-m15-R3:~/project/libfreenect2$ <span class="token function">cd</span> build/<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>æ¥ä¸‹æ¥å†ä½¿ç”¨<code>CMake</code>é’ˆå¯¹<code>build</code>æ–‡ä»¶å¤¹å¤–çš„<code>CMakeLists</code>è¿›è¡Œé…ç½®ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç”±äºæˆ‘å·²ç»é…å¥½äº†<code>Nvidia</code>çš„æ˜¾å¡é©±åŠ¨å’Œ<code>CUDA</code>ï¼Œå› æ­¤æˆ‘æŒ‡å®šä½¿ç”¨<code>CUDA</code>ç¼–è¯‘ï¼Œè¿™æ ·è¿è¡Œçš„æ—¶å€™å°±ä¼šæœ‰åŠ é€Ÿã€‚æ­¤å¤–é…ç½®çš„æ—¶å€™è¦æŒ‡å®šå®‰è£…åˆ°çš„ä½ç½®ï¼Œè¿™ä¸ªå®‰è£…åˆ°çš„ä½ç½®ç¨åå®‰è£…ROSåŠŸèƒ½åŒ…çš„æ—¶å€™ä¼šç”¨åˆ°ï¼Œæ‰€ä»¥ä¸å»ºè®®ä¿®æ”¹ï¼Œç”¨é»˜è®¤çš„å°±è¡Œã€‚</p><p>å…·ä½“æ¥è¯´æˆ‘ä»¬éƒ½æ˜¯åœ¨å‘½ä»¤è¡Œä½¿ç”¨-Då‚æ•°æ¥æŒ‡å®š<code>CMake</code>çš„å®åŠå…¶å€¼(D=define)ï¼Œ<code>CMakeLists</code>ä¸­ä¼šæ£€æŸ¥è¿™äº›å®çš„å€¼ã€‚å¦‚æœä½ ä¸æ˜¯<code>CUDA</code>çš„è¯å°±æŠŠåé¢æŒ‡å®š<code>CUDA</code>çš„å®åˆ æ‰å³å¯</p><pre class="line-numbers language-bash"><code class="language-bash"><span class="token punctuation">(</span>base<span class="token punctuation">)</span> jack@jack-Alienware-m15-R3:~/project/libfreenect2/build$ cmake <span class="token punctuation">..</span> -DCMAKE_INSTALL_PREFIX<span class="token operator">=</span><span class="token variable">$HOME</span>/freenect2 -DENABLE_CXX11<span class="token operator">=</span>ON -DCUDA_PROPAGATE_HOST_FLAGS<span class="token operator">=</span>off<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211118184945046.png" alt="CMakeé…ç½®å·¥ç¨‹"></p><p>å¯ä»¥çœ‹åˆ°<code>CMake</code>é…ç½®çš„æµç¨‹è¿˜æ˜¯å¾ˆæ¸…æ™°çš„ï¼Œé¦–å…ˆä¼šå»å¯»æ‰¾ç³»ç»Ÿä¸­çš„ç¼–è¯‘å™¨ç‰ˆæœ¬ç„¶åå†å»æ£€æŸ¥å½“å‰ç¼–è¯‘å™¨æ˜¯å¦è‡³æ­¤æŒ‡å®šç‰ˆæœ¬çš„è¯­æ³•ï¼Œæ¥ä¸‹æ¥å»å¯»æ‰¾åŒ…ç­‰ç­‰ã€‚å…¨éƒ¨é…ç½®è¿‡ç¨‹æ²¡æœ‰é—®é¢˜çš„è¯å°±ä¼šæ˜¾ç¤ºæœ€åçš„ä¸‰å¥è¯ï¼Œå½“å‰<code>build</code>ç¼–è¯‘ç©ºé—´ä¸‹ä¹Ÿå¤šå‡ºæ¥å¾ˆå¤šä¸­é—´æ–‡ä»¶ã€‚<code>Makefile</code>å°±æ˜¯ç¨å<code>make</code>è§£æçš„å¯¹è±¡ã€‚</p><pre class="line-numbers language-bash"><code class="language-bash"><span class="token punctuation">(</span>base<span class="token punctuation">)</span> jack@jack-Alienware-m15-R3:~/project/libfreenect2/build$ <span class="token function">ls</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211118185449344.png" alt="é…ç½®çš„ç»“æœ"></p><p>ç„¶åæˆ‘ä»¬makeç¼–è¯‘å³å¯</p><pre class="line-numbers language-bash"><code class="language-bash"><span class="token punctuation">(</span>base<span class="token punctuation">)</span> jack@jack-Alienware-m15-R3:~/project/libfreenect2/build$ <span class="token function">make</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>æˆ‘è¿™é‡Œçš„ç¼–è¯‘å¯ä»¥è¯´æ˜¯é¡ºé£é¡ºæ°´ï¼Œä¸»è¦åŸå› å…¶å®æ˜¯æˆ‘å·²ç»é…ç½®è¿‡ä¸€éäº†ï¼Œè¿™æ˜¯å†™æ•™ç¨‹æ—¶å€™åˆ æ‰äº†å…¨éƒ¨çš„æ–‡ä»¶é‡å¤´å†æ¥çš„ç»“æœã€‚<strong>å…¶å®åœ¨ç¬¬ä¸€æ¬¡é…çš„æ—¶å€™åœ¨ç¼–è¯‘è¿™é‡Œé‡åˆ°äº†ä¸¤ä¸‰ä¸ªé—®é¢˜</strong>ï¼Œä¸è¿‡æˆ‘éƒ½è§£å†³æ‰äº†ï¼Œç°åœ¨æ²¡æœ‰åŠæ³•æŠŠè¿™äº›é—®é¢˜å¤ç°å‡ºæ¥ã€‚è¿™é‡ŒæŒ–ä¸ªå‘ï¼Œä¸‹ä¸€æ¬¡è£…æœºè¡¥ä¸Šã€‚ä¸»è¦çš„ä¸¤ä¸ªé—®é¢˜æ˜¯ç¬¬ä¸€æ¬¡ä¼šæŠ¥é”™ä¸å­˜åœ¨ä¸€ä¸ªå«<code>libGL.so</code>çš„å…±äº«åº“ï¼Œç¬¬äºŒæ¬¡åˆ™æ˜¯åœ¨æœ€åç¼–è¯‘åˆ°100%ä¹‹åé“¾æ¥çš„æ—¶å€™æŠ¥é”™è¯´æ²¡æœ‰å®šä¹‰çš„å¼•ç”¨ï¼š<code>undefined reference to _glapi_tls_Current</code>ã€‚</p><p>å…¶å®è¿™ä¸¤ä¸ªé—®é¢˜éƒ½å’Œ<code>OpenGL</code>è¿™ä¸ªå›¾å½¢åº“æœ‰å…³ï¼ˆ<code>Graphic Librar</code>yï¼‰ã€‚å›¾å½¢è´Ÿè´£æ¸²æŸ“æè´¨ç­‰ç­‰ï¼Œæ˜¯å°†æ•°æ®æ˜¾ç¤ºåˆ°æˆ‘ä»¬çš„æ˜¾ç¤ºå™¨ä¸Šçš„åº“ï¼ŒåŒ…æ‹¬çœ‹åˆ°çš„æ¡Œé¢ã€çª—å£ç­‰ç­‰éƒ½æ˜¯ç”¨å›¾å½¢åº“æ¸²æŸ“å‡ºæ¥çš„ã€‚è€Œ<code>Kinect</code>æ•è·åˆ°çš„æ•°æ®è¦è½¬æˆå›¾ç‰‡æ˜¾ç¤ºï¼Œå°±å¿…ç„¶ä¼šç”¨åˆ°<code>OpenGL</code>è¿™ä¸ªåº“ã€‚ç¬¬ä¸€ä¸ªæŠ¥é”™æ˜¯å› ä¸ºç®¡é“æ–­å¼€ï¼ˆ<code>libGL.so</code>æ˜¯ä¸€ä¸ªè½¯è¿æ¥ï¼‰ï¼Œé‡æ–°é“¾æ¥å°±è¡Œï¼Œç¬¬äºŒä¸ªæŠ¥é”™åˆ™æ˜¯å› ä¸º<code>libGL.so</code>é“¾æ¥åˆ°çš„å…±äº«åº“ç‰ˆæœ¬å¤ªè€ï¼ŒæŒ‡å®šä¸€ä¸ªæ›´æ–°çš„å³å¯ã€‚</p><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211118185715177.png" alt="ç¼–è¯‘çš„è¿‡ç¨‹"></p><p>æœ€åï¼Œç”±äº<code>libfreenect2</code>æœ€ç»ˆç”Ÿæˆçš„æ˜¯ä¸€ä¸ªé©±åŠ¨ï¼Œå› æ­¤ä»–æœ€ç»ˆç”Ÿæˆçš„ç»“æœä¸ä»…æœ‰å¯æ‰§è¡Œæ–‡ä»¶ï¼Œè¿˜æœ‰å…±äº«åº“ï¼Œæˆ‘ä»¬éœ€è¦<code>make install</code>æ¥å®‰è£…ä¸€ä¸‹å…±äº«åº“ã€‚è¯´æ˜¯å®‰è£…ï¼Œå…¶å®å°±æ˜¯æŠŠå…±äº«åº“å¤åˆ¶åˆ°æŒ‡å®šçš„ä½ç½®å»ï¼Œä¸€èˆ¬çš„é¡¹ç›®éƒ½æ˜¯æŠŠå…±äº«åº“å¤åˆ¶åˆ°ç³»ç»Ÿé“¾æ¥æ—¶å€™çš„æœç´¢è·¯å¾„ï¼Œè¿™æ ·ç¼–è¯‘çš„æ—¶å€™ç³»ç»Ÿä¼šè‡ªåŠ¨çš„å»æœç´¢ã€‚<strong>ä¸è¿‡ç”±äºæˆ‘ä»¬ä¸Šé¢CMakeåœ¨é…ç½®çš„æ—¶å€™æŒ‡å®šäº†å®‰è£…ä½ç½®ï¼Œå› æ­¤ä»–å…¶å®ä¼šå®‰è£…åˆ°æˆ‘ä»¬çš„å®¶ç›®å½•ä¸‹é¢</strong></p><pre class="line-numbers language-bash"><code class="language-bash"><span class="token punctuation">(</span>base<span class="token punctuation">)</span> jack@jack-Alienware-m15-R3:~/project/libfreenect2/build$ <span class="token function">make</span> <span class="token function">install</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ä»å‘½ä»¤çš„è¾“å‡ºç¡®å®èƒ½å¤Ÿçœ‹åˆ°å®‰è£…çš„ä½ç½®å°±æ˜¯æˆ‘ä»¬çš„å®¶ç›®å½•</p><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211118190908729.png" alt="å®‰è£…çš„ç»“æœ"></p><h4 id="4-è®¾ç½®USBè§„åˆ™"><a href="#4-è®¾ç½®USBè§„åˆ™" class="headerlink" title="4. è®¾ç½®USBè§„åˆ™"></a>4. è®¾ç½®USBè§„åˆ™</h4><p>ç”±äº<code>libfreenect2</code>æ˜¯ä¸€ä¸ªé©±åŠ¨ï¼Œå› æ­¤ä»–éœ€è¦å’Œåº•å±‚çš„ç¡¬ä»¶åšäº¤äº’ï¼Œæ‰€ä»¥éœ€è¦è®¾ç½®ä¸€ä¸‹<code>USB</code>è§„åˆ™ã€‚åœ¨<code>Linux</code>ä¸­æ‰€æœ‰çš„ä¸²å£éƒ½æ˜¯ç”±ä¸€ä¸ªå«<code>udev</code>çš„ç¨‹åºè´Ÿè´£çš„ï¼Œä»–ç›¸å½“äº<code>Windows</code>çš„è®¾å¤‡ç®¡ç†å™¨ã€‚è¿™é‡ŒæŒ–ä¸ªå‘ï¼Œä»¥åè¡¥ä¸Šå…³äº<code>udev</code>çš„å†…å®¹ã€‚æ›´å¤šç»†èŠ‚å¯ä»¥å‚è€ƒ<a href="https://www.jianshu.com/p/dd6cecd7755a">è¿™ç¯‡ç®€ä¹¦çš„åšå®¢</a></p><blockquote><p><strong>ä»¥ä¸‹å†…å®¹å¼•ç”¨è‡ªç®€ä¹¦åšå®¢</strong></p><p><strong>udevåœ¨linuxçš„é‚£ä¸ªä½ç½®</strong></p><p>udevçš„å®ˆæŠ¤è¿›ç¨‹åœ¨linuxçš„ä½ç½®åœ¨systemdä¸­çš„ä½ç½®å¦‚ä¸‹æ‰€ç¤ºï¼Œä¸¾ä¸ªä¾‹å­ï¼šå¦‚æœå‘pcä¸­æ’å…¥ä¸€ä¸ªusbè®¾å¤‡ï¼Œkernelåœ¨æ€»çº¿ä¸Šå‘ç°è¿™ä¸ªè®¾å¤‡ï¼Œä½¿ç”¨dirveråˆå§‹åŒ–ï¼Œåœ¨sysfsåˆ›å»ºdeviceç›®å½•ç­‰æ“ä½œä¹‹åï¼Œå°†é€šçŸ¥ç”¨æˆ·ç©ºé—´çš„udevï¼Œç„¶åä¸Šå±‚çš„æ˜¾ç¤ºå±‚æ‰èƒ½çœ‹åˆ°è¿™ä¸ªusbè®¾å¤‡ï¼Œå¹¶æœ€ç»ˆå°†å®ƒæ˜¾ç¤ºåœ¨desktopä¸Šï¼š</p><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/330043-6ecf51d6a519b4fe.png" alt="Systemdå®ˆæŠ¤è¿›ç¨‹æ‰€å¤„çš„ä½ç½®"></p></blockquote><p>æˆ‘ä»¬ç›´æ¥æŠŠè§„åˆ™æ–‡ä»¶å¤åˆ¶åˆ°<code>udev</code>çš„é…ç½®æ–‡ä»¶å¤¹ä¸‹å³å¯</p><pre class="line-numbers language-bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">cp</span> <span class="token punctuation">..</span>/platform/linux/udev/90-kinect2.rules /etc/udev/rules.d/<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h4 id="5-éªŒè¯å®‰è£…"><a href="#5-éªŒè¯å®‰è£…" class="headerlink" title="5. éªŒè¯å®‰è£…"></a>5. éªŒè¯å®‰è£…</h4><p>æœ€åä¸Šé¢çš„æ­¥éª¤ä¸€æ­¥æ­¥åšä¸‹æ¥ï¼Œåº”è¯¥æ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼Œä¸è¿‡åœ¨ç¼–è¯‘é©±åŠ¨çš„æ—¶å€™æˆ‘ä»¬è§‚å¯Ÿåˆ°makeæœ€ååœ¨ç”Ÿæˆä¸€ä¸ªå«åš<code>Protonect</code>çš„å¯æ‰§è¡Œæ–‡ä»¶ã€‚è¿™ä¸ªç¨‹åºå…¶å®å°±æ˜¯éªŒè¯å®‰è£…çš„ç¨‹åºã€‚æˆ‘ä»¬æ¥ä¸Š<code>Kinect</code>çš„è¿æ¥çº¿ï¼Œç„¶åè¿è¡Œè¿™ä¸ªç¨‹åºï¼Œå¦‚æœå®‰è£…æˆåŠŸå°±èƒ½å¤Ÿçœ‹åˆ°ä¸‹é¢çš„å›¾ç‰‡</p><pre class="line-numbers language-bash"><code class="language-bash"><span class="token punctuation">(</span>base<span class="token punctuation">)</span> jack@jack-Alienware-m15-R3:~/project/libfreenect2/build$ ./bin/Protonect <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å››å¼ å›¾ä¸­å·¦ä¸Šè§’æ˜¯æ·±åº¦å›¾ï¼Œå·¦ä¸‹è§’æ˜¯RGBå›¾åƒï¼Œå³ä¸‹è§’æ˜¯ç‚¹äº‘çš„å›¾åƒï¼Œå³ä¸Šè§’æ˜¯å¸¦æœ‰RGBçš„ç‚¹äº‘çš„å›¾åƒã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç‚¹äº‘çš„å›¾åƒæ˜¯é€šè¿‡æ·±åº¦å›¾æ¨ç®—å‡ºæ¥çš„ã€‚æ·±åº¦å›¾åªæœ‰ä¸€ä¸ªDepthé€šé“ï¼Œæ•°å€¼è¶Šå¤§è¡¨ç¤ºè¶Šè¿œï¼Œçœ‹èµ·æ¥å°±è¶Šé»‘ã€‚è€Œç‚¹äº‘å›¾æ˜¯XYZä¸‰ä¸ªé€šé“ï¼Œåˆ†åˆ«è¡¨ç¤ºç‚¹ç›¸å¯¹ç›¸æœºçš„çš„XYZåæ ‡ã€‚è€Œå³ä¸Šè§’çš„ç‚¹äº‘åˆ™æ˜¯RGBXYZå…­ä¸ªé€šé“å›¾ç‰‡ã€‚å³è¾¹çœ‹åˆ°ï¼Œæœ‰<code>CUDA</code>åŠ é€Ÿå–§åš·å»¶è¿ŸåŸºæœ¬éƒ½åœ¨10mså·¦å³ï¼Œé€Ÿåº¦è¿˜æ˜¯éå¸¸å¿«çš„</p><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211118193300100.png" alt="éªŒè¯ç¨‹åºçš„è¿è¡Œç»“æœ"></p><h4 id="6-å®‰è£…é©±åŠ¨å¯èƒ½é‡åˆ°çš„é—®é¢˜"><a href="#6-å®‰è£…é©±åŠ¨å¯èƒ½é‡åˆ°çš„é—®é¢˜" class="headerlink" title="6. å®‰è£…é©±åŠ¨å¯èƒ½é‡åˆ°çš„é—®é¢˜"></a>6. å®‰è£…é©±åŠ¨å¯èƒ½é‡åˆ°çš„é—®é¢˜</h4><p>æš‚æ—¶æ²¡æœ‰ï¼Œç•™å¾…ä¸‹æ¬¡é‡è£…ç³»ç»Ÿæ—¶å€™è¡¥å……ã€‚</p><h3 id="C-å®‰è£…ROS-Kinectæ·±åº¦ç›¸æœºåŠŸèƒ½åŒ…â€”â€”iai-kinect2"><a href="#C-å®‰è£…ROS-Kinectæ·±åº¦ç›¸æœºåŠŸèƒ½åŒ…â€”â€”iai-kinect2" class="headerlink" title="C. å®‰è£…ROS Kinectæ·±åº¦ç›¸æœºåŠŸèƒ½åŒ…â€”â€”iai_kinect2"></a>C. å®‰è£…ROS Kinectæ·±åº¦ç›¸æœºåŠŸèƒ½åŒ…â€”â€”iai_kinect2</h3><p>å°±åƒåœ¨<code>Melodic</code>ä¸Šä½¿ç”¨<code>CV_Bridge</code>ä¸€æ ·ï¼ˆæŒ–ä¸ª<code>Melodic</code>ç¼–è¯‘<code>CV_Bridge</code>çš„å‘ï¼Œä»¥åè¡¥ä¸Šï¼‰ï¼Œ<code>iai_kinect2</code>ä¹Ÿéœ€è¦æˆ‘ä»¬ä»<code>github</code>ä¸Šä¸‹è½½æºç ç„¶åç¼–è¯‘ã€‚</p><p>åœ¨ç¼–è¯‘ä¹‹åï¼Œæˆ‘ä»¬æƒ³è¦é€šè¿‡Kinectè·å¾—æ·±åº¦å›¾åƒã€ç‚¹äº‘å›¾åƒç­‰ç­‰ç›´æ¥å¯åŠ¨è¿™ä¸ª<code>iai_kinect2</code>ä¸­çš„èŠ‚ç‚¹å°±è¡Œã€‚è¿™ä¸ªèŠ‚ç‚¹å°†ä¼šè°ƒç”¨libfreenectï¼Œå¹¶å°†è·å–åˆ°çš„å›¾åƒå‘å¸ƒåˆ°æŒ‡å®šçš„è¯é¢˜é‡Œï¼Œå› æ­¤æˆ‘ä»¬è®¢é˜…æŒ‡å®šçš„è¯é¢˜å³å¯å¾—åˆ°æ•°æ®ã€‚</p><h4 id="1-ä¸‹è½½å¹¶ç¼–è¯‘åŠŸèƒ½åŒ…"><a href="#1-ä¸‹è½½å¹¶ç¼–è¯‘åŠŸèƒ½åŒ…" class="headerlink" title="1. ä¸‹è½½å¹¶ç¼–è¯‘åŠŸèƒ½åŒ…"></a>1. ä¸‹è½½å¹¶ç¼–è¯‘åŠŸèƒ½åŒ…</h4><p>ç”±äºiai-<code>kinect2</code>æœ¬è´¨ä¸Šæ˜¯<code>ROS</code>çš„ä¸€ä¸ªåŠŸèƒ½åŒ…ï¼Œè€Œ<code>ROS</code>çš„åŠŸèƒ½åŒ…çš„å‘å¸ƒéƒ½æ˜¯ä»¥åŠŸèƒ½åŒ…çš„å½¢å¼å‘å¸ƒçš„ï¼Œå› æ­¤æˆ‘ä»¬åªéœ€è¦æŠŠè¿™ä¸ªåŠŸèƒ½åŒ…ä¸‹è½½åˆ°å·¥ä½œç©ºé—´ä¸­å¹¶è¿›è¡Œç¼–è¯‘å³å¯ã€‚ä¸ºäº†ä¸æ±¡æŸ“æˆ‘ä»¬è‡ªå·±çš„å·¥ä½œç©ºé—´ï¼Œé¿å…æ¯æ¬¡éƒ½è¦ç¼–è¯‘è¿™ä¸ªåŒ…ï¼Œæˆ‘ä»¬æ–°åˆ›å»ºä¸€ä¸ªå«åš<code>install_iai_kinect</code>çš„å·¥ä½œç©ºé—´çš„å®‰è£…è¿™ä¸ªåŒ…</p><pre class="line-numbers language-bash"><code class="language-bash"><span class="token punctuation">(</span>ros<span class="token punctuation">)</span> jack@jack-Alienware-m15-R3:~/project$ <span class="token function">mkdir</span> install_iai_kinect2<span class="token punctuation">(</span>ros<span class="token punctuation">)</span> jack@jack-Alienware-m15-R3:~/project$ <span class="token function">cd</span> install_iai_kinect2/<span class="token punctuation">(</span>ros<span class="token punctuation">)</span> jack@jack-Alienware-m15-R3:~/project/install_iai_kinect2$ <span class="token function">mkdir</span> src<span class="token punctuation">(</span>ros<span class="token punctuation">)</span> jack@jack-Alienware-m15-R3:~/project/install_iai_kinect2$ <span class="token function">cd</span> src/<span class="token punctuation">(</span>ros<span class="token punctuation">)</span> jack@jack-Alienware-m15-R3:~/project/install_iai_kinect2/src$ catkin_init_workspace <span class="token punctuation">(</span>ros<span class="token punctuation">)</span> jack@jack-Alienware-m15-R3:~/project/install_iai_kinect2/src$ <span class="token function">cd</span> <span class="token punctuation">..</span><span class="token punctuation">(</span>ros<span class="token punctuation">)</span> jack@jack-Alienware-m15-R3:~/project/install_iai_kinect2$ catkin_make<span class="token punctuation">(</span>ros<span class="token punctuation">)</span> jack@jack-Alienware-m15-R3:~/project/install_iai_kinect2$ ll<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211118205323865.png" alt="åˆå§‹åŒ–ä¹‹åçš„å·¥ä½œç©ºé—´"></p><p>ç„¶ågitä¸‹è½½åŠŸèƒ½å¹¶å®‰è£…ä¾èµ–ï¼Œæ³¨æ„è¿™é‡Œå¦‚æœå‰é¢æ”¹äº†<code>libfreenect</code>çš„å®‰è£…è·¯å¾„çš„è¯ï¼Œè¿™é‡Œç¼–è¯‘çš„æ—¶å€™è¦æ·»åŠ ä¸€ä¸ª<code>CMake</code>çš„å®æ¥æŒ‡å®š<code>libfreenect</code>çš„è·¯å¾„ï¼Œå‚è€ƒ<a href="https://github.com/code-iai/iai_kinect2#install">æ–‡ç« </a>ã€‚</p><p>æ­¤å¤–ï¼Œåœ¨ä½¿ç”¨<code>rosdep</code>å®‰è£…çš„æ—¶å€™ä¼šé‡åˆ°ä¸€ä¸ªâ€œæŠ¥é”™â€ï¼ˆè§ä¸‹ï¼‰ï¼Œè¿™ä¸ªå…¶å®æ˜¯æ­£å¸¸çš„ï¼Œå› ä¸º<code>kinect2_brideg</code>ã€<code>kinect2_cailbration</code>ã€<code>kinect2_caliration</code>ã€<code>kinect2_viewer</code>è¿™å››ä¸ªèŠ‚ç‚¹è¢«<code>rosdep</code>è®¤ä¸ºæ˜¯åŠŸèƒ½åŒ…äº†ï¼Œä½†ä»–ä»¬å…¶å®éƒ½åªæ˜¯<code>iai_kinect2</code>çš„ä¸€éƒ¨åˆ†ã€‚</p><pre class="line-numbers language-bash"><code class="language-bash"><span class="token punctuation">(</span>ros<span class="token punctuation">)</span> jack@jack-Alienware-m15-R3:~/project/install_iai_kinect2$ <span class="token function">cd</span> src/<span class="token punctuation">(</span>ros<span class="token punctuation">)</span> jack@jack-Alienware-m15-R3:~/project/install_iai_kinect2/src$ <span class="token function">git</span> clone https://github.com/code-iai/iai_kinect2.git<span class="token punctuation">(</span>ros<span class="token punctuation">)</span> jack@jack-Alienware-m15-R3:~/project/install_iai_kinect2/src$ <span class="token function">cd</span> iai_kinect2<span class="token punctuation">(</span>ros<span class="token punctuation">)</span> jack@jack-Alienware-m15-R3:~/project/install_iai_kinect2/src/iai_kinect2$ rosdep <span class="token function">install</span> -r --from-paths <span class="token keyword">.</span><span class="token punctuation">(</span>ros<span class="token punctuation">)</span> jack@jack-Alienware-m15-R3:~/project/install_iai_kinect2/src/iai_kinect2$ <span class="token function">cd</span> <span class="token punctuation">..</span>/<span class="token punctuation">..</span>/<span class="token punctuation">(</span>ros<span class="token punctuation">)</span> jack@jack-Alienware-m15-R3:~/project/install_iai_kinect2$ catkin_make -DCMAKE_BUILD_TYPE<span class="token operator">=</span><span class="token string">"Release"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>ERROR: the following packages/stacks could not have their rosdepc keys resolved<br>to system dependencies:<br>kinect2_bridge: Cannot locate rosdep definition for [kinect2_registration]<br>kinect2_calibration: Cannot locate rosdep definition for [kinect2_bridge]<br>kinect2_viewer: Cannot locate rosdep definition for [kinect2_bridge]<br>iai_kinect2: Cannot locate rosdep definition for [kinect2_registration]</p></blockquote><p>æœ€åæ²¡æœ‰errorå°±æˆåŠŸå®‰è£…åŠŸèƒ½åŒ…äº†ï¼Œä½†æ˜¯ä¸è¦å¿˜è®°<code>source</code>ä¸€ä¸‹ï¼Œå› ä¸ºè¿™ä¸ªåŠŸèƒ½åŒ…ä¸åœ¨<code>ROS</code>çš„å…ƒåŠŸèƒ½åŒ…ä¸­ã€‚</p><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211118205948236.png" alt="ç¼–è¯‘çš„ç»“æœ"></p><h4 id="2-éªŒè¯å®‰è£…"><a href="#2-éªŒè¯å®‰è£…" class="headerlink" title="2. éªŒè¯å®‰è£…"></a>2. éªŒè¯å®‰è£…</h4><p>åŒæ ·ï¼Œç»å†è¿‡ä¸Šé¢çš„æ­¥éª¤ä¹‹åï¼Œæˆ‘ä»¬è„¸ä¸Š<code>Kinect V2</code>çš„è¿æ¥çº¿æ¥è·‘è·‘èŠ‚ç‚¹ï¼Œçœ‹çœ‹æœ‰æ²¡æœ‰é—®é¢˜ã€‚ç±»ä¼¼äº<code>cv_bridge</code>ï¼Œ<code>iai-kinect2</code>ç¼–è¯‘ä¹‹åä¼šå¾—åˆ°ä¸€ä¸ª<code>kinect_bridge</code>ï¼Œæˆ‘ä»¬åˆ©ç”¨å…¶ä¸­çš„launchæ–‡ä»¶æ¥æµ‹è¯•ä¸€ä¸‹ã€‚</p><pre class="line-numbers language-bash"><code class="language-bash"><span class="token punctuation">(</span>ros<span class="token punctuation">)</span> jack@jack-Alienware-m15-R3:~/project/install_iai-kinect$ <span class="token function">source</span> devel/setup.bash <span class="token punctuation">(</span>ros<span class="token punctuation">)</span> jack@jack-Alienware-m15-R3:~/project/install_iai-kinect$ roslaunch kinect2_bridge kinect2_bridge.launch<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211118204334851.png" alt="launchå¯åŠ¨æ•´ä¸ªkinect_bridge"></p><p>ç„¶åæˆ‘ä»¬å†å¼€ä¸€ä¸ªç»ˆç«¯æ¥çœ‹çœ‹èŠ‚ç‚¹å›¾</p><pre class="line-numbers language-bash"><code class="language-bash"><span class="token punctuation">(</span>base<span class="token punctuation">)</span> jack@jack-Alienware-m15-R3:~/project/install_iai-kinect$ rqt_graph <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>çœ‹èµ·æ¥è¿˜ä¸é”™ï¼Œå¯ä»¥çœ‹åˆ°<code>kinect_bridge</code>å…¶å®åªæ˜¯ä¸€ä¸ªäº¤äº’çš„èŠ‚ç‚¹ï¼Œä»–çš„åç«¯æ•°æ®å¤„ç†éƒ½æ˜¯ä¾é çš„å…¶ä»–çš„èŠ‚ç‚¹ï¼Œ<code>kinect2</code>è´Ÿè´£è°ƒç”¨<code>libfreenect</code>é©±åŠ¨ï¼Œå‰©ä¸‹çš„hdã€sdã€qhdåˆ†åˆ«è´Ÿè´£å¤„ç†é«˜ä¸­ä½åˆ†è¾¨ç‡çš„å›¾åƒã€‚</p><p>ä¸è¿‡ç”±äºrqtæ˜¯é€šè¿‡rosmasterä¸­çš„æ³¨å†Œä¿¡æ¯æ¥ç”»èŠ‚ç‚¹å›¾çš„ï¼Œå› æ­¤æ²¡æœ‰è¢«è®¢é˜…çš„è¯é¢˜æ— æ³•è¢«æ˜¾ç¤ºå‡ºæ¥ï¼Œæˆ‘ä»¬çœ‹çœ‹æ‰€æœ‰çš„è¯é¢˜</p><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211118203224904.png" alt="Kinect_BridgeèŠ‚ç‚¹å›¾"></p><p>æ–°å¼€ä¸€ä¸ªç»ˆç«¯</p><pre class="line-numbers language-bash"><code class="language-bash"><span class="token punctuation">(</span>base<span class="token punctuation">)</span> jack@jack-Alienware-m15-R3:~$ rostopic list <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å¯ä»¥çœ‹åˆ°æœ‰å¾ˆå¤šçš„è¯é¢˜ï¼Œä¸è¿‡å…¶å®æ‰€æœ‰çš„è¯é¢˜åˆ†æˆä¸‰ç»„ï¼Œ<code>hd</code>è¡¨ç¤ºé«˜åˆ†è¾¨ç‡ï¼Œ<code>qhd</code>è¡¨ç¤ºä¸­åˆ†è¾¨ç‡ï¼Œ<code>sd</code>è¡¨ç¤ºä½åˆ†è¾¨ç‡</p><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211118203435667.png" alt="Kinect_Bridgeå‘å¸ƒçš„æ‰€æœ‰çš„ç”»å›¾"></p><p>æœ€åå…¶å®<code>kinect_bridge</code>æä¾›äº†å¯è§†åŒ–çš„èŠ‚ç‚¹ï¼Œä¸è¿‡é¦–å…ˆéœ€è¦å¯¹kinectç›¸æœºè¿›è¡Œæ ¡å‡†ï¼Œå¦åˆ™æ˜¯æœ‰åå·®çš„ï¼Œä¸è¿‡æˆ‘ä»¬è¿™é‡Œåªæ˜¯ä¸ºäº†éªŒè¯ï¼Œå› æ­¤è·‘èµ·æ¥çœ‹çœ‹</p><pre class="line-numbers language-bash"><code class="language-bash">rosrun kinect2_viewer kinect2_viewer kinect2 sd cloud<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>çœ‹èµ·æ¥æ•ˆæœè¿˜ä¸é”™ï¼Œä¸è¿‡ç”±äºè®¢é˜…çš„æ˜¯ä½åˆ†è¾¨çš„å›¾ç‰‡ï¼Œå› æ­¤å›¾ç‰‡æ”¾å¤§ä¹‹åå®é™…ä¸Šåƒç´ é—´å°±ä¼šå‡ºç°ä¸€äº›ç¼ºå¤±çš„é»‘è‰²ç‚¹</p><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211118203934128.png" alt="å¯è§†åŒ–çš„ç»“æœ"></p><h4 id="3-å®‰è£…æ—¶å€™çš„ä¸€äº›è¯´æ˜"><a href="#3-å®‰è£…æ—¶å€™çš„ä¸€äº›è¯´æ˜" class="headerlink" title="3. å®‰è£…æ—¶å€™çš„ä¸€äº›è¯´æ˜"></a>3. å®‰è£…æ—¶å€™çš„ä¸€äº›è¯´æ˜</h4><blockquote><h4 id="1-ç¼–è¯‘çš„æ—¶å€™å¼¹å‡ºæ¥è­¦å‘Š"><a href="#1-ç¼–è¯‘çš„æ—¶å€™å¼¹å‡ºæ¥è­¦å‘Š" class="headerlink" title="1. ç¼–è¯‘çš„æ—¶å€™å¼¹å‡ºæ¥è­¦å‘Š"></a>1. ç¼–è¯‘çš„æ—¶å€™å¼¹å‡ºæ¥è­¦å‘Š</h4><p>å…·ä½“çš„è­¦å‘Šå¦‚ä¸‹å›¾ã€‚åªæ˜¯è­¦å‘Šè€Œå·²ï¼Œä¸æ˜¯é”™è¯¯ï¼Œä¸ç”¨ç®¡ã€‚å› ä¸º<code>catkin</code>ä½œä¸º<code>cmake</code>çš„ä¸Šçº§ç¼–è¯‘ç³»ç»Ÿï¼Œæœ€åè¿˜æ˜¯è°ƒç”¨çš„<code>g++</code>ï¼Œ<code>g++</code>åœ¨ç¼–è¯‘çš„æ˜¯å¸®æˆ‘ä»¬æ£€æŸ¥ä»£ç ï¼Œè­¦å‘Šæˆ‘ä»¬å“ªé‡Œè¯­æ³•ä¸è§„èŒƒå•¥çš„ï¼Œæ²¡å¿…è¦ç®¡ï¼Œèƒ½ç”¨å°±è¡Œã€‚</p><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211118202235817.png" alt="ç¼–è¯‘æ—¶å€™çš„è­¦å‘Š"></p></blockquote><h4 id="4-å®‰è£…åŠŸèƒ½åŒ…å¯èƒ½ä¼šé‡åˆ°çš„é—®é¢˜"><a href="#4-å®‰è£…åŠŸèƒ½åŒ…å¯èƒ½ä¼šé‡åˆ°çš„é—®é¢˜" class="headerlink" title="4. å®‰è£…åŠŸèƒ½åŒ…å¯èƒ½ä¼šé‡åˆ°çš„é—®é¢˜"></a>4. å®‰è£…åŠŸèƒ½åŒ…å¯èƒ½ä¼šé‡åˆ°çš„é—®é¢˜</h4><blockquote><h4 id="1-CMake-Error-at-usr-lib-x86-64-linux-gnu-cmake-Qt5Gui-Qt5GuiConfig-cmake-27-message-ï¼šQt5çš„æŠ¥é”™"><a href="#1-CMake-Error-at-usr-lib-x86-64-linux-gnu-cmake-Qt5Gui-Qt5GuiConfig-cmake-27-message-ï¼šQt5çš„æŠ¥é”™" class="headerlink" title="1. **CMake Error at /usr/lib/x86_64-linux-gnu/cmake/Qt5Gui/Qt5GuiConfig.cmake:27 (message)**ï¼šQt5çš„æŠ¥é”™"></a>1. **CMake Error at /usr/lib/x86_64-linux-gnu/cmake/Qt5Gui/Qt5GuiConfig.cmake:27 (message)**ï¼šQt5çš„æŠ¥é”™</h4><p>å…·ä½“æŠ¥é”™å¦‚ä¸‹å›¾ï¼Œå³ç¼ºå°‘äº†<code>libEGL.so</code>è¿™ä¸ªå…±äº«åº“</p><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211118200845339.png" alt="Qt5æŠ¥é”™"></p><p><strong>è§£å†³æ–¹æ³•ï¼š</strong></p><p>å’Œä¸Šé¢å®‰è£…é©±åŠ¨æ—¶å€™é‡åˆ°çš„æŠ¥é”™å·®ä¸å¤šï¼Œä¼°è®¡æ˜¯ä¸€ä¸ªå°¿æ€§ï¼Œå³è½¯è¿æ¥æ–­äº†ï¼Œå…ˆå»<code>/usr/lib/x86-linux-gnu</code>ä¸‹çœ‹çœ‹ã€‚æœç„¶ï¼Œçº¢è‰²çš„å­—ä½“ï¼Œæ–­å¼€çš„é“¾æ¥ã€‚å³<code>/usr/lib/x86_64-linux-gnu/libEGL.so</code>è¿™ä¸ªè½¯è¿æ¥æœ¬æ¥æŒ‡å‘çš„æ–‡ä»¶æ²¡äº†ã€‚ä¸è¿‡çœ‹è¿™ä¸ªæ ·å­æœ‰ä¸€ä¸ª1.1.0ç‰ˆæœ¬çš„ï¼Œä¼°è®¡æ˜¯æŸæ¬¡<code>apt upgrade</code>æ—¶å€™æ›´æ–°äº†è¿™ä¸ªåº“ã€‚</p><pre class="line-numbers language-bash"><code class="language-bash"><span class="token punctuation">(</span>base<span class="token punctuation">)</span> jack@jack-Alienware-m15-R3:~/project/install_iai-kinect$ ll /usr/lib/x86_64-linux-gnu/libEGL.so* <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211118201305342.png" alt="libEGL.soæ–­å¼€çš„è½¯è¿æ¥"></p><p>é‚£ä¹ˆè§£å†³æ€è·¯å°±å¾ˆç®€å•äº†ï¼Œæˆ‘ä»¬å…ˆåˆ æ‰åŸæœ‰çš„æ–­æ‰çš„é“¾æ¥ï¼Œç„¶åè®©ä»–å†æŒ‡å‘æ–°ç‰ˆæœ¬å°±è¡Œäº†ï¼Œæ¯•ç«Ÿæ–°ç‰ˆæœ¬ä¸€èˆ¬éƒ½æ˜¯å‘åå…¼å®¹çš„ã€‚é™¤äº†<code>Python2</code>åˆ°<code>Python3</code></p><pre class="line-numbers language-bash"><code class="language-bash"><span class="token punctuation">(</span>base<span class="token punctuation">)</span> jack@jack-Alienware-m15-R3:~/project/install_iai-kinect$ <span class="token function">sudo</span> <span class="token function">rm</span> /usr/lib/x86_64-linux-gnu/libEGL.so <span class="token punctuation">(</span>base<span class="token punctuation">)</span> jack@jack-Alienware-m15-R3:~/project/install_iai-kinect$ <span class="token function">sudo</span> <span class="token function">ln</span> -s /usr/lib/x86_64-linux-gnu/libEGL.so.1.1.0 /usr/lib/x86_64-linux-gnu/libEGL.so<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>ç°åœ¨çœ‹ç€å°±æ²¡é—®é¢˜äº†ï¼Œç®¡é“å¯¹äº†</p><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211118201854870.png" alt="é‡ç½®libEGL.soçš„æŒ‡å‘"></p><p>ç„¶åå†è¿›è¡Œç¼–è¯‘å³å¯</p><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211118202028422.png" alt="åŠŸèƒ½åŒ…å¯ä»¥æ­£å¸¸ç¼–è¯‘"></p></blockquote><h2 id="4-ä½¿ç”¨kinect-bridge"><a href="#4-ä½¿ç”¨kinect-bridge" class="headerlink" title="4. ä½¿ç”¨kinect_bridge"></a>4. ä½¿ç”¨kinect_bridge</h2><p>ä½¿ç”¨<code>kinect_bridge</code>å…¶å®ç‰¹åˆ«ç®€å•ï¼Œå°±æ˜¯è®¢é˜…è¯é¢˜è€Œå·²ï¼Œä¸ºæ­¤æˆ‘ä»¬å¿«é€Ÿå†™ä¸€ä¸ª<code>Python</code>è„šæœ¬æµ‹è¯•ï¼Œæ³¨æ„æµ‹è¯•æ—¶å€™æ–°å»ºçš„åŠŸèƒ½åŒ…çš„ä¾èµ–ä¸è¦åŠ <code>iai_kinect2</code>ï¼Œå› ä¸º<code>kinect_bridge</code>å®ç°äº†ä½è€¦åˆæ€§ï¼Œæ‰€æœ‰çš„æ¶ˆæ¯å…¨éƒ¨éƒ½æ˜¯<code>ROS</code>ä¸­çš„æ ‡å‡†æ¶ˆæ¯ç±»å‹ï¼Œå› æ­¤æ²¡æœ‰æä¾›ä»»ä½•ROSç¼–è¯‘ä¹‹åå¯ä»¥å¼•ç”¨çš„åº“ã€‚<strong>ä¸‹é¢æ˜¯æ˜¯ä¸€ä¸ªé”™è¯¯çš„ç¤ºä¾‹</strong>ã€‚ï¼ˆæŒ–ä¸ªå‘ï¼Œä»¥åå‡ºä¸€ä¸ªå…³äº<code>Vscode</code>å¼€å‘<code>ROS</code>çš„ç¯å¢ƒæ­å»ºï¼ŒçœŸçš„<code>VScode</code>è¶Šç”¨è¶Šçˆ½ï¼‰</p><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211118210715487.png" alt="åŠŸèƒ½åŒ…çš„ä¾èµ–"></p><p>æ­£å› ä¸º<code>kinect_bridge</code>ä¸­çš„æ¶ˆæ¯å…¨éƒ¨éƒ½æ˜¯<code>ROS</code>çš„æ ‡å‡†æ¶ˆæ¯ï¼Œæ‰€æœ‰çš„å›¾åƒéƒ½æ˜¯<code>sensor_msgs/Image</code>æˆ–è€…<code>sensor_msgs/CompressedImage</code>ã€‚è€Œç‚¹äº‘åˆ™æ˜¯<code>sensor_msgs/PointCloud2</code>ï¼Œæˆ‘ä»¬å¯ä»¥éå¸¸å¿«é€Ÿçš„å†™ä¸€ä¸ªæµ‹è¯•ä»£ç ï¼Œä»£ç è§ä¸‹ï¼ˆ<strong>æ³¨æ„å¦‚æœä½ è¦å†™C++çš„è¯ä¸è¦åœ¨iai_bridgeçš„å·¥ä½œç©ºé—´ä¸­ç¼–è¯‘ï¼Œä¼šæŠ¥é”™ï¼Œå› ä¸ºKinect_Bridgeæ²¡æœ‰æä¾›ROSç¼–è¯‘ã€å®‰è£…ç›¸å…³çš„CMakeæŒ‡ä»¤</strong>ï¼‰</p><p>å…³äº<code>ROS</code>ä¸­ä½¿ç”¨<code>conda</code>ã€è¿˜æœ‰<code>cv_bridge</code>ã€<code>ROS</code>ä½¿ç”¨<code>Python</code>ç­‰é—®é¢˜å…ˆæŒ–ä¸ªå‘ï¼Œåé¢è¡¥ä¸Šæ–‡ç« </p><pre class="line-numbers language-python"><code class="language-python"><span class="token comment" spellcheck="true">#! /home/jack/anaconda3/envs/ros/bin/python</span><span class="token triple-quoted-string string">"""rospy ä¸­ä½¿ç”¨ é€šè¿‡ kinect è·å–ç‚¹äº‘çš„ç¤ºä¾‹ä»£ç  """</span><span class="token triple-quoted-string string">"""@author: Jack Wang@copyright: Jack Wang@time: 2021-11-18"""</span><span class="token keyword">import</span> sys<span class="token keyword">import</span> datetime<span class="token keyword">import</span> time<span class="token keyword">import</span> cv2<span class="token keyword">from</span> colorama <span class="token keyword">import</span> Fore<span class="token punctuation">,</span> Style<span class="token comment" spellcheck="true"># æˆ‘åœ¨ Python3 ä¸‹ç¼–è¯‘äº†cv_bridgeï¼Œæ‰€ä»¥è¦é¿å…importäº†ä¸‹è½½ROSæ—¶å€™ä¸€å¹¶ä¸‹è½½çš„ç³»ç»Ÿçš„Python2.7çš„cv_bridge</span><span class="token keyword">for</span> path_idx <span class="token keyword">in</span> range<span class="token punctuation">(</span>len<span class="token punctuation">(</span>sys<span class="token punctuation">.</span>path<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">if</span> <span class="token string">"2.7"</span> <span class="token keyword">in</span> sys<span class="token punctuation">.</span>path<span class="token punctuation">[</span>path_idx<span class="token punctuation">]</span><span class="token punctuation">:</span>        temp <span class="token operator">=</span> sys<span class="token punctuation">.</span>path<span class="token punctuation">.</span>pop<span class="token punctuation">(</span>path_idx<span class="token punctuation">)</span>        <span class="token keyword">break</span>sys<span class="token punctuation">.</span>path<span class="token punctuation">.</span>append<span class="token punctuation">(</span>temp<span class="token punctuation">)</span><span class="token keyword">import</span> rospy<span class="token keyword">from</span> sensor_msgs<span class="token punctuation">.</span>msg <span class="token keyword">import</span> Image<span class="token keyword">from</span> cv_bridge <span class="token keyword">import</span> CvBridge<span class="token keyword">class</span> <span class="token class-name">MyKinectViewer</span><span class="token punctuation">(</span>object<span class="token punctuation">)</span><span class="token punctuation">:</span>    bridge <span class="token operator">=</span> CvBridge<span class="token punctuation">(</span><span class="token punctuation">)</span>    today<span class="token punctuation">:</span> str <span class="token operator">=</span> datetime<span class="token punctuation">.</span>date<span class="token punctuation">.</span>today<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__str__<span class="token punctuation">(</span><span class="token punctuation">)</span>    start_sec<span class="token punctuation">:</span> float <span class="token operator">=</span> time<span class="token punctuation">.</span>time<span class="token punctuation">(</span><span class="token punctuation">)</span>    font <span class="token operator">=</span> cv2<span class="token punctuation">.</span>FONT_HERSHEY_DUPLEX    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> None<span class="token punctuation">:</span>        super<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span><span class="token punctuation">)</span>        rospy<span class="token punctuation">.</span>loginfo<span class="token punctuation">(</span>msg<span class="token operator">=</span>f<span class="token string">"{Fore.GREEN}å¯åŠ¨KinectBridgeè®¢é˜…èŠ‚ç‚¹ï¼{Style.RESET_ALL}"</span><span class="token punctuation">)</span>        subcriber <span class="token operator">=</span> rospy<span class="token punctuation">.</span>Subscriber<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">"/kinect2/sd/image_color_rect"</span><span class="token punctuation">,</span> data_class<span class="token operator">=</span>Image<span class="token punctuation">,</span> callback<span class="token operator">=</span>self<span class="token punctuation">.</span>image_cb<span class="token punctuation">,</span> queue_size<span class="token operator">=</span><span class="token number">20</span><span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">image_cb</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> msg<span class="token punctuation">:</span> Image<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> None<span class="token punctuation">:</span>        cv_img <span class="token operator">=</span> self<span class="token punctuation">.</span>bridge<span class="token punctuation">.</span>imgmsg_to_cv2<span class="token punctuation">(</span>msg<span class="token punctuation">)</span>        cv_img <span class="token operator">=</span> cv2<span class="token punctuation">.</span>putText<span class="token punctuation">(</span>cv_img<span class="token punctuation">,</span> f<span class="token string">"{self.today}, start times: {time.time()-self.start_sec:>.2f}"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">380</span><span class="token punctuation">)</span><span class="token punctuation">,</span> self<span class="token punctuation">.</span>font<span class="token punctuation">,</span> <span class="token number">0.8</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span><span class="token punctuation">)</span>        cv_img <span class="token operator">=</span> cv2<span class="token punctuation">.</span>putText<span class="token punctuation">(</span>cv_img<span class="token punctuation">,</span> f<span class="token string">"-- by Jack Wang"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">270</span><span class="token punctuation">,</span> <span class="token number">400</span><span class="token punctuation">)</span><span class="token punctuation">,</span> self<span class="token punctuation">.</span>font<span class="token punctuation">,</span> <span class="token number">0.8</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span><span class="token punctuation">)</span>        cv2<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span><span class="token string">"kinect_test"</span><span class="token punctuation">,</span> cv_img<span class="token punctuation">)</span>        <span class="token keyword">if</span> cv2<span class="token punctuation">.</span>waitKey<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">27</span><span class="token punctuation">:</span>            rospy<span class="token punctuation">.</span>loginfo<span class="token punctuation">(</span>f<span class="token string">"{Fore.GREEN}å…³é—­èŠ‚ç‚¹{Style.RESET_ALL}"</span><span class="token punctuation">)</span>            rospy<span class="token punctuation">.</span>signal_shutdown<span class="token punctuation">(</span>reason<span class="token operator">=</span><span class="token string">"pressed esc"</span><span class="token punctuation">)</span><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>    rospy<span class="token punctuation">.</span>init_node<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">"kinect_test"</span><span class="token punctuation">,</span> anonymous<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>    mkv <span class="token operator">=</span> MyKinectViewer<span class="token punctuation">(</span><span class="token punctuation">)</span>    rospy<span class="token punctuation">.</span>spin<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¯ä»¥çœ‹å‡ºæ¥ï¼Œæ•ˆæœè¿˜ä¸é”™</p><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211118214830894.png" alt="èŠ‚ç‚¹æ•ˆæœå›¾"></p><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211118214855870.png" alt="æŒ‰ä¸‹ESCé”®é€€å‡ºèŠ‚ç‚¹"></p><p>ç»“åˆæˆ‘ä¹‹å‰å†™çš„<code>YOLO V5</code>çš„<code>ROS</code>å›¾åƒå¤„ç†èŠ‚ç‚¹ï¼Œæœ€åå¯ä»¥å®ç°çš„æ•ˆæœï¼ˆ<code>Yolo V5</code>çš„<code>ROS</code>èŠ‚ç‚¹ä»£ç åé¢ä¼šå‘å‡ºæ¥ï¼‰</p><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211118220436969.png" alt="image-20211118220436969"></p><p>è‡³æ­¤ï¼Œæœ¬æ–‡å…¨éƒ¨ç»“æŸï¼Œæˆ‘ä»¬é¦–å…ˆä»‹ç»äº†ä»€ä¹ˆæ˜¯<code>Kinect</code>ç›¸æœºï¼›ç„¶åå°±<code>Kinect</code>ç›¸æœºçš„å‚æ•°ã€å·¥ä½œåŸç†è¿›è¡Œäº†ä»‹ç»ï¼›æ¥ä¸‹æ¥è®²è§£äº†å¦‚ä½•åœ¨<code>Linux(Ubuntu)</code>ä¸Šå®‰è£…<code>Kinect V2</code>ç›¸æœºçš„é©±åŠ¨ï¼š<code>libfreenect2</code>å’Œå®‰è£…<code>ROS</code>ä¸­çš„<code>Kinect</code>ç›¸æœºè°ƒç”¨èŠ‚ç‚¹ï¼›åœ¨æœ€åæˆ‘ä»¬ç»™å‡ºäº†ä¸€ä¸ªç®€å•çš„å°ä¾‹å­ï¼Œæ¥æ¼”ç¤ºå¦‚ä½•ä½¿ç”¨<code>iai-kinect2</code>åŠŸèƒ½åŒ…å¾—åˆ°çš„å›¾åƒæ•°æ®ã€‚</p><p>å…³äºiai-kinect2çš„æ›´å¤šä½¿ç”¨æ•™ç¨‹ï¼Œè¯·çœ‹ä¸‹ä¸€ç¯‡æ–‡ç« ï¼š<code>ROS</code>ä¸­<code>iai-kinect2</code>åŠŸèƒ½åŒ…çš„ä½¿ç”¨ã€‚</p><p>6200å­—ï¼Œç å­—ä¸æ˜“~ï¼Œæ¬¢è¿æ‰“èµ~ï¼Œä¸€èµ·æ¨åŠ¨å¼€æºäº‹ä¸šè¿›æ­¥</p>]]></content>
      
      
      <categories>
          
          <category> ROSæ‚ç¯‡ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ROS </tag>
            
            <tag> Ubuntu </tag>
            
            <tag> melodic </tag>
            
            <tag> Kinect V2 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åŸºäºhexoçš„ä¸ªäººæŠ€æœ¯åšå®¢æ­å»º â€”â€” Part-3 materyä¸»é¢˜ä¸‹çš„Hexoåšå®¢ä¼˜åŒ–.md</title>
      <link href="/2021/11/14/ji-yu-hexo-de-ge-ren-ji-zhu-bo-ke-da-jian-part-3-matery-zhu-ti-xia-de-hexo-you-hua-md-md/"/>
      <url>/2021/11/14/ji-yu-hexo-de-ge-ren-ji-zhu-bo-ke-da-jian-part-3-matery-zhu-ti-xia-de-hexo-you-hua-md-md/</url>
      
        <content type="html"><![CDATA[<blockquote><p>hexoæœ¬èº«åªæ˜¯æä¾›äº†ä¸€ä¸ªåšå®¢çš„æ¡†æ¶ï¼Œåšå®¢ç½‘ç«™çš„ç¾åŒ–å’Œä¼˜åŒ–è¿˜æ˜¯éœ€è¦é è‡ªå·±é…ç½®ä¸»é¢˜ã€‚æœ¬è®²å°†å¸¦é¢†è¯»è€…åˆ©ç”¨Materyä¸»é¢˜å¯¹Hexoæ­å»ºçš„åšå®¢è¿›è¡Œæ·±åº¦ä¼˜åŒ–</p></blockquote><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211207132452913.png" alt="æœ€ç»ˆæ•ˆæœå±•ç¤ºå›¾"></p><span id="more"></span><h1 id="åŸºäºHexoçš„ä¸ªäººæŠ€æœ¯åšå®¢æ­å»º-â€”â€”-Part-3-materyä¸»é¢˜ä¸‹çš„Hexoåšå®¢ä¼˜åŒ–"><a href="#åŸºäºHexoçš„ä¸ªäººæŠ€æœ¯åšå®¢æ­å»º-â€”â€”-Part-3-materyä¸»é¢˜ä¸‹çš„Hexoåšå®¢ä¼˜åŒ–" class="headerlink" title="åŸºäºHexoçš„ä¸ªäººæŠ€æœ¯åšå®¢æ­å»º â€”â€”  Part 3 materyä¸»é¢˜ä¸‹çš„Hexoåšå®¢ä¼˜åŒ–"></a>åŸºäºHexoçš„ä¸ªäººæŠ€æœ¯åšå®¢æ­å»º â€”â€”  Part 3 materyä¸»é¢˜ä¸‹çš„Hexoåšå®¢ä¼˜åŒ–</h1><p>åœ¨å‰é¢çš„ä¸€ç« ä¸­ï¼Œæˆ‘ä»¬å·²ç»é€šè¿‡<code>hexo</code>åœ¨æœ¬åœ°æ­å»ºå‡ºäº†ä¸€ä¸ªåšå®¢ã€‚ä½†æ˜¯ç›®å‰ï¼Œè¿™ä¸ªåšå®¢è¿˜å­˜åœ¨ä¸€äº›é—®é¢˜</p><ol><li><strong>ç›®å‰åšå®¢ç½‘ç«™è¿è¡Œåœ¨æœ¬åœ°ï¼Œæ‰€ä»¥åªæœ‰æˆ‘ä»¬è‡ªå·±èƒ½çœ‹åˆ°</strong></li><li><strong>Hexoé»˜è®¤çš„åšå®¢ä¸å¤Ÿç¾è§‚ã€åŠŸèƒ½ä¸å¤Ÿå¤š</strong></li></ol><p>é’ˆå¯¹ä¸Šé¢ä¸¤ä¸ªæˆ‘ä»¬ï¼Œæœ¬ç« å’Œä¸‹ä¸€ç« å°±å°†è¿›è¡Œè§£å†³ã€‚æœ¬ç« é¦–å…ˆè§£å†³ç¬¬äºŒä¸ªé—®é¢˜ï¼Œå³ä¼˜åŒ–Hexoåšå®¢ã€‚</p><h2 id="1-ä¸ºä»€ä¹ˆä½¿ç”¨å…¶ä»–çš„Hexoä¸»é¢˜ï¼Ÿ"><a href="#1-ä¸ºä»€ä¹ˆä½¿ç”¨å…¶ä»–çš„Hexoä¸»é¢˜ï¼Ÿ" class="headerlink" title="1. ä¸ºä»€ä¹ˆä½¿ç”¨å…¶ä»–çš„Hexoä¸»é¢˜ï¼Ÿ"></a>1. ä¸ºä»€ä¹ˆä½¿ç”¨å…¶ä»–çš„Hexoä¸»é¢˜ï¼Ÿ</h2><p>åœ¨å‰é¢ä¸€ç« ä¸­æˆ‘ä»¬è®²è¿‡ï¼Œ<code>Hexo</code>ä¸»é¢˜çš„å·¥ä½œåŸç†å…¶å®å°±æ˜¯<code>Hexo</code>çš„ä¸»é¢˜é‡Œé¢å†™çš„<code>JavaScript</code>å’Œ<code>CSS</code>è¦†ç›–æ‰äº†<code>hexo</code>çš„<code>JavaScript</code>å’Œ<code>CSS</code>ã€‚è€ŒCSSå†³å®šäº†<code>Hexo</code>åšå®¢çš„å¤–è§‚ï¼Œå› æ­¤æ˜¯å¦ç¾è§‚å®é™…ä¸Šå–å†³äºä¸»é¢˜é‡Œçš„<code>CSS</code>ã€‚åŒæ ·JavaScriptå†³å®šäº†ç½‘é¡µå’Œæˆ‘ä»¬çš„äº¤äº’ï¼Œå› æ­¤ç½‘é¡µçš„åŠŸèƒ½å¦‚ä½•å®é™…ä¸Šä¹Ÿå–å†³ä¸æˆ‘ä»¬çš„ä¸»é¢˜ã€‚å› æ­¤ï¼Œä¸€ä¸ªä¼˜ç§€çš„ä¸»é¢˜æ˜¯æœ‰ä¸€ä¸ªå®Œç¾çš„<code>Hexo</code>åšå®¢çš„å…ˆå†³æ¡ä»¶ã€‚æœ‰äº†ä¸€ä¸ªä¼˜ç§€çš„ä¸»é¢˜ï¼Œæˆ‘ä»¬çš„åšå®¢ä¸ä»…æ›´åŠ ç¾è§‚ï¼ŒåŠŸèƒ½ä¹Ÿä¼šæ›´åŠ å¼ºå¤§ã€‚</p><p>å› æ­¤æˆ‘ä»¬å¯¹<code>Hexo</code>åšå®¢è¿›è¡Œä¼˜åŒ–ï¼Œå®é™…ä¸Šå°±æ˜¯ä½¿ç”¨å…¶ä»–ä¸»é¢˜ï¼Œå¹¶å¯¹è¿™äº›ä¸»é¢˜è¿›è¡Œé…ç½®ã€</p><p>åé¢ï¼Œå°±å°†ä»¥<code>Hexo</code>çš„<code>matery</code>ä¸»é¢˜ä¸ºä¾‹ï¼Œè¿›è¡Œä¼˜åŒ–</p><h2 id="2-åŸºäºMateryä¸»é¢˜çš„Hexoåšå®¢ä¼˜åŒ–"><a href="#2-åŸºäºMateryä¸»é¢˜çš„Hexoåšå®¢ä¼˜åŒ–" class="headerlink" title="2. åŸºäºMateryä¸»é¢˜çš„Hexoåšå®¢ä¼˜åŒ–"></a>2. åŸºäºMateryä¸»é¢˜çš„Hexoåšå®¢ä¼˜åŒ–</h2><p><code>Matery</code>ä¸»é¢˜æ˜¯ç”±å›½å†…çš„é—ªçƒä¹‹ç‹ï¼ˆblinkfoxï¼‰åˆ¶ä½œçš„ä¸€æ¬¾ç¾è§‚çš„ä¸»é¢˜ï¼ŒåŒ…æ‹¬æˆ‘åœ¨å†™è¿™ç¯‡åšå®¢æ—¶å€™æˆ‘çš„åšå®¢æ‰€ç”¨çš„ä¸»é¢˜å°±æ˜¯<code>Matery</code>ã€‚</p><p>ä¹‹æ‰€ä»¥ä½¿ç”¨<code>Matery</code>ä¸»é¢˜ï¼Œç¾è§‚åªæ˜¯ä¸€ä¸ªæ–¹é¢ï¼Œæ›´é‡è¦çš„æ˜¯<code>Matery</code>ä»¥æ’ä»¶çš„å½¢å¼æä¾›äº†éå¸¸å¤šä¼˜ç§€çš„ç¨‹åºï¼Œé€šè¿‡è¿™äº›ç¨‹åºä½¿å¾—æˆ‘ä»¬èƒ½å¤Ÿæå¤§åœ°ä¼˜åŒ–æˆ‘ä»¬çš„ç½‘ç«™ã€‚</p><p>è®¿é—®é—ªçƒä¹‹ç‹çš„<a href="http://blinkfox.com/">Hexoåšå®¢</a>å’Œä»–çš„<code>Matery</code>ä¸»é¢˜çš„<a href="https://github.com/blinkfox/hexo-theme-matery">Github</a>æŸ¥çœ‹æ›´å¤šçš„ä¿¡æ¯</p><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211115010655463.png" alt="é—ªçƒä¹‹ç‹çš„Materyä¸»é¢˜ç¤ºä¾‹"></p><p>æ¥ä¸‹æ¥æˆ‘ä»¬å°±å°†åŸºäº<code>Matery</code>ä¸»é¢˜æ¥å¯¹æˆ‘ä»¬çš„<code>Hexo</code>åšå®¢è¿›è¡Œä¼˜åŒ–</p><blockquote><p>æ³¨æ„ï¼Œä¸‹é¢çš„å¾ˆå¤šæ•™ç¨‹åœ¨<code>Matery</code>çš„<code>Github</code>ä¸Šå·²ç»æœ‰ä»‹ç»äº†ï¼Œå› æ­¤ä¸‹é¢çš„ä»‹ç»æ›´å¤šçš„æ˜¯å…³æ³¨<code>Matery Github</code>ä¸Šæ²¡æœ‰è®²åˆ°çš„ç‚¹</p></blockquote><h3 id="1-å®‰è£…Matery"><a href="#1-å®‰è£…Matery" class="headerlink" title="1. å®‰è£…Matery"></a>1. å®‰è£…Matery</h3><p><code>Matery</code>çš„<code>Github</code>ä¸­çš„ä¸­æ–‡è¯´æ˜å·²ç»è®²è¿‡äº†ï¼Œåœ¨<code>Hexo</code>åšå®¢æ–‡ä»¶å¤¹ä¸‹çš„<code>theme</code>æ–‡ä»¶å¤¹<code>clone</code> ä¸‹<code>Matery</code>é¡¹ç›®å³å¯</p><pre class="line-numbers language-bash"><code class="language-bash"><span class="token punctuation">(</span>base<span class="token punctuation">)</span> jack@jack-Alienware-m15-R3:~/project/blog-test$ <span class="token function">cd</span> themes/<span class="token punctuation">(</span>base<span class="token punctuation">)</span> jack@jack-Alienware-m15-R3:~/project/blog-test/themes$ <span class="token function">git</span> clone https://github.com/blinkfox/hexo-theme-matery.git<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>å®‰è£…å®Œæˆä¹‹åï¼Œæˆ‘ä»¬hexoåšå®¢çœ‹çœ‹æ•ˆæœ</p><pre class="line-numbers language-bash"><code class="language-bash"><span class="token punctuation">(</span>base<span class="token punctuation">)</span> jack@jack-Alienware-m15-R3:~/project/blog-test/themes$ <span class="token function">cd</span> <span class="token punctuation">..</span><span class="token punctuation">(</span>base<span class="token punctuation">)</span> jack@jack-Alienware-m15-R3:~/project/blog-test$ hexo s<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p><strong>å‘ç°å’Œä¹‹å‰çš„åšå®¢å¹¶æ²¡æœ‰ä»»ä½•å˜åŒ–</strong>ï¼Œè¿™æ˜¯å› ä¸ºæˆ‘ä»¬éœ€è¦åœ¨<code>Hexo</code>çš„é…ç½®æ–‡ä»¶ä¸­æŒ‡å®šä½¿ç”¨<code>Matery</code>ä¸»é¢˜</p><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211115011512753.png" alt="åšå®¢æ²¡æœ‰ä»»ä½•å˜åŒ–"></p><h3 id="2-åˆ‡æ¢Materyä¸»é¢˜"><a href="#2-åˆ‡æ¢Materyä¸»é¢˜" class="headerlink" title="2. åˆ‡æ¢Materyä¸»é¢˜"></a>2. åˆ‡æ¢Materyä¸»é¢˜</h3><p><code>vim</code>ä¿®æ”¹<code>hexo</code>åšå®¢æ ¹ç›®å½•ä¸‹çš„<code>_config.yml</code>ï¼Œå°†<code>theme</code>çš„å€¼æ”¹ä¸º <code>hexo-theme-matery</code>ï¼Œè¿™æ ·å°±å¯ç”¨äº†Materyä¸»é¢˜</p><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211115011735922.png" alt="ä¿®æ”¹ä¹‹åçš„å€¼"></p><p>æ¥ä¸‹æ¥è¿è¡Œä¸€ä¸‹åšå®¢ï¼Œå°±èƒ½å¤Ÿçœ‹åˆ°æ•ˆæœäº†</p><pre class="line-numbers language-bash"><code class="language-bash"><span class="token punctuation">(</span>base<span class="token punctuation">)</span> jack@jack-Alienware-m15-R3:~/project/blog-test$ hexo s<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å¯ä»¥çœ‹åˆ°ï¼Œé»˜è®¤é…ç½®å°±å·²ç»éå¸¸æ¼‚äº®äº†</p><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211115011929561.png" alt="Materyä¸»é¢˜çš„é¦–é¡µ"></p><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211115012203467.png" alt="Materyä¸»é¢˜çš„åº•éƒ¨"></p><p>ä½†æ˜¯è¿™ä¸ªé»˜è®¤çš„ä¸»é¢˜ä¹Ÿæœ‰ä¸€äº›å°é—®é¢˜ï¼Œéœ€è¦æˆ‘ä»¬å»ä¿®æ”¹ï¼Œæ¯”å¦‚è¯´ç½‘ç«™çš„å·¦ä¸Šè§’çš„logoï¼Œä¸­é—´æµ®åŠ¨æ‰“å°çš„è¯­å¥ï¼Œä¸­é—´çš„githubé“¾æ¥éœ€è¦ä¿®æ”¹æˆæˆ‘ä»¬è‡ªå·±çš„ï¼Œæˆ‘çš„æ¢¦æƒ³æ çš„è¯­å¥éœ€è¦ä¿®æ”¹æˆè‡ªå·±çš„ï¼Œå³ä¸‹è§’çš„è”ç³»æ–¹å¼éœ€è¦æ”¹æˆæˆ‘ä»¬è‡ªå·±çš„â€¦â€¦</p><p>é™¤äº†è¿™äº›ä¸ªäººä¿¡æ¯é…ç½®ä»¥å¤–ï¼Œè¿˜æœ‰æœ€å…³é”®çš„ä¸€ç‚¹å°±æ˜¯å³ä¸Šè§’é€‰é¡¹å¡é™¤äº†<code>é¦–é¡µ</code>ä»¥å¤–ï¼Œå…¶ä»–çš„ç‚¹å‡»éƒ½ä¼šç›´æ¥æ²¡æœ‰å¯¹åº”çš„ç•Œé¢æ˜¾ç¤ºã€‚<strong>è¿™æ˜¯å› ä¸ºMateryé»˜è®¤æ²¡æœ‰è¿™äº›ç•Œé¢ï¼Œéœ€è¦æˆ‘ä»¬è‡ªå·±é…ç½®</strong></p><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211115012428235.png" alt="ç‚¹å‡»åæ˜¾ç¤ºé”™è¯¯"></p><h3 id="3-æ·»åŠ ç¼ºå¤±çš„é¡µé¢"><a href="#3-æ·»åŠ ç¼ºå¤±çš„é¡µé¢" class="headerlink" title="3. æ·»åŠ ç¼ºå¤±çš„é¡µé¢"></a>3. æ·»åŠ ç¼ºå¤±çš„é¡µé¢</h3><p>åœ¨å‰é¢çš„ä¸€ç« ä¸­ï¼Œæˆ‘ä»¬è®²åˆ°<code>hexo</code>ä¸­ä¸€ç¯‡åšå®¢çš„æºæ–‡ä»¶æ˜¯ä¸€ä¸ª<code>.md</code>æ–‡ä»¶ï¼Œé€šè¿‡ä½¿ç”¨<code>hexo generta</code>å‘½ä»¤ï¼Œhexoè‡ªåŠ¨çš„ä¸ºæˆ‘ä»¬çš„åšæ–‡ç”Ÿæˆä¸€ä¸ªç½‘é¡µä»¥åŠå¯¹åº”çš„èµ„æºæ–‡ä»¶ã€‚è€Œå…¶å®åœ¨<code>hexo</code>ï¼Œä¸­ä¸€ä¸ªé¡µé¢å¯¹åº”çš„ä¹Ÿæ˜¯ä¸€ä¸ª<code>.md</code>æ–‡ä»¶ï¼ŒåŒæ ·æˆ‘ä»¬ç¨åä½¿ç”¨<code>hexo generta</code>æ¥ç”Ÿæˆæ–°çš„é¡µé¢ã€‚åªä¸è¿‡é¡µé¢å¯¹åº”çš„<code>.md</code>æ–‡ä»¶ä¼šå’Œåšå®¢çš„<code>.md</code>å­˜åœ¨ä¸€äº›ä¸åŒ</p><p>ä¸‹é¢å°±å°†ä»¥æ·»åŠ <code>å…³äº</code>ç•Œé¢ä¸ºä¾‹ï¼Œè®²è§£Hexoçš„é¡µé¢å·¥ä½œåŸç†çš„åŒæ—¶å¸¦é¢†è¯»è€…é…ç½®<code>Matery</code>çš„é¡µé¢</p><h4 id="A-æ·»åŠ å…³äºAbouté¡µé¢"><a href="#A-æ·»åŠ å…³äºAbouté¡µé¢" class="headerlink" title="A. æ·»åŠ å…³äºAbouté¡µé¢"></a>A. æ·»åŠ <code>å…³äºAbout</code>é¡µé¢</h4><p>æˆ‘ä»¬é¦–å…ˆåœ¨æ ¹ç›®å½•ä¸‹ä½¿ç”¨<code>hexo new page xxx</code>å‘½ä»¤æ¥ç”Ÿæˆä¸€ä¸ªæ–°çš„é¡µé¢ã€‚åŒæ ·ä¸ºäº†åç»­çš„è®²è§£ï¼Œæˆ‘ä»¬é¦–å…ˆä¿å­˜ä¸‹ç°åœ¨çš„ç›®å½•ç»“æ„</p><pre class="line-numbers language-bash"><code class="language-bash"><span class="token punctuation">(</span>base<span class="token punctuation">)</span> jack@jack-Alienware-m15-R3:~/project/blog-test$ <span class="token function">touch</span> before_about.txt<span class="token punctuation">(</span>base<span class="token punctuation">)</span> jack@jack-Alienware-m15-R3:~/project/blog-test$ <span class="token function">touch</span> after_about.txt<span class="token punctuation">(</span>base<span class="token punctuation">)</span> jack@jack-Alienware-m15-R3:~/project/blog-test$ tree <span class="token operator">>></span> before_about.txt <span class="token punctuation">(</span>base<span class="token punctuation">)</span> jack@jack-Alienware-m15-R3:~/project/blog-test$ hexo new page <span class="token string">"about"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>æ¥ä¸‹æ¥æˆ‘ä»¬éœ€è¦ä¿®æ”¹åˆšåˆšæ–°ç”Ÿæˆçš„<code>.md</code>æ¥è¯´æ˜è¿™ä¸ªæ˜¯ä¸€ä¸ªé¡µé¢è€Œéåšå®¢ï¼Œè¿™æ ·ç¨åç”Ÿæˆåšå®¢çš„æ—¶å€™å°±ä¼šç”Ÿæˆå‡ºæ¥ä¸€ä¸ªæ–°çš„é¡µé¢</p><pre class="line-numbers language-bash"><code class="language-bash"><span class="token punctuation">(</span>base<span class="token punctuation">)</span> jack@jack-Alienware-m15-R3:~/project/blog-test$ vim source/about/index.md <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å°†<code>index.md</code>ä¿®æ”¹ä¸ºå¦‚ä¸‹å†…å®¹ï¼Œå½“ç„¶æ—¥æœŸå¯ä»¥æŒ‰ç…§ä½ è‡ªå·±çš„æ¥</p><pre class="line-numbers language-markdown"><code class="language-markdown"><span class="token hr punctuation">---</span>title: aboutdate: 2021-11-15 01:37:51type: "about"<span class="token title important">layout: "about"<span class="token punctuation">---</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211115014047478.png" alt="ä¿®æ”¹åçš„index.md"></p><p>æ¥ä¸‹æ¥æˆ‘ä»¬ç”Ÿæˆä¸€ä¸‹æ·»åŠ åçš„åšå®¢ï¼Œåˆ«å¿˜äº†ç”Ÿæˆä¹‹å‰<code>clean</code>ä¸€ä¸‹ï¼Œæ¸…é™¤æ‰ä¹‹å‰çš„åšå®¢ã€‚åŒæ—¶ä¸‹é¢ç”±äºè¦è®²è§£åŸç†ï¼Œå› æ­¤ç”Ÿæˆåæˆ‘ä»¬è¾“å‡ºä¸€ä¸‹ç”Ÿæˆä¹‹åçš„ç›®å½•ç»“æ„</p><pre class="line-numbers language-bash"><code class="language-bash"><span class="token punctuation">(</span>base<span class="token punctuation">)</span> jack@jack-Alienware-m15-R3:~/project/blog-test$ hexo clean<span class="token punctuation">(</span>base<span class="token punctuation">)</span> jack@jack-Alienware-m15-R3:~/project/blog-test$ hexo gen<span class="token punctuation">(</span>base<span class="token punctuation">)</span> jack@jack-Alienware-m15-R3:~/project/blog-test$ tree <span class="token operator">>></span> after_about.txt <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>ç„¶åæˆ‘ä»¬è¿è¡Œä¸‹åšå®¢çœ‹çœ‹æ•ˆæœ</p><p>å¯ä»¥çœ‹åˆ°ï¼Œæ­¤æ—¶ç‚¹å‡»<code>å…³äº</code>å°±å¯ä»¥æ­£å¸¸æ˜¾ç¤ºå¤„é¡µé¢äº†ï¼Œåº•éƒ¨åˆ™æ˜¾ç¤ºå‡ºæˆ‘ä»¬çš„åˆ¶ä½œçš„é¡¹ç›®</p><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211115014533558.png" alt="æ­£å¸¸æ˜¾ç¤ºçš„å…³äºé¡µé¢"></p><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211115014620968.png" alt="å…³äºé¡µé¢çš„åº•éƒ¨"></p><p>å½“ç„¶ï¼Œè¿™äº›ä¿¡æ¯éƒ½æ˜¯é»˜è®¤çš„ä¿¡æ¯ï¼Œæˆ‘ä»¬ç¨åæ˜¯è‚¯å®šéœ€è¦ä¿®æ”¹æˆæˆ‘ä»¬è‡ªå·±çš„ã€‚ä¸è¿‡åœ¨è¿™ä¹‹å‰ï¼Œå…ˆåˆ«ç€æ€¥ï¼Œæˆ‘ä»¬å…ˆäº†è§£ä¸€ä¸‹<code>hexo</code>æ˜¯æ€ä¹ˆæ ·æ–°ç”Ÿæˆä¸€ä¸ªé¡µé¢çš„</p><h4 id="B-Hexoæ˜¯æ€ä¹ˆæ ·ç”Ÿæˆæ–°çš„é¡µé¢çš„ï¼Ÿ"><a href="#B-Hexoæ˜¯æ€ä¹ˆæ ·ç”Ÿæˆæ–°çš„é¡µé¢çš„ï¼Ÿ" class="headerlink" title="B. Hexoæ˜¯æ€ä¹ˆæ ·ç”Ÿæˆæ–°çš„é¡µé¢çš„ï¼Ÿ"></a>B. Hexoæ˜¯æ€ä¹ˆæ ·ç”Ÿæˆæ–°çš„é¡µé¢çš„ï¼Ÿ</h4><p>æˆ‘ä»¬åˆ©ç”¨ä¸Šé¢ä¸¤æ¬¡è¾“å‡ºçš„ç›®å½•ç»“æ„ï¼Œæ¥çœ‹çœ‹æ·»åŠ ã€ç”Ÿæˆé¡µé¢ä¹‹ååšå®¢ç›®å½•ç»“æ„çš„å˜åŒ–</p><pre class="line-numbers language-bash"><code class="language-bash"><span class="token punctuation">(</span>base<span class="token punctuation">)</span> jack@jack-Alienware-m15-R3:~/project/blog-test$ vim -d before_about.txt after_about.txt <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>é¦–å…ˆæ˜¯å‘å¸ƒçš„åšå®¢çš„<code>public</code>æ–‡ä»¶å¤¹ä¸‹å¤šäº†éå¸¸å¤šçš„ä¸œè¥¿ã€‚é™¤äº†æˆ‘ä»¬ä¹‹å‰æ·»åŠ çš„ç¬¬ä¸€ç¯‡åšå®¢å¤–ï¼Œè¿˜å¤šå‡ºäº†<code>about</code>ã€<code>css</code>ã€<code>js</code>ç­‰ä¸€äº›æ–‡ä»¶å¤¹</p><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211115015145727.png" alt="Publicæ–‡ä»¶å¤¹çš„å˜åŒ–"></p><p>æ­¤å¤–ï¼Œæˆ‘ä»¬çš„æºä»£ç æ–‡ä»¶å¤¹ä¸­ä¹Ÿå¤šäº†<code>about</code>æ–‡ä»¶å¤¹å’Œåœ¨å…¶ä¸‹é¢çš„<code>index.md</code></p><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211115015222432.png" alt="sourceæ–‡ä»¶å¤¹ä¸‹çš„ä¸åŒ"></p><p>å®é™…ä¸Šåˆ°è¿™é‡Œä½ åº”è¯¥èƒ½å¤ŸçŒœå‡ºæ¥äº†ï¼Œ<code>hexo</code>å’Œ<code>matery</code>ç”Ÿæˆæ–°çš„é¡µé¢çš„å·¥ä½œåŸç†å°±æ˜¯ï¼š</p><ul><li>é¦–å…ˆ<code>hexo</code>è®¤ä¸º<code>source</code>æ–‡ä»¶å¤¹ä¸‹çš„ä¸€ä¸ªæ–‡ä»¶å¤¹å°±æ˜¯ä¸€ä¸ªé¡µé¢ï¼Œè¿™ä¸ªé¡µé¢å¿…é¡»è¦æœ‰ä¸€ä¸ª<code>index.md</code>æ¥è¯´æ˜è¿™ä¸ªé¡µé¢çš„ä¿¡æ¯ï¼Œä¾‹å¦‚ä¸Šé¢æŒ‡å®šç”Ÿæˆé¡µé¢ä½¿ç”¨çš„æ¨¡æ¿</li><li>å…¶æ¬¡ï¼Œ<code>matery</code>åœ¨ç”Ÿæˆé¡¹ç›®çš„æ—¶å€™ï¼Œä¼šåœ¨publicä¸‹ç”Ÿæˆæ–°çš„ç½‘ç«™çš„é…ç½®æ–‡ä»¶æ¥ä¿®æ”¹é»˜è®¤çš„é¡µé¢ã€‚å› æ­¤æˆ‘ä»¬çš„ç¡®å¯ä»¥ä¿®æ”¹è¿™ä¸ª<code>public</code>ä¸‹é¢çš„<code>matery</code>ç”Ÿæˆçš„èµ„æºæ–‡ä»¶ã€‚ä½†æ˜¯å¹¶ä¸æ¨èè¿™æ ·åšï¼Œå› ä¸ºæ‰€æœ‰çš„ä¿®æ”¹åœ¨åç»­<code>generate</code>ä¹‹åå°±ä¼šä¸¢å¤±ã€‚ä¸æ­¤ç›¸æ¯”ï¼Œä¸‹é¢ä¼šä»‹ç»æ›´å¥½çš„ä¿®æ”¹ã€é…ç½®<code>matery</code>ä¸»é¢˜çš„æ–¹å¼</li></ul><p>æœ€åï¼Œæˆ‘ä»¬ä¾ç…§<code>Matery Github</code>ï¼ˆ<a href="https://github.com/blinkfox/hexo-theme-matery/blob/develop/README_CN.md">é“¾æ¥</a>ï¼‰ä¸­çš„<code>README</code>çš„æŒ‡å¼•ï¼Œå¦‚æ³•ç‚®åˆ¶æ·»åŠ å‰©ä¸‹çš„æ‰€æœ‰é¡µé¢ã€‚</p><p>å®Œæˆäº†ä¹‹åï¼Œä½ å¯ä»¥å°½æƒ…çš„æ¢ç´¢ä¸€ä¸‹æ–°å¾—åˆ°çš„é¡µé¢ã€‚</p><h3 id="4-é…ç½®Materyä¸»é¢˜"><a href="#4-é…ç½®Materyä¸»é¢˜" class="headerlink" title="4. é…ç½®Materyä¸»é¢˜"></a>4. é…ç½®Materyä¸»é¢˜</h3><p>ä¸Šé¢æˆ‘ä»¬é€šè¿‡ç®€å•çš„Materyä¸»é¢˜çš„é…ç½®å¾—åˆ°äº†ä¸€äº›ç•Œé¢ï¼Œä¸‹é¢æˆ‘ä»¬å°±å°†è¿›ä¸€æ­¥é…ç½®Materyä¸»é¢˜ã€‚</p><p>æˆäººä»¥é±¼ä¸å¦‚æˆäººä»¥æ¸”ï¼Œå› æ­¤ä¸‹é¢æˆ‘ä¼šé¦–å…ˆè®²è§£Materyä¸»é¢˜çš„é…ç½®æ˜¯å¦‚ä½•å·¥ä½œçš„è€Œéå•çº¯çš„ç½—åˆ—ï¼Œåœ¨è®²è§£å®ŒåŸç†ä¹‹åä¼šç•™ä¸‹æˆ‘å‚è€ƒè¿‡çš„ä¸é”™çš„é“¾æ¥ï¼Œè¯»è€…å¯ä»¥å»é‡Œé¢æ ¹æ®è‡ªå·±çš„éœ€æ±‚é…ç½®ã€‚</p><p>ä¸‹é¢å°†ä»¥å®‰è£…æ–‡ç« å­—æ•°æ’ä»¶ä¸ºä¾‹è¿›è¡Œè®²è§£ã€‚</p><h4 id="A-æ–‡ç« å­—æ•°ç»Ÿè®¡"><a href="#A-æ–‡ç« å­—æ•°ç»Ÿè®¡" class="headerlink" title="A. æ–‡ç« å­—æ•°ç»Ÿè®¡"></a>A. æ–‡ç« å­—æ•°ç»Ÿè®¡</h4><p>ç»†å¿ƒåœ°è¯»è€…å·²ç»å‘ç°ï¼Œåœ¨æˆ‘ä»¬ä¸Šé¢çš„åšå®¢åº•éƒ¨å…¶å®æ˜¯æ²¡æœ‰æ–‡ç« å­—æ•°ç»Ÿè®¡çš„ï¼Œè€Œé—ªçƒä¹‹ç‹çš„å®ä¾‹ç½‘é¡µä¸­å´å…·æœ‰æ–‡ç« å­—æ•°ç»Ÿè®¡ã€‚</p><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211115021145362.png" alt="æˆ‘ä»¬çš„ç•Œé¢"></p><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211115021216163.png" alt="é—ªçƒä¹‹ç‹çš„ç½‘ç«™"></p><p>å®é™…ä¸Šï¼Œè¿™ä¸ªåŠŸèƒ½æ˜¯ä¾é ç¬¬ä¸‰æ–¹æ’ä»¶<code>+Matery</code>é…ç½®å®Œæˆçš„ã€‚æˆ‘ä»¬é¦–å…ˆä¸‹è½½è¿™ä¸ªæ’ä»¶ï¼Œä¸è¿‡æ³¨æ„ï¼Œæˆ‘ä»¬åœ¨å‰é¢å®‰è£…äº†<code>cnpm</code>ï¼Œå› æ­¤ä½¿ç”¨<code>cnpm</code>å®‰è£…å³å¯</p><pre class="line-numbers language-bash"><code class="language-bash"><span class="token punctuation">(</span>base<span class="token punctuation">)</span> jack@jack-Alienware-m15-R3:~/project/blog-test$ cnpm i --save hexo-wordcount<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å®‰è£…å®Œæˆä¹‹åï¼Œæˆ‘ä»¬è¿˜è¦ä¿®æ”¹<code>theme</code>æ–‡ä»¶å¤¹ä¸‹<code>Matery</code>ä¸»é¢˜çš„é…ç½®æ–‡ä»¶æ¥æ¿€æ´»æ’ä»¶ï¼Œ<strong>æ³¨æ„æ˜¯Mateyä¸»é¢˜çš„é…ç½®æ–‡ä»¶</strong>ã€‚å› ä¸ºé¡µé¢çš„æ ·å¼ä¿¡æ¯éƒ½æ˜¯Materyè´Ÿè´£çš„ã€‚</p><pre class="line-numbers language-bash"><code class="language-bash"><span class="token punctuation">(</span>base<span class="token punctuation">)</span> jack@jack-Alienware-m15-R3:~/project/blog-test$ vim themes/hexo-theme-matery/_config.yml <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ä¿®æ”¹ä¸º</p><pre class="line-numbers language-yaml"><code class="language-yaml"><span class="token key atrule">postInfo</span><span class="token punctuation">:</span>  <span class="token key atrule">date</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token key atrule">update</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>  <span class="token key atrule">wordCount</span><span class="token punctuation">:</span> <span class="token boolean important">true </span><span class="token comment" spellcheck="true"># è®¾ç½®æ–‡ç« å­—æ•°ç»Ÿè®¡ä¸º true.</span>  <span class="token key atrule">totalCount</span><span class="token punctuation">:</span> <span class="token boolean important">true </span><span class="token comment" spellcheck="true"># è®¾ç½®ç«™ç‚¹æ–‡ç« æ€»å­—æ•°ç»Ÿè®¡ä¸º true.</span>  <span class="token key atrule">min2read</span><span class="token punctuation">:</span> <span class="token boolean important">true </span><span class="token comment" spellcheck="true"># é˜…è¯»æ—¶é•¿.</span>  <span class="token key atrule">readCount</span><span class="token punctuation">:</span> <span class="token boolean important">true </span><span class="token comment" spellcheck="true"># é˜…è¯»æ¬¡æ•°.</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211115021824246.png" alt="ä¿®æ”¹åçš„_config.yml"></p><p>ç„¶åæˆ‘ä»¬åŒæ ·cleanä¹‹ågenerateçœ‹çœ‹æ•ˆæœ</p><p>å¯ä»¥çœ‹åˆ°ï¼Œå·²ç»å‡ºç°ç»Ÿè®¡ä¿¡æ¯äº†</p><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211115021949461.png" alt="åº•éƒ¨å…·æœ‰äº†ç»Ÿè®¡ä¿¡æ¯"></p><h4 id="B-Materyçš„é…ç½®æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ"><a href="#B-Materyçš„é…ç½®æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ" class="headerlink" title="B. Materyçš„é…ç½®æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ"></a>B. Materyçš„é…ç½®æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ</h4><p>äº‹å®ä¸Šï¼Œ<code>Matery</code>ä¸»é¢˜ä¾é å…¶ä¸»é¢˜æ–‡ä»¶å¤¹ä¸‹çš„<code>_config.yml</code>æ¥è¿›è¡Œé…ç½®ã€‚è¿™ä¸ªæ–‡ä»¶ä¸­æä¾›äº†è¯¸å¦‚ï¼šç½‘ç«™ä¸Šæ–¹é€‰é¡¹å¡çš„é€‰é¡¹ã€ä¸ªäººä¿¡æ¯ã€å¤´åƒã€logoç­‰èµ„æºæ–‡ä»¶ä½ç½®è¿™ç±»çš„é…ç½®ï¼Œè¿˜æœ‰æ˜¯å¦æ¿€æ´»xxæ’ä»¶ã€xxæ•ˆæœç­‰é…ç½®ã€‚å› æ­¤æˆ‘ä»¬é€šè¿‡<code>Matery</code>çš„<code>_config.yml</code>æ¥è¿›è¡Œé…ç½®ã€‚</p><p>åœ¨æˆ‘ä»¬é…ç½®å®Œäº†ä¹‹åï¼Œåœ¨<code>generate</code>çš„è¿‡ç¨‹ä¸­ï¼Œ<code>matery</code>å°±ä¼šæ ¹æ®æˆ‘ä»¬çš„é…ç½®æ¥ç”Ÿæˆå¯¹åº”çš„æ–‡ä»¶ã€‚å¯ä»¥è¯´æ˜¯éå¸¸æ–¹ä¾¿ã€‚</p><p>ä¾‹å¦‚æˆ‘ä»¬ä¿®æ”¹åœ¨å…³äºé¡µé¢ä¸­æ˜¾ç¤ºçš„ä¸ªäººä¿¡æ¯</p><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211115023301903.png" alt="ä¿®æ”¹ä¸ªäººä¿¡æ¯"></p><p>åŒæ ·ï¼Œæˆ‘ä»¬ä¿®æ”¹ä¹‹åcleanã€genã€serveræ¥çœ‹çœ‹æ•ˆæœ</p><p>å¯ä»¥çœ‹åˆ°ï¼Œç›¸å…³ä¿¡æ¯å·²ç»è¢«ä¿®æ”¹äº†ï¼Œä¸è¿‡ç”±äºæˆ‘æ²¡æœ‰æ”¹å¤´åƒï¼Œå› æ­¤å¤´åƒæ²¡æœ‰å˜</p><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211115023432763.png" alt="ä¿®æ”¹åçš„æ•ˆæœ"></p><p>æ­¤å¤–ï¼Œç”±äºé—ªçƒä¹‹ç‹å¤§ä½¬è‰¯å¥½çš„ä»£ç é£æ ¼ï¼Œå› æ­¤åœ¨<code>Matery</code>çš„é…ç½®æ–‡ä»¶å¤¹ä¸‹ï¼Œå‡ ä¹å¯ä»¥çœ‹åˆ°æ‰€æœ‰çš„é…ç½®ä»¥åŠä¿®æ”¹æ–¹å¼~ã€‚å¤§å®¶å¯ä»¥å¤šè¯•è¯•</p><p>æ­¤å¤–ï¼Œæ¨èä¸€ä¸ªæˆ‘å‚è€ƒè¿‡çš„åšå®¢ï¼Œä»–ä¹Ÿæ˜¯åŸºäº<code>Matery</code>è¿›è¡Œäº†é…ç½®å’Œä¼˜åŒ–ï¼Œå¹¶ä¸”è‡ªå·±æ”¹äº†ä¸€äº›<code>JavaScript</code>ï¼Œä»¥å®ç°æ›´å¥½çš„æ•ˆæœï¼Œ<a href="https://m3df.xyz/2020/06/13/e9fff968/">é›¶ä¸‹ä¸‰åº¦çš„æå¯’çš„åšå®¢</a></p><p>æœ€åï¼Œæœ¬ç« åˆ°äº†è¿™é‡Œå°±ç»“æŸäº†ã€‚åœ¨æœ¬ç« æˆ‘ä»¬é¦–å…ˆè®²è§£äº†ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ç¬¬ä¸‰æ–¹çš„<code>Hexo</code>ä¸»é¢˜ï¼Œä»¥åŠä¸ºä»€ä¹ˆä½¿ç”¨<code>Matery</code>ä¸»é¢˜ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬ç»“åˆä¸¤ä¸ªæ¡ˆä¾‹è®²è§£äº†å¦‚ä½•å¯¹<code>Matery</code>ä¸»é¢˜è¿›è¡Œé…ç½®å¹¶è§£é‡Šäº†<code>Matery</code>é…ç½®çš„å·¥ä½œåŸç†ï¼Œåœ¨æ˜ç™½å·¥ä½œåŸç†ä¹‹åï¼Œå¤§å®¶å»ä¿®æ”¹è‡ªå·±çš„åšå®¢ç½‘ç«™å°±ä¼šå¾—å¿ƒåº”æ‰‹å¾ˆå¤šã€‚æœ€åæˆ‘ä»¬æä¾›äº†å…¶ä»–çš„å‚è€ƒé“¾æ¥æ¥å¸®åŠ©å¤§å®¶é…ç½®è‡ªå·±çš„åšå®¢ç½‘ç«™ã€‚</p><p>åœ¨ä¸‹ä¸€ç« ä¸­ï¼Œæˆ‘ä»¬å°†è®²è§£å¦‚ä½•ä½æˆæœ¬çš„æŠŠè‡ªå·±çš„åšå®¢éƒ¨ç½²åˆ°å…¬ç½‘ä¸Šå»ï¼Œä½¿å¾—æ‰€æœ‰äººéƒ½èƒ½å¤Ÿè®¿é—®ä½ çš„åšå®¢ã€‚</p><p>ç å­—ä¸æ˜“ï¼Œ3100å­—ï¼Œæ¬¢è¿æ‰“èµ~ï¼Œä¸€èµ·æ¨åŠ¨å¼€æºäº‹ä¸š~</p>]]></content>
      
      
      <categories>
          
          <category> Hexoåšå®¢æ­å»º </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åŸºäºHexoçš„ä¸ªäººæŠ€æœ¯åšå®¢æ­å»º â€”â€” Part 2 Hexoå¿«é€Ÿå»ºç«™ä»¥ç½‘ç«™åŸºç¡€ä¿¡æ¯é…ç½®</title>
      <link href="/2021/11/13/ji-yu-hexo-de-ge-ren-ji-zhu-bo-ke-da-jian-part-2-hexo-shi-yong-he-ji-chu-pei-zhi-md/"/>
      <url>/2021/11/13/ji-yu-hexo-de-ge-ren-ji-zhu-bo-ke-da-jian-part-2-hexo-shi-yong-he-ji-chu-pei-zhi-md/</url>
      
        <content type="html"><![CDATA[<blockquote><p>æœ¬æ–‡ä¸»è¦è®²è§£å¦‚ä½•ä½¿ç”¨Hexoå¿«é€Ÿæ­å»ºå‡ºä¸€ä¸ªåšå®¢ç½‘ç«™ï¼Œæ¥ä¸‹æ¥å¯¹<code>Hexo</code>æ­å»ºçš„åšå®¢ç½‘ç«™è¿›è¡Œä»‹ç»ï¼Œæœ€åå¯¹Hexoæ­å»ºçš„åšå®¢ç½‘ç«™è¿›è¡Œç½‘ç«™åŸºç¡€ä¿¡æ¯çš„è®¾ç½®ã€‚</p></blockquote><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211113193858319.png" alt="å¿«é€Ÿå»ºç«™æœ€ç»ˆå®ç°çš„æ•ˆæœ"></p><span id="more"></span><h1 id="åŸºäºHexoçš„ä¸ªäººæŠ€æœ¯åšå®¢æ­å»º-â€”â€”-Part-2-Hexoå¿«é€Ÿå»ºç«™ä»¥ç½‘ç«™åŸºç¡€ä¿¡æ¯é…ç½®"><a href="#åŸºäºHexoçš„ä¸ªäººæŠ€æœ¯åšå®¢æ­å»º-â€”â€”-Part-2-Hexoå¿«é€Ÿå»ºç«™ä»¥ç½‘ç«™åŸºç¡€ä¿¡æ¯é…ç½®" class="headerlink" title="åŸºäºHexoçš„ä¸ªäººæŠ€æœ¯åšå®¢æ­å»º â€”â€” Part 2 Hexoå¿«é€Ÿå»ºç«™ä»¥ç½‘ç«™åŸºç¡€ä¿¡æ¯é…ç½®"></a>åŸºäºHexoçš„ä¸ªäººæŠ€æœ¯åšå®¢æ­å»º â€”â€” Part 2 Hexoå¿«é€Ÿå»ºç«™ä»¥ç½‘ç«™åŸºç¡€ä¿¡æ¯é…ç½®</h1><p>åœ¨å‰é¢çš„ç« èŠ‚ä¸­ï¼Œæˆ‘ä»¬å·²ç»è®²è§£äº†é…ç½®<code>Hexo</code>çš„å¼€å‘ç¯å¢ƒï¼Œæœ¬èŠ‚å°†è®²è§£å¦‚ä½•ä½¿ç”¨Hexoå¿«é€Ÿå»ºç«‹è‡ªå·±çš„ä¸ªäººåšå®¢ä»¥åŠå¯¹ä¸ªäººåšå®¢è¿›è¡ŒåŸºæœ¬ä¿¡æ¯è®¾ç½®</p><h2 id="1-Hexoå¿«é€Ÿå»ºç«™"><a href="#1-Hexoå¿«é€Ÿå»ºç«™" class="headerlink" title="1. Hexoå¿«é€Ÿå»ºç«™"></a>1. Hexoå¿«é€Ÿå»ºç«™</h2><blockquote><p>å‰é¢è¯´è¿‡ï¼Œ<code>Hexo</code>æ­å»ºå¾—åˆ°çš„åšå®¢æœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œå› æ­¤<code>Hexo</code>è¿›è¡Œçš„å„ç§æ“ä½œéƒ½æ˜¯å¯¹è¿™ä¸ªæ–‡ä»¶å¤¹é‡Œçš„æ–‡ä»¶è¿›è¡Œæ“ä½œã€‚</p></blockquote><h3 id="1-åˆå§‹åŒ–åšå®¢-â€”â€”-hexo-init"><a href="#1-åˆå§‹åŒ–åšå®¢-â€”â€”-hexo-init" class="headerlink" title="1. åˆå§‹åŒ–åšå®¢ â€”â€”  hexo init"></a>1. åˆå§‹åŒ–åšå®¢ â€”â€”  <code>hexo init</code></h3><p><code>Hexo</code>æä¾›äº†initå‘½ä»¤æ¥åˆå§‹åŒ–ä¸€ä¸ªåšå®¢ï¼Œä¸ºæ­¤æˆ‘ä»¬é¦–å…ˆæ–°å»ºä¸€ä¸ªç›®å½•ç”¨æ¥å­˜æ”¾åšå®¢çš„æ‰€æœ‰æ–‡ä»¶</p><pre class="line-numbers language-bash"><code class="language-bash"><span class="token punctuation">(</span>base<span class="token punctuation">)</span> jack@jack-Alienware-m15-R3:~/project$ <span class="token function">mkdir</span> blog-test<span class="token punctuation">(</span>base<span class="token punctuation">)</span> jack@jack-Alienware-m15-R3:~/project$ hexo init blog-test/<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><blockquote><p><code>hexo init</code>æœ¬è´¨ä¸Šå°±æ˜¯å»<code>github</code>ä¸Šå…‹éš†<code>hexo starter</code>é¡¹ç›®</p></blockquote><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211113194931504.png" alt="hexo initåˆå§‹åŒ–åšå®¢çš„è¿‡ç¨‹"></p><h3 id="2-è¿è¡Œåšå®¢-â€”â€”-hexo-server"><a href="#2-è¿è¡Œåšå®¢-â€”â€”-hexo-server" class="headerlink" title="2. è¿è¡Œåšå®¢ â€”â€” hexo server"></a>2. è¿è¡Œåšå®¢ â€”â€” <code>hexo server</code></h3><p>æ¥ä¸‹æ¥ï¼Œåœ¨åšå®¢æ‰€åœ¨çš„æ–‡ä»¶å¤¹çš„æ ¹ç›®å½•ä¸‹è¿è¡Œ<code>hexo server</code>ï¼Œæ¥å¯åŠ¨<code>hexo</code>çš„æœåŠ¡ç¨‹åºï¼Œè¿™æ ·å°±å¯ä»¥æ˜¾ç¤ºå‡ºæˆ‘ä»¬çš„åšå®¢ç½‘ç«™ã€‚<code>hexo</code>é»˜è®¤æ˜¯å¸¦æœ‰ä¸€ä¸ªæ¬¢è¿ç•Œé¢çš„ï¼Œå› æ­¤å³ä¾¿æˆ‘ä»¬ä»€ä¹ˆéƒ½ä¸åšä¹Ÿå¯ä»¥æ­£å¸¸çš„è¿è¡Œ</p><pre><code>(base) jack@jack-Alienware-m15-R3:~/project$ cd blog-test/(base) jack@jack-Alienware-m15-R3:~/project/blog-test$ hexo server</code></pre><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211113195611688.png" alt="image-20211113195611688"></p><p>è¿è¡Œä¹‹åæµè§ˆå™¨ä¸­è®¿é—®è¯¥ç«¯å£å°±èƒ½å¤Ÿçœ‹åˆ°é»˜è®¤çš„ç•Œé¢ï¼Œä¸è¿‡é»˜è®¤çš„ç•Œé¢çš„é—®é¢˜è¿˜æ˜¯æ¯”è¾ƒå¤šçš„ï¼Œæ¯”å¦‚ç½‘ç«™ç”¨çš„é»˜è®¤ä¸»é¢˜å¹¶ä¸æ˜¯éå¸¸å¥½çœ‹ã€ç½‘ç«™çš„ä¿¡æ¯éƒ½ä¸æ˜¯ï¼Œåé¢æˆ‘ä»¬ä¼šæ…¢æ…¢ä¼˜åŒ–ã€‚è¿™é‡Œçœ‹åˆ°çš„æ•ˆæœå¦‚ä¸‹</p><p>å¯ä»¥çœ‹åˆ°å·¦ä¸‹è§’çš„ç‰ˆæƒä¿¡æ¯æ˜¯é»˜è®¤çš„äººåï¼Œå·¦ä¸Šè§’çš„é€‰é¡¹å¡é€‰é¡¹ä¹Ÿå¾ˆå°‘ï¼Œå³ä¾§çš„èœå•æ æ¶ˆæ¯ä¹Ÿå¾ˆå°‘ï¼Œä¸‹ä¸€æ­¥æˆ‘ä»¬å°±å°†æ…¢æ…¢æ”¹æ‰é»˜è®¤çš„ç•Œé¢</p><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211113205754034.png" alt="æœ´ç´ çš„Hexo"></p><p>ä¸ºäº†ç­‰ä¸‹è®²è§£<code>Hexo</code>çš„åŸç†ï¼Œæˆ‘ä»¬è¿™é‡Œå…ˆåˆ›å»ºä¸‰ä¸ªæ–‡ä»¶</p><pre class="line-numbers language-bash"><code class="language-bash"><span class="token punctuation">(</span>base<span class="token punctuation">)</span> jack@jack-Alienware-m15-R3:~/project/blog-test$ <span class="token function">touch</span> before_gen.txt<span class="token punctuation">(</span>base<span class="token punctuation">)</span> jack@jack-Alienware-m15-R3:~/project/blog-test$ <span class="token function">touch</span> after_gen.txt<span class="token punctuation">(</span>base<span class="token punctuation">)</span> jack@jack-Alienware-m15-R3:~/project/blog-test$ <span class="token function">touch</span> added_gen.txt<span class="token punctuation">(</span>base<span class="token punctuation">)</span> jack@jack-Alienware-m15-R3:~/project/blog-test$ tree <span class="token operator">>></span> before_gen.txt <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h3 id="3-ç”Ÿæˆåšå®¢-â€”â€”-hexo-clean-amp-hexo-generate"><a href="#3-ç”Ÿæˆåšå®¢-â€”â€”-hexo-clean-amp-hexo-generate" class="headerlink" title="3. ç”Ÿæˆåšå®¢ â€”â€” hexo clean &amp; hexo generate"></a>3. ç”Ÿæˆåšå®¢ â€”â€” <code>hexo clean</code> &amp; <code>hexo generate</code></h3><p>å‰é¢è¯´é“ï¼Œ<code>Hexo</code>çš„å·¥ä½œåŸç†æ˜¯é€šè¿‡<code>Markdown</code>å¼•æ“å°†<code>Markdown</code>æ ¼å¼çš„æ–‡æœ¬æ¸²æŸ“æˆ<code>HTML</code>ï¼Œå› æ­¤æ¯ä¸€æ¬¡æˆ‘ä»¬åœ¨å†™å®Œæ–‡ç« ä¹‹åéƒ½éœ€è¦ç”Ÿæˆä¸€ä¸‹åšæ–‡ï¼Œæ³¨æ„<code>hexo</code>æä¾›äº†ç®€å†™å‘½ä»¤ï¼Œå› æ­¤gã€genã€generateéƒ½æ˜¯å¯ä»¥çš„</p><pre><code>(base) jack@jack-Alienware-m15-R3:~/project/blog-test$ hexo gen</code></pre><p>å¯ä»¥çœ‹åˆ°ç”Ÿæˆäº†ä¸å°‘æ–‡ä»¶å†…å®¹</p><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211113215116668.png" alt="hexo genç”Ÿæˆåšæ–‡"></p><p>æœ€åè¾“å‡ºä¸€ä¸‹ç›®å½•æ–¹ä¾¿åé¢æŸ¥çœ‹hexoçš„è¿è¡ŒåŸç†</p><pre class="line-numbers language-bash"><code class="language-bash"><span class="token punctuation">(</span>base<span class="token punctuation">)</span> jack@jack-Alienware-m15-R3:~/project/blog-test$ tree <span class="token operator">>></span> after_gen.txt<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="4-æ–°åŠ ä¸€ç¯‡åšå®¢-â€”â€”-hexo-new"><a href="#4-æ–°åŠ ä¸€ç¯‡åšå®¢-â€”â€”-hexo-new" class="headerlink" title="4. æ–°åŠ ä¸€ç¯‡åšå®¢ â€”â€” hexo new"></a>4. æ–°åŠ ä¸€ç¯‡åšå®¢ â€”â€” <code>hexo new</code></h3><p>æˆ‘ä»¬è‡ªå·±æ·»åŠ åšå®¢ï¼Œéœ€è¦ä½¿ç”¨<code>hexo new æ–‡ç« å</code>ï¼Œå¦‚æœæ–‡ç« åç§°ä¸­å«æœ‰ç‰¹æ®Šå­—ç¬¦ï¼Œéœ€è¦ç”¨<code>''</code>åŒ…è£¹èµ·æ¥</p><pre class="line-numbers language-bash"><code class="language-bash"><span class="token punctuation">(</span>base<span class="token punctuation">)</span> jack@jack-Alienware-m15-R3:~/project/blog-test$ hexo new ç¬¬ä¸€ç¯‡åšæ–‡<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>æ–°æ·»åŠ çš„åšå®¢åœ¨<code>source/_posts/</code>ä¸‹ï¼Œä½¿ç”¨ç¼–è¾‘å™¨æ‰“å¼€å³å¯ï¼Œåé¢ä¼šå†™ä¸€ä¸ª<code>Typora + è…¾è®¯äº‘åºŠ</code>çš„åšå®¢ç¼–å†™ç¯å¢ƒæ•™ç¨‹ï¼ŒæŒ–ä¸ªå‘</p><pre class="line-numbers language-bash"><code class="language-bash"><span class="token punctuation">(</span>base<span class="token punctuation">)</span> jack@jack-Alienware-m15-R3:~/project/blog-test$ <span class="token keyword">echo</span> <span class="token string">"# å¤§æ ‡é¢˜"</span> <span class="token operator">>></span> source/_posts/ç¬¬ä¸€ç¯‡åšæ–‡.md <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>æ¥ä¸‹æ¥ç»§ç»­ç”Ÿæˆåšå®¢ï¼Œç„¶åæˆ‘ä»¬å¯åŠ¨serveræ¥çœ‹çœ‹æˆ‘ä»¬æ–°å†™çš„åšæ–‡ï¼Œserverçš„ç®€å†™æ˜¯s</p><p>æ³¨æ„ï¼Œåœ¨ç”Ÿæˆå‰éœ€è¦ç”¨cleanæ¸…é™¤ä¸€ä¸‹ä¸­é—´çš„æ–‡ä»¶</p><pre class="line-numbers language-bash"><code class="language-bash"><span class="token punctuation">(</span>base<span class="token punctuation">)</span> jack@jack-Alienware-m15-R3:~/project/blog-test$ hexo clean<span class="token punctuation">(</span>base<span class="token punctuation">)</span> jack@jack-Alienware-m15-R3:~/project/blog-test$ hexo gen<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211113220005285.png" alt="æ–°æ·»åŠ ä¸€ç¯‡åšæ–‡"></p><p>å¯ä»¥çœ‹åˆ°å¤šäº†ä¸€ç¯‡æ–‡ç« </p><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211113220330894.png" alt="æ·»åŠ æ–‡ç« ä¹‹åçš„ç»“æœ"></p><p>åŒæ ·ï¼Œæˆ‘ä»¬è®°å½•ä¸€ä¸‹ï¼Œæ–¹ä¾¿åé¢è®²è§£åŸç†</p><pre class="line-numbers language-bash"><code class="language-bash"><span class="token punctuation">(</span>base<span class="token punctuation">)</span> jack@jack-Alienware-m15-R3:~/project/blog-test$ tree <span class="token operator">>></span> added_gen.txt <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ä»¥ä¸Šå°±æ˜¯å…³äº<code>Hexo</code>çš„ä¸€äº›åŸºç¡€å‘½ä»¤ä½¿ç”¨</p><h2 id="2-Hexoçš„è¿è¡ŒåŸç†"><a href="#2-Hexoçš„è¿è¡ŒåŸç†" class="headerlink" title="2. Hexoçš„è¿è¡ŒåŸç†"></a>2. Hexoçš„è¿è¡ŒåŸç†</h2><h3 id="1-Hexoçš„ç›®å½•ç»“æ„"><a href="#1-Hexoçš„ç›®å½•ç»“æ„" class="headerlink" title="1. Hexoçš„ç›®å½•ç»“æ„"></a>1. Hexoçš„ç›®å½•ç»“æ„</h3><p>æˆ‘ä»¬é€šè¿‡<code>tree</code>å‘½ä»¤æ¥æŸ¥çœ‹</p><pre class="line-numbers language-bash"><code class="language-bash"><span class="token punctuation">(</span>base<span class="token punctuation">)</span> jack@jack-Alienware-m15-R3:~/project/blog-test$ tree -L 1<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å…¶ä¸­ï¼Œæ¯ä¸ªæ–‡ä»¶/æ–‡ä»¶å¤¹çš„ä½œç”¨ä¸ºï¼š</p><ul><li><code>_config.yml</code>ï¼šç½‘ç«™çš„<strong>åŸºç¡€é…ç½®</strong>ä¿¡æ¯ï¼Œå¯ä»¥åœ¨è¿™é‡Œé…ç½®ç½‘ç«™çš„ä¸€äº›åŸºæœ¬å‚æ•°ï¼Œä¾‹å¦‚ä½œè€…ç­‰ç­‰ã€‚<strong>ä¹‹æ‰€ä»¥æ˜¯åŸºç¡€é…ç½®ä¿¡æ¯ï¼Œæ˜¯å› ä¸ºä½¿ç”¨ä¸åŒçš„ä¸»é¢˜å°†ä¼šåœ¨æå¤§ç¨‹åº¦ä¸Šä¿®æ”¹ã€è¦†ç›–è¿™é‡Œçš„é…ç½®ä¿¡æ¯</strong>ã€‚</li><li><code>package.json</code>ï¼šHexoç”Ÿæˆç½‘é¡µã€è¿è¡ŒæœåŠ¡å™¨ç­‰çš„åº”ç”¨ç¨‹åºä¿¡æ¯ã€‚<code>EJS</code>, <code>Stylus</code> å’Œ <code>Markdown renderer</code> å·²é»˜è®¤å®‰è£…ï¼Œå¯ä»¥ç”±æˆ‘ä»¬è‡ªç”±ç§»é™¤ã€‚</li><li><code>scaffolds</code>ï¼šæ¨¡ç‰ˆæ–‡ä»¶å¤¹ã€‚å½“æ‚¨ç”Ÿæˆã€æ–°å»ºæ–‡ç« æ—¶ï¼Œ<code>Hexo</code> ä¼šæ ¹æ® <code>scaffold</code> æ¥å»ºç«‹æ–‡ä»¶ã€‚<strong>ä¸å»ºè®®ä¿®æ”¹</strong></li><li><code>source</code>ï¼šèµ„æºæ–‡ä»¶å¤¹æ˜¯å­˜æ”¾ç”¨æˆ·èµ„æºçš„åœ°æ–¹ã€‚é™¤ <code>_posts</code> æ–‡ä»¶å¤¹ä¹‹å¤–ï¼Œå¼€å¤´å‘½åä¸º <code>_</code> (ä¸‹åˆ’çº¿)çš„æ–‡ä»¶ / æ–‡ä»¶å¤¹å’Œéšè—çš„æ–‡ä»¶å°†ä¼šè¢«å¿½ç•¥ã€‚<code>Markdown</code> å’Œ <code>HTML</code> æ–‡ä»¶ä¼šè¢«è§£æå¹¶æ”¾åˆ° <code>public</code> æ–‡ä»¶å¤¹ï¼Œè€Œå…¶ä»–æ–‡ä»¶ä¼šè¢«æ‹·è´è¿‡å»ã€‚</li><li><code>themes</code>ï¼šä¸»é¢˜æ–‡ä»¶å¤¹ã€‚<code>Hexo</code> ä¼šæ ¹æ®ä¸»é¢˜æ¥ç”Ÿæˆé™æ€é¡µé¢ã€‚</li></ul><p>è¿™äº›æ–‡ä»¶ã€æ–‡ä»¶å¤¹ä¸­å¯¹æˆ‘ä»¬è€Œè¨€æœ€é‡è¦çš„å°±æ˜¯<code>_config.yml</code>ã€<code>themes</code>ã€<code>source</code>è¿™ä¸‰ä¸ªï¼Œå…¶ä»–çš„å…¶å®ä¸€èˆ¬æˆ‘ä»¬ç”¨ä¸åˆ°ä¹Ÿä¸éœ€è¦æ”¹</p><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211114095916621.png" alt="Hexoåšå®¢çš„æ¶æ„"></p><h3 id="2-Hexoæ˜¯å¦‚ä½•ç”Ÿæˆå’Œå‘å¸ƒçš„åšæ–‡"><a href="#2-Hexoæ˜¯å¦‚ä½•ç”Ÿæˆå’Œå‘å¸ƒçš„åšæ–‡" class="headerlink" title="2. Hexoæ˜¯å¦‚ä½•ç”Ÿæˆå’Œå‘å¸ƒçš„åšæ–‡"></a>2. Hexoæ˜¯å¦‚ä½•ç”Ÿæˆå’Œå‘å¸ƒçš„åšæ–‡</h3><p>ä¸Šé¢ä»æ•´ä½“ä¸Šä»‹ç»äº†<code>Hexo</code>çš„ç›®å½•ç»“æ„ã€‚ä¸‹é¢æˆ‘ä»¬å°†æ·±å…¥äº†è§£ä¸€ä¸‹<code>Hexo</code>ç”Ÿæˆåšæ–‡çš„åŸç†ã€‚</p><p>æˆ‘ä»¬ä¸Šé¢ä½¿ç”¨treeç”Ÿæˆäº†ä¸‰æ¬¡ç›®å½•ç»“æ„ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬æŸ¥çœ‹ä¸‹ç”Ÿæˆåšæ–‡å’Œæ·»åŠ åšæ–‡ä¹‹ååšå®¢é¡¹ç›®çš„å˜åŒ–ï¼Œä½¿ç”¨<code>vim -d</code>æ¯”è¾ƒä¸‹ä¸‰ä¸ªæ–‡ä»¶çš„å†…å®¹</p><pre class="line-numbers language-bash"><code class="language-bash"><span class="token punctuation">(</span>base<span class="token punctuation">)</span> jack@jack-Alienware-m15-R3:~/project/blog-test$ vim -d before_gen.txt after_gen.txt added_gen.txt <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬ç¼–å†™çš„åšå®¢éƒ½è¢«æ·»åŠ åˆ°äº†<code>source/_posts</code>æ–‡ä»¶å¤¹ä¸‹ï¼Œè€Œæˆ‘ä»¬è¿è¡Œ<code>hexo generate</code>åç”Ÿæˆçš„é™æ€åšæ–‡ç½‘é¡µèµ„æºå°±éƒ½æ”¾åœ¨<code>public</code>æ–‡ä»¶å¤¹ä¸‹ï¼Œå…·ä½“æ¥è¯´ï¼Œæ–‡ç« æ”¾åœ¨ä»¥æ—¥æœŸä¸ºåçš„ç³»åˆ—æ–‡ä»¶å¤¹ä¸‹ï¼Œ<code>CSS</code>ç­‰èµ„æºæ–‡ä»¶åˆ™æ˜¯å•ç‹¬æ”¾ç½®</p><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211113223040926.png" alt="hexo newã€addä¹‹åæ–‡ä»¶ç›®å½•çš„å˜åŒ–"></p><h3 id="3-Hexoæ˜¯å¦‚ä½•ç®¡ç†ä¸»é¢˜çš„"><a href="#3-Hexoæ˜¯å¦‚ä½•ç®¡ç†ä¸»é¢˜çš„" class="headerlink" title="3. Hexoæ˜¯å¦‚ä½•ç®¡ç†ä¸»é¢˜çš„"></a>3. Hexoæ˜¯å¦‚ä½•ç®¡ç†ä¸»é¢˜çš„</h3><p>ä¸‹é¢æˆ‘ä»¬é€šè¿‡æˆ‘å½“å‰çš„è¿™ä¸ªåšå®¢æ¥äº†è§£ä¸‹<code>Hexo</code>æ˜¯å¦‚ä½•ç®¡ç†ä¸»é¢˜çš„ï¼Œä»¥åŠä¸»é¢˜æ˜¯å¦‚ä½•å·¥ä½œçš„</p><pre class="line-numbers language-bash"><code class="language-bash"><span class="token punctuation">(</span>base<span class="token punctuation">)</span> jack@jack-Alienware-m15-R3:~/project/hexo-blogs$ tree themes/  -L 3<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å¯ä»¥çœ‹åˆ°ï¼Œ<code>theme</code>æ–‡ä»¶å¤¹ä¸‹ï¼Œä¸€ä¸ªæ–‡ä»¶å¤¹å°±æ˜¯ä¸€ä¸ªä¸»é¢˜ã€‚ä¸€ä¸ªä¸»é¢˜å†…éƒ¨åˆæœ‰å…¶è‡ªèº«çš„ç»“æ„ï¼Œä¸åŒçš„ç›®å½•æœ‰ä¸åŒçš„ä½œç”¨ã€‚ä¾‹å¦‚<code>language</code>è´Ÿè´£ä¸åŒè¯­è¨€çš„åšæ–‡çš„è®¾ç½®ï¼Œ<code>source</code>åˆ™å­˜æ”¾ä¸»é¢˜çš„<code>css</code>ã€<code>js</code>ç­‰èµ„æºæ–‡ä»¶ï¼Œ<code>_config.yml</code>åˆ™è´Ÿè´£ä¸»é¢˜çš„é…ç½®ã€‚</p><p><strong>å› æ­¤åœ¨åç»­æˆ‘ä»¬ç¾åŒ–ã€æ·±åº¦å®šåˆ¶Hexoæ—¶å€™å°±æ˜¯ä¿®æ”¹ä¸‹è½½å¥½çš„ä¸»é¢˜</strong></p><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211114021748798.png" alt="Hexoçš„ä¸»é¢˜ç›®å½•"></p><h2 id="3-Hexo-åŸºç¡€ä¿¡æ¯é…ç½®"><a href="#3-Hexo-åŸºç¡€ä¿¡æ¯é…ç½®" class="headerlink" title="3. Hexo åŸºç¡€ä¿¡æ¯é…ç½®"></a>3. Hexo åŸºç¡€ä¿¡æ¯é…ç½®</h2><p>å‰é¢æˆ‘ä»¬è®²åˆ°ï¼Œ<code>Hexo</code>è‡ªèº«çš„<code>_config.yml</code>è™½ç„¶è´Ÿè´£æ•´ä¸ªé¡¹ç›®çš„é…ç½®ï¼Œä½†æ˜¯é€šå¸¸ä¼šè¢«æˆ‘ä»¬è‡ªå·±ä¸‹è½½çš„ä¸»é¢˜çš„<code>_config.yml</code>æ‰€è¦†ç›–ï¼Œå› æ­¤æˆ‘ä»¬åªåœ¨Hexoçš„<code>_config.yml</code>ä¸­è¿›è¡Œä¸€äº›åŸºç¡€ä¿¡æ¯çš„é…ç½®ï¼Œä»¥ä¾¿äºæˆ‘ä»¬ä¸ºæˆ‘ä»¬çš„åšå®¢æ‰“ä¸Šè‡ªå·±çš„ä¿¡æ¯ã€‚</p><p>é¦–å…ˆé€šè¿‡<code>vim</code>æˆ–è€…å…¶ä»–ç¼–è¾‘å™¨æ‰“å¼€æ ¹ç›®å½•ä¸‹çš„<code>_config.yml</code></p><pre class="line-numbers language-bash"><code class="language-bash"><span class="token punctuation">(</span>base<span class="token punctuation">)</span> jack@jack-Alienware-m15-R3:~/project/blog-test$ vim _config.yml <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211114022512202.png" alt="Hexo æ ¹ç›®å½•ä¸‹çš„é…ç½®æ–‡ä»¶"></p><h3 id="1-ä¸ªäººä¿¡æ¯è®¾ç½®"><a href="#1-ä¸ªäººä¿¡æ¯è®¾ç½®" class="headerlink" title="1. ä¸ªäººä¿¡æ¯è®¾ç½®"></a>1. ä¸ªäººä¿¡æ¯è®¾ç½®</h3><p>æˆ‘ä»¬åªéœ€è¦ä¿®æ”¹ <code># Site</code>ä¸­çš„ä¿¡æ¯å³å¯ï¼Œè¿™æ ·å°†ç½‘ç«™çš„é»˜è®¤ä¿¡æ¯æ”¹ä¸ºæˆ‘ä»¬è‡ªå·±çš„ä¿¡æ¯</p><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211114023546668.png" alt="ä¿®æ”¹åçš„ä¸ªäººä¿¡æ¯"></p><h3 id="2-URLä¿®æ”¹"><a href="#2-URLä¿®æ”¹" class="headerlink" title="2. URLä¿®æ”¹"></a>2. URLä¿®æ”¹</h3><p>æ³¨æ„ï¼Œ<code># URL</code>ä¸‹çš„å†…å®¹ä¿®æ”¹åˆ™åœ¨æœªæ¥å°†ä¼šåœ¨åˆ«äººä»æˆ‘ä»¬çš„ç½‘ç«™ä¸­å¤åˆ¶å†…å®¹ä¹‹åä½œä¸ºåç»­çš„å†…å®¹æé†’ç‰ˆæƒï¼Œæ­¤å¤–ä¹Ÿä¼šåœ¨æ–‡ç« åº•éƒ¨è¯´æ˜ç‰ˆæƒã€‚</p><p>æˆ‘ä»¬æš‚æ—¶å…ˆä¸åšè¿™ä¸ªä¿®æ”¹ï¼Œç­‰åç»­åšå®¢ä¸Šçº¿ã€å…·æœ‰å…·ä½“çš„åŸŸå/ç½‘å€åå†è¿›è¡Œä¿®æ”¹ã€‚</p><p>è¿›è¡Œå®Œä¸Šé¢æ‰€æœ‰çš„é…ç½®ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥æŸ¥çœ‹æœ€ç»ˆçš„æ•ˆæœäº†ï¼Œæˆ‘ä»¬å¼€å¯ä¸‹serveræŸ¥çœ‹æ•ˆæœ</p><p>å¯ä»¥çœ‹åˆ°é¦–é¡µçš„æ–‡å­—å’Œé¡µè„šçš„ä¿¡æ¯å·²ç»æ”¹æ‰äº†ï¼Œå½“ç„¶ï¼Œæ¯ç¯‡æ–‡ç« é‡Œä½œè€…çš„ä¿¡æ¯ä¹Ÿå·²ç»æ”¹å˜äº†ã€‚</p><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211114023717905.png" alt="ä¿®æ”¹åçš„é¦–é¡µ"></p><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211114023757242.png" alt="ä¿®æ”¹åçš„é¡µè„šä¿¡æ¯"></p><p>è‡³æ­¤ï¼Œæœ¬ç« å°±å·²ç»ç»“æŸäº†ã€‚æœ¬ç« æˆ‘ä»¬é¦–å…ˆè®²è§£äº†<code>Hexo</code>çš„åŸºç¡€å‘½ä»¤ï¼Œç„¶åç ”ç©¶äº†<code>Hexo</code>çš„ç›®å½•ç»“æ„å’Œå·¥ä½œåŸç†ï¼Œæ–¹ä¾¿æˆ‘ä»¬åç»­ä¿®æ”¹ï¼Œæœ€åæˆ‘ä»¬å¯¹ç½‘ç«™çš„åŸºç¡€ä¿¡æ¯åšäº†ä¿®æ”¹ï¼Œæ›´å¤šçš„ç½‘ç«™å†…å®¹å’Œä¿¡æ¯çš„è®¾ç½®è¯¦è§ä¸‹ä¸€ç« ~</p><p>ç å­—ä¸æ˜“ï¼Œ2200å¤šå­—ï¼Œæ¬¢è¿æ‰“èµ~ï¼Œä¸€èµ·æ¨åŠ¨å¼€æºäº‹ä¸šè¿›æ­¥~</p>]]></content>
      
      
      <categories>
          
          <category> Hexoåšå®¢æ­å»º </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åŸºäºHexoçš„ä¸ªäººæŠ€æœ¯åšå®¢æ­å»º-Part 1 Hexoä»‹ç»ä»¥åŠç¯å¢ƒæ­å»º</title>
      <link href="/2021/11/13/ji-yu-hexo-de-ge-ren-ji-zhu-bo-ke-da-jian-part-1-hexo-jie-shao-yi-ji-huan-jing-da-jian-md/"/>
      <url>/2021/11/13/ji-yu-hexo-de-ge-ren-ji-zhu-bo-ke-da-jian-part-1-hexo-jie-shao-yi-ji-huan-jing-da-jian-md/</url>
      
        <content type="html"><![CDATA[<blockquote><p>æœ¬æ–‡ä¸»è¦ä»‹ç»ä»€ä¹ˆæ˜¯Hexoï¼Œä¸ºä»€ä¹ˆæˆ‘ä»¬è¦ä½¿ç”¨Hexoæ­å»ºæˆ‘ä»¬çš„åšå®¢ä»¥åŠHexoç¯å¢ƒæ­å»º</p></blockquote><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211113024418805.png" alt="Hexoå®˜ç½‘"></p><span id="more"></span><h1 id="åŸºäºHexoçš„ä¸ªäººæŠ€æœ¯åšå®¢æ­å»º-Part-1-Hexoä»‹ç»ä»¥åŠç¯å¢ƒæ­å»º-md"><a href="#åŸºäºHexoçš„ä¸ªäººæŠ€æœ¯åšå®¢æ­å»º-Part-1-Hexoä»‹ç»ä»¥åŠç¯å¢ƒæ­å»º-md" class="headerlink" title="åŸºäºHexoçš„ä¸ªäººæŠ€æœ¯åšå®¢æ­å»º-Part 1 Hexoä»‹ç»ä»¥åŠç¯å¢ƒæ­å»º.md"></a>åŸºäºHexoçš„ä¸ªäººæŠ€æœ¯åšå®¢æ­å»º-Part 1 Hexoä»‹ç»ä»¥åŠç¯å¢ƒæ­å»º.md</h1><p>åœ¨å‰ä¸€ç« æ¦‚è¿°ä¸­ï¼Œæˆ‘ä»¬è®²è§£äº†ä¸ºä»€ä¹ˆæˆ‘è®¤ä¸ºä¸€ä¸ªGeekéœ€è¦ä¸€ä¸ªä¸ªäººæŠ€æœ¯åšå®¢ï¼Œå¹¶ä¸”ç®€å•çš„å±•ç¤ºäº†æœ€ç»ˆæ•ˆæœï¼Œåœ¨æ¥ä¸‹æ¥çš„ç« èŠ‚é‡Œï¼Œæˆ‘å°†ä¸€æ­¥æ­¥çš„ä»‹ç»å¦‚ä½•æ‰“é€ è¿™æ ·çš„æ•ˆæœã€‚</p><h2 id="1-What-is-Hexo"><a href="#1-What-is-Hexo" class="headerlink" title="1. What is Hexo"></a>1. What is Hexo</h2><blockquote><p>ç­‰ç­‰ï¼Œä»€ä¹ˆæ˜¯<code>Hexo</code>ï¼Ÿ</p></blockquote><p>åœ¨å¼€å§‹å­¦ä¹ å‰ï¼Œæˆ‘ä»¬éœ€è¦<strong>é¦–å…ˆ</strong>çŸ¥é“æˆ‘ä»¬å°†è¦å­¦çš„ä¸œè¥¿æ˜¯ä»€ä¹ˆä»¥åŠå­¦ä¹ å®ƒèƒ½å¸¦æ¥çš„å¥½å¤„ï¼ˆä¸ºä»€ä¹ˆè¦å­¦ä»–ï¼‰ï¼Œè¿™æ ·æˆ‘ä»¬å­¦èµ·æ¥ä¼šè½»æ¾å¾ˆå¤šã€‚å› ä¸ºè¿™æ ·åšæˆ‘ä»¬é¦–å…ˆå¯¹éœ€è¦å­¦çš„ä¸œè¥¿æ­å»ºäº†ä¸€ä¸ªå¤§çš„æ¡†æ¶ï¼Œåç»­çš„å­¦ä¹ éƒ½æ˜¯åœ¨å¡«å……å®ƒï¼Œä¸æ–­ä¸°æ»¡è¿™ä¸ªæ¡†æ¶ï¼Œå¹¶ä¸”ä¹Ÿæœ‰äº†å……è¶³çš„åŠ¨åŠ›å»å­¦ä¹ ã€‚</p><ul><li>æ­£å¦‚<code>Hexo</code>å®˜ç½‘ä¸Šæ‰€è¯´ï¼š<strong>Hexoæ˜¯ä¸€ä¸ªå¿«é€Ÿã€ç®€æ´ä¸”é«˜æ•ˆçš„åšå®¢æ¡†æ¶</strong>ã€‚ï¼ˆ<del>è™½ç„¶è¿™ä¸ªå®˜ç½‘å……æ»¡äº†ä¸å°‘å¹¿å‘Š</del>ï¼‰</li></ul><p>æ‰€è°“æ¡†æ¶ï¼Œå³æŒ‡å·²ç»ä¸ºæˆ‘ä»¬æ„å»ºäº†åŸºæœ¬çš„åšå®¢å·¥å…·å’Œåšå®¢ç»“æ„ï¼ˆæ¡†æ¶ï¼‰ï¼Œæˆ‘ä»¬åç»­åªéœ€è¦åœ¨è¿™ä¸ªæ¡†æ¶ä¸Šä¸æ–­çš„å¡«å……ï¼ˆå‘å¸ƒè‡ªå·±çš„æ–‡ç« ï¼‰ã€ä¿®æ”¹ï¼ˆä¿®æ”¹<code>Hexo</code>çš„ä»£ç ï¼‰ã€‚å› ä¸º<code>Hexo</code>å¼€æºï¼Œå› æ­¤æˆ‘ä»¬å®é™…ä¸Šå¯ä»¥é’ˆå¯¹<code>Hexo</code>è¿›è¡Œä»»æ„ç¨‹åº¦çš„è‡ªå®šä¹‰ä¿®æ”¹ï¼Œåªæœ‰ä½ æƒ³ä¸åˆ°ï¼Œæ²¡æœ‰ä½ æ”¹ä¸äº†ã€‚éå¸¸åº†å¹¸çš„æ˜¯ï¼Œ<code>Hexo</code>çš„ä½œè€…æ˜¯å°æ¹¾äººï¼Œå› æ­¤ä»–çš„å®˜æ–¹æ–‡æ¡£çš„ä¸­æ–‡æ”¯æŒæ˜¯éå¸¸å¥½çš„ï¼Œè¿™ä¹Ÿä¸ºæˆ‘ä»¬ä½¿ç”¨<code>Hexo</code>æä¾›äº†ä¾¿åˆ©ã€‚</p><ol><li><code>Hexo</code>æ˜¯åŸºäº<code>Node.js</code>å¼€å‘çš„åº”ç”¨ï¼ˆå› æ­¤æˆ‘ä»¬ç¨ååœ¨å®‰è£…çš„æ—¶å€™ä¼šå®‰è£…<code>Node.js</code>çš„ç¯å¢ƒï¼‰ã€‚å€ŸåŠ©äº<code>Node.js</code>ï¼Œ<code>Hexo</code>å¯ä»¥å¿«é€Ÿçš„æ¸²æŸ“å‡ºæ¼‚äº®çš„æ–‡ç« </li></ol><blockquote><p><strong>ä»€ä¹ˆæ˜¯<code>Node.js</code></strong></p><p>è¯´æ¸…è¿™ä¸ªé—®é¢˜ï¼Œè¦è¯´çš„å¯ä¸å°‘ã€‚æ¥è§¦è¿‡ç½‘ç»œçš„äººéƒ½åº”è¯¥çŸ¥é“ï¼Œå‰ç«¯é¡µé¢æ˜¯ç”±<code>HTML</code>ã€<code>CSS</code>ã€<code>JavaScript</code>ä¸‰å¤§æŠ€æœ¯/ä¸‰ä»¶å¥—æ”¯æŒçš„ï¼Œå…¶ä¸­<code>HTML</code>è´Ÿè´£å®šä¹‰ç½‘é¡µæ”¹åœ¨å“ªä¸ªåœ°æ–¹æ˜¾ç¤ºä»€ä¹ˆå†…å®¹ï¼Œ<code>CSS</code>å®šä¹‰å“ªä¸ªåœ°æ–¹çš„å“ªä¸ªå†…å®¹è¯¥ä»¥ä»€ä¹ˆæ ·çš„æ–¹å¼æ˜¾ç¤ºï¼Œ<code>JavaScript</code>åˆ™å®šä¹‰å½“ä½ ä¸è¿™ä¸ªå†…å®¹äº¤äº’çš„æ—¶å€™ä¼šæœ‰ä»€ä¹ˆæ ·çš„æ•ˆæœã€‚</p><p>ä¸¾ä¸ªç®€å•ä¾‹å­ï¼Œåœ¨<a href="https://www.baidu.com/">ç™¾åº¦</a>çš„é¦–é¡µï¼Œ</p><ol><li>ä¸ºä»€ä¹ˆç™¾åº¦çš„Logoä¼šæ˜¾ç¤ºåœ¨ä¸­é—´ï¼Œè€Œå¤‡æ¡ˆç­‰ç½‘ç«™ä¿¡æ¯æ˜¾ç¤ºåœ¨åº•éƒ¨ï¼Ÿâ€“&gt; <code>HTML</code></li><li>ä¸ºä»€ä¹ˆç™¾åº¦çš„èƒŒæ™¯æ˜¯ç™½è‰²çš„ï¼Œè€Œä¸æ˜¯é»‘è‰²ï¼Ÿ  â€“&gt; <code>CSS</code></li><li>ä¸ºä»€ä¹ˆé¼ æ ‡æ‚¬åœåœ¨å·¦ä¸Šè§’çš„æ›´å¤šçš„æ—¶å€™ä¼šå¼¹å‡ºæ¥æµ®çª—ï¼Ÿ  â€“&gt; <code>JavaScript</code></li></ol><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211113031023828.png" alt="ç™¾åº¦çš„é¦–é¡µ"></p><p>æ­£æ˜¯å› ä¸ºæœ‰äº†è¿™ä¸‰ä»¶å¥—ï¼Œæˆ‘ä»¬çš„ç½‘é¡µå˜å¾—å¤šå§¿å¤šå½©äº†èµ·æ¥ï¼Œæœ‰æœ‰ä»·å€¼çš„ä¿¡æ¯(<code>HTML</code>)ã€æ¼‚äº®çš„é¡µé¢(<code>CSS</code>)å’Œå‹å¥½çš„äº¤äº’(<code>JavaScript</code>)ã€‚</p><p>ç„¶è€Œï¼Œæ¸æ¸åœ°ï¼Œ<strong>æœ¬æ¥åœ°ä½å¹³ç­‰çš„ä¸‰ä»¶å¥—é€æ¸å¼€å§‹å‡ºç°åŒºåˆ«</strong>ã€‚<code>HTML</code>å’Œ<code>CSS</code>éƒ½æ˜¯é™æ€çš„ï¼Œåœ¨ç¼–å†™ç»“æŸä¹‹åç”¨æˆ·èƒ½çœ‹åˆ°çš„å†…å®¹å°±å·²ç»å›ºå®šï¼ˆå…³äºæ¨¡æ¿ç¨åå†è¯´ï¼‰ï¼Œå½“ç”¨æˆ·è®¿é—®è¿™ä¸ªç½‘é¡µï¼Œçœ‹åˆ°çš„å°±æ˜¯å…¶ä¸­çš„å†…å®¹ï¼›ç„¶è€Œ<code>JavaScript</code>å´ç”±äºéœ€è¦å¤„ç†çš„ç”¨æˆ·çš„æ“ä½œä¸åŒè€Œåšä¸åŒçš„å¤„ç†ï¼Œä¾‹å¦‚åœ¨ç™¾åº¦çš„é¡µé¢ä¸­ï¼Œå¦‚æœæˆ‘ä¸æ˜¯æ‚¬æµ®è€Œæ˜¯å³å‡»æ€ä¹ˆåŠï¼Ÿå¦‚æœæˆ‘ä¸æ˜¯æ‚¬æµ®è€Œæ˜¯æ è¿‡æ€ä¹ˆåŠï¼Ÿæ­£æ˜¯ç”±äºéœ€è¦å¤„ç†è¯¸å¤šç”¨æˆ·å¯¼è‡´çš„å¤šç§å¤šæ ·çš„Eventï¼Œ<code>JavaScript</code>ä¹Ÿå…·æœ‰äº†if-elseç­‰ç¼–ç¨‹è¯­è¨€å¸¸è§çš„è¯­å¥ã€‚<strong>æ¸æ¸åœ°ï¼Œéšç€æŠ€æœ¯çš„è¿›æ­¥ï¼ŒJavaScriptéœ€è¦å¤„ç†çš„é—®é¢˜è¶Šæ¥è¶Šå¤šï¼Œåœ¨å…¶èƒ½åŠ›å˜å¼ºçš„åŒæ—¶ï¼ŒJavaScriptä¹Ÿå˜å¾—è¶Šæ¥è¶Šåƒä¸€é—¨ç¼–ç¨‹è¯­è¨€</strong>ã€‚</p><p>ç„¶è€Œï¼Œè¿™ä¸ªæ—¶å€™çš„<code>JavaScript</code>è¿˜å¹¶ä¸èƒ½ç‹¬å½“ä¸€é¢ã€‚å› ä¸ºåœ¨æœ€æ—©çš„ç½‘é¡µä¸­ï¼Œ<code>JavaScript</code>ã€<code>HTML</code>ã€<code>CSS</code>æ˜¯ç»‘å®šçš„ä¸‰ä»¶å¥—ï¼Œå½“ç”¨æˆ·è®¿é—®æŸä¸ªç½‘é¡µï¼ŒæœåŠ¡å™¨ä¼šå°†è¯¥ç½‘é¡µçš„ä¸‰ä»¶å¥—å‘é€ç»™ç”¨æˆ·ï¼Œç„¶åç”±<strong>ç”¨æˆ·çš„æµè§ˆå™¨è§£æã€æ¸²æŸ“ã€æ‰§è¡ŒHTMLã€CSSã€JavaScriptä¸‰ä»¶å¥—</strong>ï¼Œä»è€Œæ˜¾ç¤ºç½‘é¡µã€‚å› æ­¤è¿™ä¸ªæ—¶å€™çš„<code>JavaScript</code>æ˜¯æ— æ³•è„±ç¦»æµè§ˆå™¨çš„ã€‚æˆ‘ä»¬ä»å¦ä¸€ä¸ªè§’åº¦è€ƒè™‘ï¼Œç”±äºJavaScriptæ˜¯ç”±æµè§ˆå™¨è§£ææ‰§è¡Œçš„ï¼Œå› æ­¤å…¶å¯ä»¥çœ‹åšæ˜¯ä¸€é—¨è§£é‡Šæ€§è¯­è¨€ï¼Œåœ¨æ‰§è¡Œ<code>JavaScript</code>çš„æ—¶å€™ï¼ŒCPUæ‰§è¡Œçš„æœºå™¨ç æ¥è‡ªäºå…¶<code>è§£é‡Šå™¨</code>â€”â€”æµè§ˆå™¨ã€‚</p><p>åæ¥éšç€ï¼Œ<code>JavaScript</code>çš„åŠŸèƒ½è¶Šæ¥è¶Šå¼ºå¤§ï¼Œç®€å•çš„åœ¨ç½‘é¡µä¸­è¿›è¡Œäº¤äº’å·²ç»å®Œå…¨å‘æŒ¥å…¶èƒ½åŠ›äº†ã€‚å› æ­¤å°±å‡ºç°äº†è¯¸å¤šé¡¹ç›®ï¼Œè¿™äº›é¡¹ç›®ç‹¬ç«‹äºä¼ ç»Ÿæµè§ˆå™¨ï¼ŒåŸºäºæµè§ˆå™¨çš„<code>JavaScript</code>è§£æå™¨å†…æ ¸ï¼ˆå­¦åï¼šå¼•æ“ï¼‰äº¦æˆ–æ˜¯è‡ªå·±ç¼–å†™äº†<code>JavaScript</code>çš„è§£æå™¨æ¥æ‰§è¡Œ<code>JavaScript</code>ã€‚è‡³æ­¤ï¼Œ<code>JavaScript</code>å·²ç»èƒ½å¤Ÿç‹¬ç«‹äºæµè§ˆå™¨è¢«å•ç‹¬æ‰§è¡Œäº†ï¼Œè€Œéå¿…é¡»åœ¨æµè§ˆå™¨ä¸­ä»¥ç½‘é¡µçš„å½¢å¼æ‰“å¼€ã€‚</p><p>åœ¨å‰é¢ä»‹ç»äº†é‚£ä¹ˆå¤šä¹‹åï¼Œç»ˆäºï¼Œåˆ°äº†æˆ‘ä»¬çš„ä¸»è§’ï¼Œ<code>Node.js</code>ã€‚å¤§åé¼é¼çš„<code>Node.js</code>å…¶å®å°±æ˜¯åŸºäº<code>Chrome V8</code> å¼•æ“çš„ <code>JavaScript</code> è¿è¡Œæ—¶ç¯å¢ƒã€‚ç®€å•çš„æ¥è¯´ï¼Œå®ƒèƒ½å¤Ÿåˆ©ç”¨<code>Chrome V8</code>å¼•æ“æ¥è§£æã€æ‰§è¡Œ<code>JavaScript</code>ã€‚<code>Node.js</code>å¯ä»¥ç²—æš´çš„ç†è§£æˆ<code>JavaScript</code>çš„è§£é‡Šå™¨ã€‚åŸºäºæ­¤ï¼Œ<code>JavaScript</code>åœ¨å¾ˆå¤šæ–¹é¢éƒ½å¾ˆåƒ<code>Python</code>ï¼ŒåŒ…æ‹¬åŒ…ç®¡ç†å™¨ã€è§£é‡Šå™¨ç­‰ç­‰</p></blockquote><ol start="2"><li><code>Hexo</code>åˆ©ç”¨<code>Markdown</code>æ¥ä½œä¸ºæºæ–‡ç« ï¼Œå…¶å†…ç½®<code>Markdown</code>çš„æ¸²æŸ“å¼•æ“ï¼Œæˆ‘ä»¬åªéœ€è¦ä¹¦å†™Markdownï¼Œè€Œåé€šè¿‡<code>Hexo</code>å°±èƒ½å¤Ÿç”Ÿæˆ<code>HTML</code>ç­‰å‰ç«¯æ–‡ä»¶ï¼Œéå¸¸æ–¹ä¾¿</li></ol><blockquote><p>æ­£å¦‚ä¸‹é¢è¿™å¼ å›¾ï¼Œè¿™ç¯‡æ–‡ç« ä¹Ÿæ˜¯æˆ‘ç”¨Markdownå†™å‡ºæ¥çš„ï¼Œåœ¨åç»­éƒ¨åˆ†é™¤äº†ç½‘ç«™æ­å»ºä»¥å¤–ï¼Œè¿˜ä¼šè®²è®²å¦‚ä½•æ­å»ºå†™ä½œç¯å¢ƒï¼Œä»¥å®ç°ç•…å¿«å†™ä½œ</p><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211113110048831.png" alt="æˆ‘çš„Markdownå†™ä½œç¯å¢ƒï¼šTypora+è…¾è®¯äº‘å›¾åºŠ+Draculaä¸»é¢˜"></p></blockquote><ol start="3"><li>Hexoæ­å»ºå‡ºçš„åšå®¢ç½‘ç«™æ˜¯ä¸€ä¸ªé™æ€ç½‘ç«™ï¼Œè¿™å°±æ„å‘³ç€å•çº¯<code>Hexo</code>æœ¬èº«åªèƒ½æä¾›åšå®¢çš„æ˜¾ç¤ºã€æœ‰é™çš„äº¤äº’ï¼Œå¦‚æœéœ€è¦ç™»å½•ã€å‘è¡¨è¯„è®ºè¿™ç±»éœ€è¦åç«¯ç¨‹åºæ”¯æŒçš„è¿ç”¨ï¼Œå°±éœ€è¦ç¬¬ä¸‰æ–¹æ’ä»¶äº†ã€‚å¦‚æœéå¸¸éœ€è¦è¿™äº›åŠŸèƒ½ï¼Œè¦ä¹ˆä½¿ç”¨<code>WordPress</code>ï¼Œè¦ä¹ˆæŠ˜è…¾<code>Hexo</code>çš„æ’ä»¶</li></ol><p>åˆ°è¿™é‡Œï¼Œä½ åº”è¯¥æ˜ç™½äº†<code>Hexo</code>æ˜¯ä¸€ä¸ªåŸºäº<code>Node.js</code>çš„ç¨‹åºï¼Œä»–å¸®åŠ©æˆ‘ä»¬æ¸²æŸ“æ–‡ç« ã€ç®¡ç†æ–‡ç« ï¼Œé€šè¿‡è¿™ä¸ª<code>Hexo</code>æˆ‘ä»¬å¯ä»¥å¿«é€Ÿã€ä½æˆæœ¬çš„éƒ¨ç½²è‡ªå·±çš„åšå®¢</p><h2 id="2-Why-is-Hexo"><a href="#2-Why-is-Hexo" class="headerlink" title="2. Why is Hexo"></a>2. Why is Hexo</h2><blockquote><p>Okï¼Œæˆ‘çŸ¥é“äº†ä»€ä¹ˆ<code>Hexo</code>ï¼Œå¯æ˜¯ä¸ºä»€ä¹ˆè¦ç”¨å®ƒå®ƒï¼Ÿ</p></blockquote><p>äº‹å®ä¸Šï¼Œé€‰å–<code>Hexo</code>ä½œä¸ºæˆ‘ä»¬çš„åšå®¢ç½‘ç«™æ¡†æ¶æ¥å¸®åŠ©æˆ‘ä»¬æ­å»ºæŠ€æœ¯åšå®¢æœ‰å¾ˆå¤šå¥½å¤„ï¼š</p><ol><li><code>Hexo</code>æ¡†æ¶çš„å­¦ä¹ æˆæœ¬éå¸¸ä½ï¼Œå­¦èµ·æ¥éå¸¸å¿«é€Ÿï¼Œå‘½ä»¤è¡Œå‡ æ¡è¯­å¥å°±èƒ½å¤Ÿå­¦ä¼šã€‚åœ¨æ•´ä¸ª<code>åšå®¢æ­å»ºè¿‡ç¨‹</code>ä¸­ï¼Œå­¦ä¹ <code>Hexo</code>å¯èƒ½åªå å¾ˆå°‘çš„æ—¶é—´ï¼Œä¸»è¦æ—¶é—´åœ¨äºæŒ‘é€‰ä¸€ä¸ªå¥½çœ‹çš„ä¸»é¢˜å¹¶è‡ªå·±ä¿®æ”¹ã€æ·»åŠ è‡ªå·±çš„ä¸ªäººä¿¡æ¯</li><li><code>Hexo</code>æ­å»ºçš„åšå®¢éå¸¸æ˜“äºç®¡ç†ã€‚<code>Hexo</code>ç®¡ç†çš„åšå®¢æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªæ–‡ä»¶å¤¹ã€‚å› ä¸ºHexoæ­å»ºå‡ºçš„åªæ˜¯é™æ€åšå®¢ç½‘ç«™ï¼Œå› æ­¤ä¸éœ€è¦åç«¯ç¨‹åºï¼Œæ‰€ä»¥ç½‘ç«™æ‰€æœ‰çš„èµ„æºï¼ˆ<code>HTML</code>ã€<code>CSS</code>ã€<code>JavaScript</code>ï¼‰éƒ½æ”¾åœ¨ä¸€ä¸ªæ–‡ä»¶å¤¹é‡Œå°±è¡Œã€‚å¦‚æœä¸­é—´é…ç½®å‡ºé—®é¢˜äº†ï¼Œé‚£ä¹ˆç›´æ¥åˆ æ‰æ•´ä¸ªæ–‡ä»¶å¤¹å°±è¡Œã€‚</li><li><code>Hexo</code>æ­å»ºçš„åšå®¢éƒ¨ç½²ã€è¿ç§»éå¸¸æ–¹ä¾¿ã€‚åŒæ ·æ˜¯ç”±äºHexoç®¡ç†çš„åšå®¢ç½‘ç«™æ˜¯ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œå› æ­¤æˆ‘ä»¬å¯åˆ©ç”¨Git<code>æ¥ä¿å­˜</code>ã€åŒæ­¥ä½ çš„åšå®¢ã€‚æ­¤å¤–ï¼Œç”±äº<code>Github</code>å’Œ<code>Gitee</code>æä¾›é™æ€ç½‘é¡µçš„<code>Page</code>æœåŠ¡ï¼Œæ‰€ä»¥æˆ‘ä»¬å…¶å®å¯ä»¥åˆ©ç”¨<code>Github</code>å’Œ<code>Gitee</code>ç­‰<code>Git</code>æ‰˜ç®¡ç½‘ç«™æ¥æ‰˜ç®¡æˆ‘ä»¬çš„ç½‘ç«™ã€‚é˜²æ­¢ç½‘ç»œæ”»å‡»è¿™äº›éƒ½ç”±ä»–ä»¬å¸®æˆ‘ä»¬åšå¥½äº†ã€‚</li><li><code>Hexo</code>æ­å»ºçš„åšå®¢æˆæœ¬éå¸¸ä½ã€‚æ­£æ˜¯å› ä¸ºæˆ‘ä»¬åˆ©ç”¨<code>Github</code>å’Œ<code>Gitee</code>æ¥æ‰˜ç®¡æˆ‘ä»¬çš„ç½‘ç«™ï¼Œå› æ­¤æˆ‘ä»¬åªéœ€è¦èŠ±é’±ä¹°åŸŸåå’Œå›¾åºŠå³å¯ï¼Œä¹°å…¬ç½‘æœåŠ¡å™¨ä»€ä¹ˆçš„å…¨éƒ¨çœæ‰äº†ã€‚</li><li><code>Hexo</code>å…·æœ‰éå¸¸å¤šç¾è§‚çš„ä¸»é¢˜ã€‚é€šè¿‡è¿™äº›ä¸»é¢˜ï¼Œæˆ‘ä»¬åªéœ€è¦è¿›è¡Œé…ç½®å’Œæœ‰é™çš„ä¿®æ”¹å°±èƒ½å¤Ÿåšå‡ºæ¥éå¸¸ç¾è§‚çš„åšå®¢ç½‘ç«™ã€‚</li></ol><blockquote><p><code>Hexo</code>çš„å®˜ç½‘ä¸Šæä¾›äº†éå¸¸å¤šçš„ä¸»é¢˜ï¼ˆ<a href="https://hexo.io/themes/">ç‚¹å‡»æŸ¥çœ‹</a>ï¼‰ï¼Œæˆªæ­¢æˆ‘å†™è¿™ç¯‡æ–‡ç« çš„æ—¶å€™ä¸€å…±æœ‰348ä¸ªå®˜æ–¹æ”¶å½•çš„ä¸»é¢˜ã€‚é™¤æ­¤ä»¥å¤–è¿˜æœ‰éå¸¸å¤šçš„æœªè¢«æ”¶å½•çš„ä¸»é¢˜ï¼Œå¼ºæ¨æˆ‘ç°åœ¨æ­£åœ¨ç”¨çš„ç”±<code>é—ªçƒä¹‹ç‹</code>åˆ¶ä½œçš„<code>Matery</code>ä¸»é¢˜ï¼Œåé¢ä¹Ÿä¼šè®²è§£å¦‚ä½•é…ç½®<code>Matery</code>ä¸»é¢˜ï¼Œè¿™æ˜¯Materyä¸»é¢˜çš„<a href="http://blinkfox.com/">å±•ç¤ºç½‘ç«™</a></p><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211113112326777.png" alt="Hexoå®˜ç½‘æ”¶å½•çš„ä¸»é¢˜"></p></blockquote><ol start="6"><li>â€¦â€¦ï¼ˆæš‚æ—¶åªæƒ³åˆ°è¿™å‡ ä¸ªç‚¹ï¼‰</li></ol><h2 id="3-Hexoç¯å¢ƒæ­å»º"><a href="#3-Hexoç¯å¢ƒæ­å»º" class="headerlink" title="3. Hexoç¯å¢ƒæ­å»º"></a>3. Hexoç¯å¢ƒæ­å»º</h2><blockquote><p>å¼€å‘ç¬¬ä¸€æ­¥ï¼šæ­å»ºç¯å¢ƒ</p></blockquote><p>æ³¨æ„ï¼Œç”±äºæˆ‘æœ¬äººé•¿æœŸä½¿ç”¨<code>Debian/Ubuntu</code>æ¥åšå¼€å‘ï¼Œå› æ­¤ä»¥ä¸‹æ•™ç¨‹éƒ½å°†æ˜¯åŸºäº<code>Ubuntu</code>ç¼–å†™çš„æ•™ç¨‹ã€‚å¦‚æœä½ æ˜¯å…¶ä»–<code>Linux</code>å‘è¡Œç‰ˆç”¨æˆ·ï¼Œé€‚åº¦ä¿®æ”¹å³å¯ï¼›å¦‚æœä½ æ˜¯<code>Windows</code>ç”¨æˆ·ï¼Œé‚£ä¹ˆä½ è¿˜éœ€è¦é…ç½®ä¸å°‘ä¸œè¥¿ï¼ŒçŸ¥ä¹ã€ç®€ä¹¦ä¸Šä½ è¿˜å¾—æŸ¥æŸ¥ã€‚</p><p>ä¸‹é¢æˆ‘ä»¬å°±å°†ä¸€æ­¥æ­¥æ­å»ºHexoç¯å¢ƒå‡ºæ¥</p><h3 id="1-å®‰è£…Node-jsç¯å¢ƒ"><a href="#1-å®‰è£…Node-jsç¯å¢ƒ" class="headerlink" title="1. å®‰è£…Node.jsç¯å¢ƒ"></a>1. å®‰è£…Node.jsç¯å¢ƒ</h3><p>å‰é¢è¯´é“ï¼Œ<code>Hexo</code>æ˜¯åŸºäº<code>Node.js</code>å¼€å‘çš„ç¨‹åºï¼Œå› æ­¤å…¶è¿è¡Œå°±éœ€è¦<code>Node.js</code>ï¼Œæ‰€ä»¥æˆ‘ä»¬ç¬¬ä¸€æ­¥å°±æ˜¯å®‰è£…<code>Node.js</code></p><blockquote><p>æ³¨æ„ï¼šå®˜ç½‘ä¸Šè¯´æ˜ï¼Œ<code>Hexo</code>éœ€è¦çš„<code>Node.js</code>çš„ç‰ˆæœ¬ä¸ä½äº<strong>10.13</strong>ï¼Œå¼ºçƒˆå»ºè®®<code>Node.js</code><strong>12.0</strong>ä»¥ä¸Šçš„ç‰ˆæœ¬</p></blockquote><p>æˆ‘ä»¬é¦–å…ˆç”¨<code>apt</code>æŸ¥ä¸€ä¸‹Ubuntuçš„ä»“åº“é‡Œçš„nodejsçš„ç‰ˆæœ¬</p><pre class="line-numbers language-bash"><code class="language-bash"><span class="token punctuation">(</span>base<span class="token punctuation">)</span> jack@jack-Alienware-m15-R3:~$ <span class="token function">sudo</span> apt search nodejs<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211113124733292.png" alt="aptæœç´¢nodejsçš„ç»“æœ"></p><p>ä¸éš¾çœ‹å‡ºæ¥ï¼Œ<code>apt</code>ä»“åº“é‡Œçš„<code>nodejs</code>çš„ç‰ˆæœ¬è¿‡ä½ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦è‡ªå·±ä»<code>nodejs</code>å®˜ç½‘ä¸Šä¸‹è½½æ–°ç‰ˆæœ¬çš„<code>nodejs</code>ï¼Œ<a href="https://nodejs.org/zh-cn/">å®˜ç½‘ä¼ é€é—¨</a></p><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211113124918179.png" alt="Node.jsçš„å®˜ç½‘"></p><p>åœ¨æˆ‘å†™è¿™ç¯‡æ–‡ç« çš„æ—¶å€™æœ€æ–°ç‰ˆæ˜¯16.13ï¼Œç”±äºéµå¾ªLinuxçš„ä¼ ç»Ÿï¼ŒåŒæ•°ç‰ˆæœ¬æ˜¯LTSï¼ˆLong Time Supportedï¼‰ç‰ˆæœ¬ï¼Œè€Œå•æ•°ç‰ˆæœ¬éƒ½æ˜¯å°é²œï¼ˆBetaï¼‰ç‰ˆæœ¬ï¼Œæ‰€ä»¥é€‰æ‹©<strong>ç¨³å®šç‰ˆå³å¯</strong></p><p>ä¸‹è½½ä¹‹åè§£å‹ä¼šå¾—åˆ°ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œè¿™ä¸ªæ–‡ä»¶å¤¹é‡Œ<code>bin</code>ç›®å½•æ”¾çš„å°±æ˜¯å®˜æ–¹æ›¿æˆ‘ä»¬å·²ç»ç¼–è¯‘å¥½äº†çš„äºŒè¿›åˆ¶å¯æ‰§è¡Œæ–‡ä»¶ï¼Œå¯ä»¥çœ‹åˆ°é™¤äº†nodeï¼Œåˆ«çš„éƒ½æ˜¯è½¯è¿æ¥</p><pre class="line-numbers language-bash"><code class="language-bash"><span class="token punctuation">(</span>base<span class="token punctuation">)</span> jack@jack-Alienware-m15-R3:~/æ¡Œé¢/node-v16.13.0-linux-x64$ tree -L 2<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><blockquote><p>æ³¨æ„ï¼Œæˆ‘è¿™é‡Œæ˜¯å·²ç»å®‰è£…è¿‡äº†<code>Node.js</code>ï¼Œæ­£å¸¸æƒ…å†µä¸‹æ˜¯æ²¡æœ‰<code>cnpm</code>çš„ï¼Œç¨åä¼šå®‰è£…<code>cnpm</code></p></blockquote><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211113125500195.png" alt="è§£å‹ä¹‹åçš„æ–‡ä»¶å¤¹"></p><p>ç”±äºåç»­éœ€è¦åœ¨å‘½ä»¤è¡Œä¸­è°ƒç”¨<code>Node.js</code>ï¼Œå› æ­¤è¿˜è¦æŠŠè¿™ä¸ª<code>bin</code>æ–‡ä»¶çš„è·¯å¾„åŠ å…¥åˆ°<code>Shell</code>æœç´¢å¯æ‰§è¡Œæ–‡ä»¶è·¯å¾„çš„<code>PATH</code>ç¯å¢ƒå˜é‡ä¸­ï¼Œè¿™é‡Œå›¾æ–¹ä¾¿ç›´æ¥åœ¨.<code>bashrc</code>ä¸­æ·»åŠ äº†</p><pre class="line-numbers language-bash"><code class="language-bash"><span class="token punctuation">(</span>base<span class="token punctuation">)</span> jack@jack-Alienware-m15-R3:~/æ¡Œé¢/node-v16.13.0-linux-x64$ vim ~/.bashrc  <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211113125903583.png" alt="æ·»åŠ äº†Node.jsçš„PATH"></p><p>è¿™æ ·æœªæ¥åœ¨å‘½ä»¤è¡Œå°±å¯ä»¥æ­£å¸¸çš„è°ƒç”¨<code>node.js</code>å’Œé™„å¸¦çš„<code>npm</code>äº†ï¼Œæµ‹è¯•ä¸€æ³¢</p><pre class="line-numbers language-bash"><code class="language-bash"><span class="token punctuation">(</span>base<span class="token punctuation">)</span> jack@jack-Alienware-m15-R3:~/æ¡Œé¢/node-v16.13.0-linux-x64$ node <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211113130048060.png" alt="æµ‹è¯•Node.js"></p><p>OKï¼Œè£…å®Œäº†<code>Node.js</code>ï¼Œä¸‹ä¸€æ­¥</p><h3 id="2-å®‰è£…cnpm"><a href="#2-å®‰è£…cnpm" class="headerlink" title="2. å®‰è£…cnpm"></a>2. å®‰è£…cnpm</h3><p>å‰é¢è®²åˆ°ï¼ŒNode.jsä¸­åˆ©ç”¨äº†Chrome V8å¼•æ“ä»è€Œå®ç°äº†JavaScriptçš„è¿è¡Œæ—¶ç¯å¢ƒï¼Œä»è€Œåšåˆ°äº†ç±»ä¼¼äºè§£é‡Šå™¨çš„æ•ˆæœã€‚åšè¿‡<code>Python</code>çš„äººåº”è¯¥éƒ½ä¼šçŸ¥é“<code>pip</code>å’Œ<code>conda</code>ï¼Œä»–ä»¬éƒ½æ˜¯<code>Python</code>çš„åŒ…ç®¡ç†å™¨ï¼ˆå½“ç„¶condaè¿˜å¯ä»¥ç®¡ç†ç¯å¢ƒï¼‰ã€‚é€šè¿‡<code>pip install xxx</code>æˆ–è€…<code>conda install xxx</code>å°±èƒ½å®‰è£…Pythonçš„ç¬¬ä¸‰æ–¹åº“ã€‚</p><p><code>Node.js</code>ä¹Ÿæä¾›äº†ç±»ä¼¼çš„åŒ…ç®¡ç†å·¥å…·ï¼Œå³<code>npmï¼ˆNode.js Package Managementï¼‰</code>ï¼Œé€šè¿‡npmæˆ‘ä»¬å°±èƒ½å¤Ÿå®‰è£…<code>Node.js</code>çš„ç¬¬ä¸‰æ–¹åº“ã€‚</p><p>ä½†æ˜¯è¿™äº›åŒ…ç®¡ç†å·¥å…·çš„å…±æ€§å°±æ˜¯ä¸‹è½½çš„è¿™äº›åº“éƒ½æ˜¯åœ¨åŒ…ç®¡ç†å·¥å…·å®˜ç½‘ä¸Šç»´æŠ¤çš„åŒ…ï¼Œæˆ‘ä»¬ä½¿ç”¨<code>xxx install xxx</code>çš„æ—¶å€™ï¼Œä¼šå»<code>xxx</code>çš„åŒ…ç®¡ç†ç½‘ç«™ä¸Šæœç´¢<code>xxx</code>åŒ…ï¼Œç„¶åä¸‹è½½ã€‚é—®é¢˜çš„å…³é”®å°±å‡ºåœ¨äº†ä¸‹è½½è¿™ä¸€æ­¥ï¼Œç”±äºè¿™äº›åŒ…ç®¡ç†ç½‘ç«™æœåŠ¡å™¨éƒ½åœ¨å›½å¤–ï¼Œå› æ­¤å›½å†…ä¸‹è½½å°±ä¼šå¾ˆæ…¢ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬é€šè¿‡æ¢æºæ¥è§£å†³ï¼Œå³æŒ‡å®šå»å›½å†…çš„åŒ…ç®¡ç†ç½‘ç«™ä¸Šä¸‹è½½ã€‚åœ¨<code>pip</code>ä¸­æˆ‘ä»¬å¯ä»¥æŒ‡å®š<code>-i</code>å‚æ•°ï¼Œä»è€ŒæŒ‡å®šå»æ¸…åæºæˆ–è€…ä¸­ç§‘å¤§æºä¸‹è½½<code>Python</code>ç¬¬ä¸‰æ–¹åŒ…ã€‚è€Œ<code>npm</code>æˆ‘ä»¬åŒæ ·ä¹Ÿå¯ä»¥æŒ‡å®š<code>--registry</code>å‚æ•°ï¼Œä»è€ŒæŒ‡å®šå›½å†…çš„æºï¼ˆä¸€èˆ¬éƒ½æ˜¯æ·˜å®æºï¼‰ã€‚</p><p>ä½†æ˜¯æ¯æ¬¡éƒ½ä½¿ç”¨<code>--registry</code>å‚æ•°æœ‰ç‚¹è ¢ï¼Œæˆ‘ä»¬ç›´æ¥ä½¿ç”¨æ·˜å®åšå¥½çš„<code>cnpm</code>åŒ…ç®¡ç†å·¥å…·å°±è¡Œã€‚<code>cnpm</code>å’Œ<code>npm</code>åœ¨ä½œç”¨ä¸Šæ˜¯ä¸€æ ·çš„ï¼Œä¸è¿‡å¯¹å›½å†…ç”¨æˆ·åšäº†å¾ˆä¸é”™çš„ä¼˜åŒ–ã€‚</p><p>æˆ‘ä»¬é¦–å…ˆé€šè¿‡npmæŒ‡å®š<code>--registry</code>å‚æ•°æ¥å®‰è£…<code>cnpm</code></p><pre class="line-numbers language-bash"><code class="language-bash"><span class="token punctuation">(</span>base<span class="token punctuation">)</span> jack@jack-Alienware-m15-R3:~/æ¡Œé¢/node-v16.13.0-linux-x64$ <span class="token function">npm</span> <span class="token function">install</span> -g cnpm --registry<span class="token operator">=</span><span class="token string">"https://registry.npm.taobao.org"</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ç¨ç­‰ç‰‡åˆ»å³å¯ï¼Œè­¦å‘Šæ˜¯å·²ç»å®‰è£…çš„åˆ«çš„åŒ…æŠ¥çš„é”™ï¼Œéƒ½åé¢æ²¡å•¥å½±å“ï¼Œå› ä¸ºæˆ‘å·²ç»å®‰è£…è¿‡äº†cnpmï¼Œæ‰€ä»¥ä¸‹é¢çš„æˆªå›¾å’Œä½ çš„å¯èƒ½ä¸ä¸€æ ·</p><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211113131609169.png" alt="å®‰è£…cnpm"></p><p>å®‰è£…ä¹‹åæ£€æŸ¥ä¸‹å®‰è£…æ˜¯å¦æˆåŠŸï¼Œå½“ç„¶ç”±äºè·¯å¾„ç­‰ç¯å¢ƒä¸ä¸€æ ·ï¼Œè¾“å‡ºç»“æœä¹Ÿä¸å¤ªä¸€æ ·ï¼Œä½†æ˜¯èƒ½å¤Ÿæ­£å¸¸è¾“å‡ºå°±è¡¨ç¤ºå®‰è£…å¯¹äº†</p><pre class="line-numbers language-bash"><code class="language-bash"><span class="token punctuation">(</span>base<span class="token punctuation">)</span> jack@jack-Alienware-m15-R3:~/æ¡Œé¢/node-v16.13.0-linux-x64$ cnpm --version<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211113131849887.png" alt="æ£€æŸ¥cnpmæ˜¯å¦å®‰è£…æˆåŠŸ"></p><p>OKï¼Œä¸‹ä¸€æ­¥å®‰è£…Git</p><h3 id="3-å®‰è£…git"><a href="#3-å®‰è£…git" class="headerlink" title="3. å®‰è£…git"></a>3. å®‰è£…git</h3><p>ç”±äº<code>Hexo</code>å†…ç½®äº†åšå®¢çš„åŒæ­¥ã€éƒ¨ç½²ç­‰åŠŸèƒ½ï¼Œå› æ­¤<code>Hexo</code>ä¾èµ–äº<code>git</code>ï¼Œæ‰€ä»¥æˆ‘ä»¬é¦–å…ˆéœ€è¦å®‰è£…<code>git</code></p><p>å®‰è£…gitå°±ç®€å•äº†ï¼Œç›´æ¥<code>apt</code>å®‰è£…å³å¯ï¼ŒåŒæ ·ç”±äºæˆ‘å·²ç»å®‰è£…è¿‡äº†ï¼Œæ‰€ä»¥è¾“å‡ºä¼šä¸ä¸€æ ·</p><pre class="line-numbers language-bash"><code class="language-bash"><span class="token punctuation">(</span>base<span class="token punctuation">)</span> jack@jack-Alienware-m15-R3:~/æ¡Œé¢/node-v16.13.0-linux-x64$ <span class="token function">sudo</span> apt <span class="token function">install</span> <span class="token function">git</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211113132146054.png" alt="aptå®‰è£…git"></p><p>åŒæ ·ï¼ŒæŸ¥çœ‹ä¸‹<code>git</code>çš„ç‰ˆæœ¬ç¡®è®¤å®‰è£…æˆåŠŸ</p><pre class="line-numbers language-bash"><code class="language-bash"><span class="token punctuation">(</span>base<span class="token punctuation">)</span> jack@jack-Alienware-m15-R3:~/æ¡Œé¢/node-v16.13.0-linux-x64$ <span class="token function">git</span> --version<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211113132257442.png" alt="ç¡®è®¤gitå®‰è£…æˆåŠŸ"></p><h3 id="4-å®‰è£…Hexo"><a href="#4-å®‰è£…Hexo" class="headerlink" title="4. å®‰è£…Hexo"></a>4. å®‰è£…Hexo</h3><p>åœ¨å‰é¢æ‰€æœ‰å¿…å¤‡çš„ç¯å¢ƒå®‰è£…æˆåŠŸåï¼Œä¸‹é¢å°†å®‰è£…<code>Hexo</code></p><p>å‰é¢ç”±äºå·²ç»å®‰è£…äº†<code>cnpm</code>ï¼Œå› æ­¤æˆ‘ä»¬ç›´æ¥ä½¿ç”¨<code>cnpm</code>æ¥å®‰è£…<code>Hexo</code></p><pre class="line-numbers language-bash"><code class="language-bash"><span class="token punctuation">(</span>base<span class="token punctuation">)</span> jack@jack-Alienware-m15-R3:~/æ¡Œé¢/node-v16.13.0-linux-x64$ cnpm <span class="token function">install</span> -g hexo-cli<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ç¨ç­‰ç‰‡åˆ»å°±å®‰è£…å¥½äº†</p><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211113132546043.png" alt="å®‰è£…hexo"></p><p>ä¸ºäº†åç»­æˆ‘ä»¬èƒ½å¤Ÿç›´æ¥åœ¨å‘½ä»¤è¡Œè°ƒç”¨<code>hexo</code>çš„å‘½ä»¤ï¼Œæˆ‘ä»¬æŠŠ<code>hexo</code>çš„å¯æ‰§è¡Œæ–‡ä»¶æ·»åŠ åˆ°<code>PATH</code>ä¸­å»</p><p>æ³¨æ„ï¼Œ<code>npm</code>å’Œ<code>cnpm</code>çš„å·¥ä½œåŸç†éƒ½æ˜¯æŠŠä¸‹è½½çš„åŒ…æ”¾åˆ°<code>node.js</code>æ‰€åœ¨çš„æ ¹ç›®å½•çš„<code>lib</code>ä¸­ï¼Œå’Œ<code>pip</code>æ˜¯å¼‚æ›²åŒå·¥ä¹‹ç§’ï¼Œæˆ‘ä»¬æ‰“å¼€ä¹‹å‰node.jsåœ¨çš„æ–‡ä»¶å¤¹å°±èƒ½çœ‹åˆ°</p><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211113133034708.png" alt="hexoçš„å®‰è£…ä½ç½®"></p><p>åŒæ ·ç”¨<code>vim</code>ç¼–è¾‘<code>.bashrc</code></p><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211113133331507.png" alt="æ·»åŠ hexoå¯æ‰§è¡Œæ–‡ä»¶"></p><p>æœ€åå‘½ä»¤è¡ŒæŸ¥çœ‹ä¸‹hexoçš„ç‰ˆæœ¬ç¡®è®¤æˆåŠŸ</p><pre class="line-numbers language-bash"><code class="language-bash"><span class="token punctuation">(</span>base<span class="token punctuation">)</span> jack@jack-Alienware-m15-R3:~/æ¡Œé¢/node-v16.13.0-linux-x64$ hexo --version<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211113133455333.png" alt="ç¡®è®¤hexoå®‰è£…æˆåŠŸ"></p><p>è‡³æ­¤ï¼Œæˆ‘ä»¬å·²ç»æˆåŠŸæ­å»ºäº†Hexoçš„ç¯å¢ƒã€‚</p><p>æœ¬ç« ç»“æŸ~</p><p>æœ¬ç« æˆ‘ä»¬é¦–å…ˆè®²è§£äº†ä»€ä¹ˆæ˜¯<code>hexo</code>ï¼Œç„¶åè®²è§£äº†ä¸ºä»€ä¹ˆæˆ‘ä»¬è¦ä½¿ç”¨<code>hexo</code>ï¼Œæœ€åè®²è§£äº†å¦‚ä½•å®‰è£…<code>hexo</code>ã€‚</p><p>ä¸‹ä¸€èŠ‚é¢„å‘Šï¼š<code>Hexoä½¿ç”¨ä»¥åŠé…ç½®</code></p><p>ç å­—ä¸æ˜“ï¼Œ4000å­—ï¼Œæ¬¢è¿æ‰“èµ~ï¼Œä¸€èµ·ä¸ºå¼€æºäº‹ä¸šåšè´¡çŒ®~</p>]]></content>
      
      
      <categories>
          
          <category> Hexoåšå®¢æ­å»º </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åŸºäºHexoçš„ä¸ªäººæŠ€æœ¯åšå®¢æ­å»º â€”â€” Part 0 æ¦‚è¿°</title>
      <link href="/2021/11/12/ji-yu-hexo-de-ge-ren-ji-zhu-bo-ke-da-jian-part-0-gai-shu/"/>
      <url>/2021/11/12/ji-yu-hexo-de-ge-ren-ji-zhu-bo-ke-da-jian-part-0-gai-shu/</url>
      
        <content type="html"><![CDATA[<blockquote><p>æœ¬ç³»åˆ—æ–‡ç« é¢å‘å‰ç«¯å°ç™½ï¼Œå¸Œæœ›ä»¥å°½é‡ç®€å•è€Œåˆä¸å•°å—¦çš„è¯­è¨€ä»‹ç»å¦‚ä½•æ­å»º<code>åŸºäºHexoçš„ä¸ªäººæŠ€æœ¯åšå®¢</code></p></blockquote><span id="more"></span><h1 id="åŸºäºHexoçš„ä¸ªäººæŠ€æœ¯åšå®¢æ­å»º-â€”â€”-Part-0-æ¦‚è¿°"><a href="#åŸºäºHexoçš„ä¸ªäººæŠ€æœ¯åšå®¢æ­å»º-â€”â€”-Part-0-æ¦‚è¿°" class="headerlink" title="åŸºäºHexoçš„ä¸ªäººæŠ€æœ¯åšå®¢æ­å»º â€”â€” Part 0 æ¦‚è¿°"></a>åŸºäºHexoçš„ä¸ªäººæŠ€æœ¯åšå®¢æ­å»º â€”â€” Part 0 æ¦‚è¿°</h1><p>ä½œä¸ºä¸€ä¸ªçƒ­çˆ±å¼€æºçš„æŠ€æœ¯çˆ±å¥½è€…ï¼Œæˆ‘çƒ­çˆ±å­¦ä¹ æ–°çš„æŠ€æœ¯ã€ä¹Ÿçƒ­è¡·åˆ†äº«è‡ªå·±æŒæ¡çš„æŠ€æœ¯ã€‚ç„¶è€Œåˆ†äº«å´å¹¶éæ˜“äº‹ï¼Œæƒ³è¦å°†ä½ çš„å¼€æºæŠ€æœ¯ä»¥ä¸ªäººæŠ€æœ¯åšå®¢çš„å½¢å¼åˆ†äº«åˆ°äº’è”ç½‘ä¸Šéœ€è¦æœ‰ä»¥ä¸‹çš„è¯¸å¤šæ­¥éª¤ï¼š</p><ol><li>æŒæ¡HTMLã€CSSã€JavaScriptã€Vue.jsã€Node.jsç­‰å‰ç«¯æŠ€æœ¯ï¼Œè‡³å°‘èƒ½å¤Ÿå†™å‡ºæ¥ä¸€ä¸ªé™æ€ç½‘ç«™ï¼›æˆ–è€…åœ¨é™æ€ç½‘é¡µçš„åŸºç¡€ä¸ŠæŒæ¡Nginxã€Apacheç­‰ç­‰åç«¯æŠ€æœ¯ï¼Œä¸ºå‰ç«¯æä¾›ç™»é™†ç­‰åŠŸèƒ½ä»¥å®ç°ä¸€ä¸ªåŠ¨æ€ç½‘ç«™ã€‚</li><li>è´­ä¹°å…·æœ‰å…¬ç½‘IPçš„æœåŠ¡å™¨ä»¥è¿è¡Œä½ çš„ç½‘ç«™ï¼Œä½¿å¾—ä»»ä½•æƒ³è¦è®¿é—®ä½ ç½‘ç«™çš„äººéƒ½èƒ½å¤Ÿé€šè¿‡å…¬ç½‘ä¸Šçš„æœåŠ¡å™¨æ¥è®¿é—®ä½ çš„ç½‘ç«™ã€‚</li><li>è´­ä¹°ä¸€ä¸ªåŸŸåå¹¶ä¸ºå…¶æ·»åŠ DNSè§£æã€å®‰è£…SSLè¯ä¹¦</li><li>Optionalï¼šä¸­å›½åŸŸå<strong>xxxx.xxxx.cn</strong>ä¸‹çš„ç½‘ç«™éœ€è¦è¿›è¡Œå¤‡æ¡ˆ</li><li>é…ç½®ä½ çš„æœåŠ¡å™¨ä»¥é¿å…æ¥è‡ªå…¬ç½‘ä¸Šçš„æ”»å‡»</li><li>â€¦â€¦</li></ol><p>å®Œæˆäº†ä»¥ä¸Šè¯¸å¤šæ­¥éª¤ï¼Œä½ çš„æŠ€æœ¯ç½‘ç«™æ‰èƒ½å¤Ÿè¢«å…¶ä»–äººè®¿é—®ï¼Œåˆ«äººæ‰èƒ½å¤Ÿæ­£å¸¸çš„æ¥é˜…è¯»ä½ çš„æŠ€æœ¯åšå®¢ã€‚<strong>å¦‚æ­¤ç¹ççš„ç¨‹åºï¼Œå¾€å¾€åœ¨å‰å‡ æ­¥å°±å“é€€äº†ä¸å°‘äºº</strong>ã€‚ä¹Ÿæ­£æ˜¯å› ä¸ºå¦‚æ­¤ï¼Œå°±å‡ºç°äº†ä¸å°‘å¸®åŠ©æˆ‘ä»¬åˆ†äº«æŠ€æœ¯çš„å·¥å…·ï¼Œä¾‹å¦‚ï¼šå¸®åŠ©æˆ‘ä»¬å¿«é€Ÿæ­å»ºåšå®¢è€Œä¸éœ€è¦è‡ªå·±æŒæ¡å‰ç«¯æŠ€æœ¯çš„<code>WordPress</code>ã€å¸®åŠ©æˆ‘ä»¬ç»´æŠ¤æ–‡ç« çš„<code>CSDN</code>ã€<code>çŸ¥ä¹</code>ã€<code>ç®€ä¹¦</code>ç­‰ç­‰ï¼›ç„¶è€Œè¿™äº›å·¥å…·ï¼Œä¹Ÿæœ‰ä»–ä»¬çš„ç¼ºç‚¹</p><ul><li><code>WordPress</code>ï¼šå°½ç®¡<code>WordPress</code>ä½¿å¾—æˆ‘ä»¬å¯ä»¥å¯è§†åŒ–çš„å»ºç«‹ã€ç®¡ç†å‰ç«¯é¡µé¢ã€‚ä½†æ˜¯é¦–å…ˆï¼Œä¸Šé¢çš„æµç¨‹ä¸­è¯¸å¤šæ­¥éª¤ä»ç„¶éœ€è¦è‡ªå·±æ¥å®Œæˆï¼Œè´­ä¹°å…¬ç½‘æœåŠ¡å™¨ã€è´­ä¹°åŸŸåç­‰ç­‰éƒ½æ˜¯ä¸å°çš„å¼€é”€ï¼›å…¶æ¬¡<code>WordPress</code>ç±»ä¼¼äº<code>Vscode</code>ï¼Œå…·æœ‰ä¸€ä¸ªå¼ºå¤§çš„æ’ä»¶ç³»ç»Ÿï¼Œå³è½¯ä»¶æœ¬èº«åªå…·æœ‰ä¸€å®šçš„åŠŸèƒ½ï¼Œæ›´å¤šçš„åŠŸèƒ½éœ€è¦é æ’ä»¶æ¥å®ç°ã€‚ç„¶è€Œå’Œ<code>Vscode</code>ä¸åŒçš„æ˜¯<code>WordPress</code>ä¸Šå¥½ç”¨çš„æ’ä»¶æ˜¯è¦æ”¶è´¹çš„ï¼Œè€Œä¸”ä»·æ ¼ä¸è²ï¼ˆ<del>å¿½ç•¥æ‰ä¸‡èƒ½çš„æ·˜å®</del>ï¼‰</li><li><code>CSDN</code>ã€<code>ç®€ä¹¦</code>ã€<code>åšå®¢å›­</code>ï¼šå°½ç®¡ç±»ä¼¼äº<code>CSDN</code>ã€<code>ç®€ä¹¦</code>ã€<code>åšå®¢å›­</code>ç­‰è¿™ç±»åšå®¢ç½‘ç«™å·²ç»å¸®åŠ©æˆ‘ä»¬å®Œæˆäº†ç½‘ç«™å®‰å…¨é˜²æŠ¤ã€æœç´¢å¼•æ“ä¼˜åŒ–ã€æ–‡ç« ç¼–è¾‘å‘å¸ƒå’Œç®¡ç†ç­‰åŠŸèƒ½ï¼Œä»–ä»¬çš„é—®é¢˜å­˜åœ¨äºç›—å¸–å®åœ¨å¤ªè¿‡äºä¸¥é‡ï¼Œå¾ˆå¤šæ—¶å€™æœç´¢è‡ªå·±éœ€è¦è§£å†³çš„é—®é¢˜ï¼Œç»“æœæœå‡ºæ¥çš„å…¨éƒ½æ˜¯ä¸€æ¨¡ä¸€æ ·çš„ã€çˆ¬è™«å¤åˆ¶ç²˜è´´çš„æ–‡ç« ï¼Œå¯¹è§£å†³é—®é¢˜æ¯«æ— å¸®åŠ©ï¼Œè‡ªå·±çš„æ–‡ç« å’Œè¿™äº›åƒåœ¾æ–‡ç« åœ¨ä¸€èµ·ï¼Œå®åœ¨æ˜¯äºå¿ƒä¸å¿ï¼›å…¶æ¬¡ï¼Œä½œä¸º<strong>ä¸€åä¼˜ç§€çš„ç¨‹åºå‘˜ï¼Œæ‹¥æœ‰è‡ªå·±çš„æŠ€æœ¯åšå®¢ç½‘ç«™å°†ä¼šæå¤§åœ°å¸®åŠ©è‡ªå·±çš„æœªæ¥ï¼Œæ— è®ºæ˜¯æ±‚èŒä¹Ÿå¥½äº¦æˆ–æ˜¯æ±‚å­¦â€¦â€¦</strong></li></ul><p>å› æ­¤è‡ªå·±æ­å»ºä¸€ä¸ªåšå®¢å°±éå¸¸æœ‰å¿…è¦äº†ã€‚</p><p>æœ¬ç³»åˆ—æœ€ç»ˆå°†é€šè¿‡ä¸€ç³»åˆ—æ–‡ç« ï¼Œæ¥å¸®åŠ©ä½ ä½æˆæœ¬ï¼ˆ<strong>å¯èƒ½ä¹Ÿå°±å‡ å—é’±</strong>ï¼‰çš„æ„å»ºå‡ºå±äºä½ è‡ªå·±çš„ã€ç¾è§‚çš„ä¸ªäººæŠ€æœ¯åšå®¢</p><p><img src="https://jack-1307599355.cos.ap-shanghai.myqcloud.com/img/image-20211112180102412.png" alt="æœ€ç»ˆæ•ˆæœå±•ç¤º"></p>]]></content>
      
      
      <categories>
          
          <category> Hexoåšå®¢æ­å»º </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
